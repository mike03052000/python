<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.12: http://docutils.sourceforge.net/" />
<title>Python Course Notes</title>
<meta name="author" content="Dave Kuhlman" />
<meta name="date" content="January 10, 2014" />
<style type="text/css">

/* css */

body {
  font: 90% 'Lucida Grande', Verdana, Geneva, Lucida, Arial, Helvetica, sans-serif;
  background: #ffffff;
  color: black;
  margin: 2em;
  padding: 2em;
}

a[href] {
  color: #436976;
  background-color: transparent;
}

a.toc-backref {
  text-decoration: none;
}

h1 a[href] {
  text-decoration: none;
  color: #fcb100;
  background-color: transparent;
}

a.strong {
  font-weight: bold;
}

img {
  margin: 0;
  border: 0;
}

p {
  margin: 0.5em 0 1em 0;
  line-height: 1.5em;
}
p a {
  text-decoration: underline;
}
p a:visited {
  color: purple;
  background-color: transparent;
}
p a:active {
  color: red;
  background-color: transparent;
}
a:hover {
  text-decoration: none;
}
p img {
  border: 0;
  margin: 0;
}

h1, h2, h3, h4, h5, h6 {
  color: #003a6b;
  background-color: transparent;
  font: 100% 'Lucida Grande', Verdana, Geneva, Lucida, Arial, Helvetica, sans-serif;
  margin: 0;
  padding-top: 0.5em;
}

h1 {
  font-size: 160%;
  margin-bottom: 0.5em;
  border-bottom: 1px solid #fcb100;
}
h2 {
  font-size: 140%;
  margin-bottom: 0.5em;
  border-bottom: 1px solid #aaa;
}
h3 {
  font-size: 130%;
  margin-bottom: 0.5em;
  text-decoration: underline;
}
h4 {
  font-size: 110%;
  font-weight: bold;
}
h5 {
  font-size: 100%;
  font-weight: bold;
}
h6 {
  font-size: 80%;
  font-weight: bold;
}

ul a, ol a {
  text-decoration: underline;
}

dt {
  font-weight: bold;
}
dt a {
  text-decoration: none;
}

dd {
  line-height: 1.5em;
  margin-bottom: 1em;
}

legend {
  background: #ffffff;
  padding: 0.5em;
}

form {
  margin: 0;
}


dl.form {
  margin: 0;
  padding: 1em;
}

dl.form dt {
  width: 30%;
  float: left;
  margin: 0;
  padding: 0 0.5em 0.5em 0;
  text-align: right;
}

input {
  font: 100% 'Lucida Grande', Verdana, Geneva, Lucida, Arial, Helvetica, sans-serif;
  color: black;
  background-color: white;
  vertical-align: middle;
}

abbr, acronym, .explain {
  color: black;
  background-color: transparent;
}

q, blockquote {
}

code, pre {
  font-family: monospace;
  font-size: 1.2em;
  display: block;
  padding: 10px;
  border: 1px solid #838183;
  background-color: #eee;
  color: #000;
  overflow: auto;
  margin: 0.5em 1em;
}

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

tt.docutils {
  background-color: #dddddd;
}

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="python-course-notes">
<h1 class="title">Python Course Notes</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>Dave Kuhlman</td></tr>
<tr><th class="docinfo-name">Contact:</th>
<td><a class="first last reference external" href="mailto:dkuhlman&#64;davekuhlman.org">dkuhlman&#64;davekuhlman.org</a></td></tr>
<tr><th class="docinfo-name">Address:</th>
<td><pre class="address">
<a class="first last reference external" href="http://www.davekuhlman.org">http://www.davekuhlman.org</a>
</pre>
</td></tr>
<tr><th class="docinfo-name">Revision:</th>
<td>1.4c</td></tr>
<tr><th class="docinfo-name">Date:</th>
<td>January 10, 2014</td></tr>
</tbody>
</table>
<!-- vim: set ft=rst: -->
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Copyright:</th><td class="field-body">Copyright (c) 2013 Dave Kuhlman.  All Rights Reserved.
This software is subject to the provisions of the MIT License
<a class="reference external" href="http://www.opensource.org/licenses/mit-license.php">http://www.opensource.org/licenses/mit-license.php</a>.</td>
</tr>
<tr class="field"><th class="field-name">Abstract:</th><td class="field-body">This document provides notes and an outline of an
introductory course on programming in Python.</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#introductions-etc" id="id5">1&nbsp;&nbsp;&nbsp;Introductions Etc</a><ul class="auto-toc">
<li><a class="reference internal" href="#resources" id="id6">1.1&nbsp;&nbsp;&nbsp;Resources</a></li>
<li><a class="reference internal" href="#a-general-description-of-python" id="id7">1.2&nbsp;&nbsp;&nbsp;A general description of Python</a></li>
<li><a class="reference internal" href="#interactive-python" id="id8">1.3&nbsp;&nbsp;&nbsp;Interactive Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lexical-matters" id="id9">2&nbsp;&nbsp;&nbsp;Lexical matters</a><ul class="auto-toc">
<li><a class="reference internal" href="#lines" id="id10">2.1&nbsp;&nbsp;&nbsp;Lines</a></li>
<li><a class="reference internal" href="#comments" id="id11">2.2&nbsp;&nbsp;&nbsp;Comments</a></li>
<li><a class="reference internal" href="#names-and-tokens" id="id12">2.3&nbsp;&nbsp;&nbsp;Names and tokens</a></li>
<li><a class="reference internal" href="#blocks-and-indentation" id="id13">2.4&nbsp;&nbsp;&nbsp;Blocks and indentation</a></li>
<li><a class="reference internal" href="#docstrings" id="id14">2.5&nbsp;&nbsp;&nbsp;Docstrings</a></li>
<li><a class="reference internal" href="#program-structure" id="id15">2.6&nbsp;&nbsp;&nbsp;Program structure</a></li>
<li><a class="reference internal" href="#operators" id="id16">2.7&nbsp;&nbsp;&nbsp;Operators</a></li>
<li><a class="reference internal" href="#also-see" id="id17">2.8&nbsp;&nbsp;&nbsp;Also see</a></li>
<li><a class="reference internal" href="#code-evaluation" id="id18">2.9&nbsp;&nbsp;&nbsp;Code evaluation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#statements-and-inspection-preliminaries" id="id19">3&nbsp;&nbsp;&nbsp;Statements and inspection -- preliminaries</a></li>
<li><a class="reference internal" href="#built-in-data-types" id="id20">4&nbsp;&nbsp;&nbsp;Built-in data-types</a><ul class="auto-toc">
<li><a class="reference internal" href="#numeric-types" id="id21">4.1&nbsp;&nbsp;&nbsp;Numeric types</a></li>
<li><a class="reference internal" href="#tuples-and-lists" id="id22">4.2&nbsp;&nbsp;&nbsp;Tuples and lists</a></li>
<li><a class="reference internal" href="#strings" id="id23">4.3&nbsp;&nbsp;&nbsp;Strings</a><ul class="auto-toc">
<li><a class="reference internal" href="#the-new-string-format-method" id="id24">4.3.1&nbsp;&nbsp;&nbsp;The new string.format method</a></li>
<li><a class="reference internal" href="#unicode-strings" id="id25">4.3.2&nbsp;&nbsp;&nbsp;Unicode strings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dictionaries" id="id26">4.4&nbsp;&nbsp;&nbsp;Dictionaries</a></li>
<li><a class="reference internal" href="#files" id="id27">4.5&nbsp;&nbsp;&nbsp;Files</a></li>
<li><a class="reference internal" href="#other-built-in-types" id="id28">4.6&nbsp;&nbsp;&nbsp;Other built-in types</a><ul class="auto-toc">
<li><a class="reference internal" href="#the-none-value-type" id="id29">4.6.1&nbsp;&nbsp;&nbsp;The None value/type</a></li>
<li><a class="reference internal" href="#boolean-values" id="id30">4.6.2&nbsp;&nbsp;&nbsp;Boolean values</a></li>
<li><a class="reference internal" href="#sets-and-frozensets" id="id31">4.6.3&nbsp;&nbsp;&nbsp;Sets and frozensets</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#functions-and-classes-a-preview" id="id32">5&nbsp;&nbsp;&nbsp;Functions and Classes -- A Preview</a></li>
<li><a class="reference internal" href="#statements" id="id33">6&nbsp;&nbsp;&nbsp;Statements</a><ul class="auto-toc">
<li><a class="reference internal" href="#assignment-statement" id="id34">6.1&nbsp;&nbsp;&nbsp;Assignment statement</a></li>
<li><a class="reference internal" href="#import-statement" id="id35">6.2&nbsp;&nbsp;&nbsp;import statement</a></li>
<li><a class="reference internal" href="#print-statement" id="id36">6.3&nbsp;&nbsp;&nbsp;print statement</a></li>
<li><a class="reference internal" href="#if-elif-else-statement" id="id37">6.4&nbsp;&nbsp;&nbsp;if: elif: else: statement</a></li>
<li><a class="reference internal" href="#for-statement" id="id38">6.5&nbsp;&nbsp;&nbsp;for: statement</a></li>
<li><a class="reference internal" href="#while-statement" id="id39">6.6&nbsp;&nbsp;&nbsp;while: statement</a></li>
<li><a class="reference internal" href="#continue-and-break-statements" id="id40">6.7&nbsp;&nbsp;&nbsp;continue and break statements</a></li>
<li><a class="reference internal" href="#try-except-statement" id="id41">6.8&nbsp;&nbsp;&nbsp;try: except: statement</a></li>
<li><a class="reference internal" href="#raise-statement" id="id42">6.9&nbsp;&nbsp;&nbsp;raise statement</a></li>
<li><a class="reference internal" href="#with-statement" id="id43">6.10&nbsp;&nbsp;&nbsp;with: statement</a><ul class="auto-toc">
<li><a class="reference internal" href="#writing-a-context-manager" id="id44">6.10.1&nbsp;&nbsp;&nbsp;Writing a context manager</a></li>
<li><a class="reference internal" href="#using-the-with-statement" id="id45">6.10.2&nbsp;&nbsp;&nbsp;Using the with: statement</a></li>
</ul>
</li>
<li><a class="reference internal" href="#del" id="id46">6.11&nbsp;&nbsp;&nbsp;del</a></li>
<li><a class="reference internal" href="#assert-statement" id="id47">6.12&nbsp;&nbsp;&nbsp;assert statement</a></li>
<li><a class="reference internal" href="#case-statement" id="id48">6.13&nbsp;&nbsp;&nbsp;case statement</a></li>
</ul>
</li>
<li><a class="reference internal" href="#functions-modules-packages-and-debugging" id="id49">7&nbsp;&nbsp;&nbsp;Functions, Modules, Packages, and Debugging</a><ul class="auto-toc">
<li><a class="reference internal" href="#functions" id="id50">7.1&nbsp;&nbsp;&nbsp;Functions</a><ul class="auto-toc">
<li><a class="reference internal" href="#the-def-statement" id="id51">7.1.1&nbsp;&nbsp;&nbsp;The def statement</a></li>
<li><a class="reference internal" href="#returning-values" id="id52">7.1.2&nbsp;&nbsp;&nbsp;Returning values</a></li>
<li><a class="reference internal" href="#parameters" id="id53">7.1.3&nbsp;&nbsp;&nbsp;Parameters</a></li>
<li><a class="reference internal" href="#arguments" id="id54">7.1.4&nbsp;&nbsp;&nbsp;Arguments</a></li>
<li><a class="reference internal" href="#local-variables" id="id55">7.1.5&nbsp;&nbsp;&nbsp;Local variables</a></li>
<li><a class="reference internal" href="#other-things-to-know-about-functions" id="id56">7.1.6&nbsp;&nbsp;&nbsp;Other things to know about functions</a></li>
<li><a class="reference internal" href="#global-variables-and-the-global-statement" id="id57">7.1.7&nbsp;&nbsp;&nbsp;Global variables and the global statement</a></li>
<li><a class="reference internal" href="#docstrings-for-functions" id="id58">7.1.8&nbsp;&nbsp;&nbsp;Docstrings for functions</a></li>
<li><a class="reference internal" href="#decorators-for-functions" id="id59">7.1.9&nbsp;&nbsp;&nbsp;Decorators for functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lambda" id="id60">7.2&nbsp;&nbsp;&nbsp;lambda</a></li>
<li><a class="reference internal" href="#iterators-and-generators" id="id61">7.3&nbsp;&nbsp;&nbsp;Iterators and generators</a></li>
<li><a class="reference internal" href="#modules" id="id62">7.4&nbsp;&nbsp;&nbsp;Modules</a><ul class="auto-toc">
<li><a class="reference internal" href="#docstrings-for-modules" id="id63">7.4.1&nbsp;&nbsp;&nbsp;Docstrings for modules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#packages" id="id64">7.5&nbsp;&nbsp;&nbsp;Packages</a></li>
</ul>
</li>
<li><a class="reference internal" href="#classes" id="id65">8&nbsp;&nbsp;&nbsp;Classes</a><ul class="auto-toc">
<li><a class="reference internal" href="#a-simple-class" id="id66">8.1&nbsp;&nbsp;&nbsp;A simple class</a></li>
<li><a class="reference internal" href="#defining-methods" id="id67">8.2&nbsp;&nbsp;&nbsp;Defining methods</a></li>
<li><a class="reference internal" href="#the-constructor" id="id68">8.3&nbsp;&nbsp;&nbsp;The constructor</a></li>
<li><a class="reference internal" href="#member-instance-variables" id="id69">8.4&nbsp;&nbsp;&nbsp;Member/instance variables</a></li>
<li><a class="reference internal" href="#calling-methods" id="id70">8.5&nbsp;&nbsp;&nbsp;Calling methods</a></li>
<li><a class="reference internal" href="#adding-inheritance" id="id71">8.6&nbsp;&nbsp;&nbsp;Adding inheritance</a></li>
<li><a class="reference internal" href="#class-variables" id="id72">8.7&nbsp;&nbsp;&nbsp;Class variables</a></li>
<li><a class="reference internal" href="#class-methods-and-static-methods" id="id73">8.8&nbsp;&nbsp;&nbsp;Class methods and static methods</a></li>
<li><a class="reference internal" href="#properties" id="id74">8.9&nbsp;&nbsp;&nbsp;Properties</a></li>
<li><a class="reference internal" href="#interfaces" id="id75">8.10&nbsp;&nbsp;&nbsp;Interfaces</a></li>
<li><a class="reference internal" href="#new-style-classes" id="id76">8.11&nbsp;&nbsp;&nbsp;New-style classes</a></li>
<li><a class="reference internal" href="#docstrings-for-classes" id="id77">8.12&nbsp;&nbsp;&nbsp;Docstrings for classes</a></li>
<li><a class="reference internal" href="#private-members" id="id78">8.13&nbsp;&nbsp;&nbsp;Private members</a></li>
</ul>
</li>
<li><a class="reference internal" href="#special-tasks" id="id79">9&nbsp;&nbsp;&nbsp;Special Tasks</a><ul class="auto-toc">
<li><a class="reference internal" href="#debugging-tools" id="id80">9.1&nbsp;&nbsp;&nbsp;Debugging tools</a></li>
<li><a class="reference internal" href="#code-checkers-for-python" id="id81">9.2&nbsp;&nbsp;&nbsp;Code checkers for Python</a></li>
<li><a class="reference internal" href="#file-input-and-output" id="id82">9.3&nbsp;&nbsp;&nbsp;File input and output</a></li>
<li><a class="reference internal" href="#unit-tests" id="id83">9.4&nbsp;&nbsp;&nbsp;Unit tests</a><ul class="auto-toc">
<li><a class="reference internal" href="#a-simple-example" id="id84">9.4.1&nbsp;&nbsp;&nbsp;A simple example</a></li>
<li><a class="reference internal" href="#unit-test-suites" id="id85">9.4.2&nbsp;&nbsp;&nbsp;Unit test suites</a></li>
<li><a class="reference internal" href="#additional-unittest-features" id="id86">9.4.3&nbsp;&nbsp;&nbsp;Additional unittest features</a></li>
<li><a class="reference internal" href="#guidance-on-unit-testing" id="id87">9.4.4&nbsp;&nbsp;&nbsp;Guidance on Unit Testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#doctest" id="id88">9.5&nbsp;&nbsp;&nbsp;doctest</a></li>
<li><a class="reference internal" href="#the-python-database-api" id="id89">9.6&nbsp;&nbsp;&nbsp;The Python database API</a></li>
<li><a class="reference internal" href="#installing-python-packages" id="id90">9.7&nbsp;&nbsp;&nbsp;Installing Python packages</a></li>
</ul>
</li>
<li><a class="reference internal" href="#more-python-features-and-exercises" id="id91">10&nbsp;&nbsp;&nbsp;More Python Features and Exercises</a></li>
</ul>
</div>
<div class="section" id="introductions-etc">
<h1><a class="toc-backref" href="#id5">1&nbsp;&nbsp;&nbsp;Introductions Etc</a></h1>
<p>Introductions</p>
<p>Practical matters: restrooms, breakroom, lunch and break times, etc.</p>
<p>Starting the Python interactive interpreter.  Also, IPython and Idle.</p>
<p>Running scripts</p>
<p>Editors -- Choose an editor which you can configure so that it indents
with 4 spaces, not tab characters.  For a list of editors for Python,
see: <a class="reference external" href="http://wiki.python.org/moin/PythonEditors">http://wiki.python.org/moin/PythonEditors</a>.  A few possible
editors:</p>
<ul class="simple">
<li>SciTE -- <a class="reference external" href="http://www.scintilla.org/SciTE.html">http://www.scintilla.org/SciTE.html</a>.</li>
<li>MS Windows only -- (1) TextPad -- <a class="reference external" href="http://www.textpad.com">http://www.textpad.com</a>; (2)
UltraEdit -- <a class="reference external" href="http://www.ultraedit.com/">http://www.ultraedit.com/</a>.</li>
<li>Jed -- See <a class="reference external" href="http://www.jedsoft.org/jed/">http://www.jedsoft.org/jed/</a>.</li>
<li>Emacs -- See
<a class="reference external" href="http://www.gnu.org/software/emacs/">http://www.gnu.org/software/emacs/</a>
and
<a class="reference external" href="http://www.xemacs.org/faq/xemacs-faq.html">http://www.xemacs.org/faq/xemacs-faq.html</a>.</li>
<li>jEdit -- Requires a bit of customization for Python -- See
<a class="reference external" href="http://jedit.org">http://jedit.org</a>.</li>
<li>Vim -- <a class="reference external" href="http://www.vim.org/">http://www.vim.org/</a></li>
<li>Geany -- <a class="reference external" href="http://www.geany.org/">http://www.geany.org/</a></li>
<li>And many more.</li>
</ul>
<p>Interactive interpreters:</p>
<ul class="simple">
<li><tt class="docutils literal">python</tt></li>
<li><tt class="docutils literal">ipython</tt></li>
<li>Idle</li>
</ul>
<p>IDEs -- Also see
<a class="reference external" href="http://en.wikipedia.org/wiki/List_of_integrated_development_environments_for_Python">http://en.wikipedia.org/wiki/List_of_integrated_development_environments_for_Python</a>:</p>
<ul class="simple">
<li>PyWin -- MS Windows only.  Available at:
<a class="reference external" href="http://sourceforge.net/projects/pywin32/">http://sourceforge.net/projects/pywin32/</a>.</li>
<li>WingIDE -- See <a class="reference external" href="http://wingware.com/wingide/">http://wingware.com/wingide/</a>.</li>
<li>Eclipse -- <a class="reference external" href="http://eclipse.org/">http://eclipse.org/</a>.  There is a plug-in that supports
Python.</li>
<li>Kdevelop -- Linux/KDE -- See <a class="reference external" href="http://www.kdevelop.org/">http://www.kdevelop.org/</a>.</li>
<li>Eric -- Linux KDE? -- See
<a class="reference external" href="http://eric-ide.python-projects.org/index.html">http://eric-ide.python-projects.org/index.html</a></li>
<li>Some text editors will evaluate a Python buffer within the
editor.  Examples: Emacs, Vim, SciTE, Geany, etc.</li>
</ul>
<div class="section" id="resources">
<h2><a class="toc-backref" href="#id6">1.1&nbsp;&nbsp;&nbsp;Resources</a></h2>
<p>Where else to get help:</p>
<ul>
<li><p class="first">Python home page -- <a class="reference external" href="http://www.python.org">http://www.python.org</a></p>
</li>
<li><p class="first">Python standard documentation -- <a class="reference external" href="http://www.python.org/doc/">http://www.python.org/doc/</a>.</p>
<p>You will also find links to tutorials there.</p>
</li>
<li><p class="first">FAQs -- <a class="reference external" href="http://www.python.org/doc/faq/">http://www.python.org/doc/faq/</a>.</p>
</li>
<li><p class="first">The Python Wiki -- <a class="reference external" href="http://wiki.python.org/">http://wiki.python.org/</a></p>
</li>
<li><p class="first">The Python Package Index -- Lots of Python packages --
<a class="reference external" href="https://pypi.python.org/pypi">https://pypi.python.org/pypi</a></p>
</li>
<li><p class="first">Special interest groups (SIGs) -- <a class="reference external" href="http://www.python.org/sigs/">http://www.python.org/sigs/</a></p>
</li>
<li><p class="first">Other python related mailing lists and lists for specific
applications (for example, Zope, Twisted, etc).  Try:
<a class="reference external" href="http://dir.gmane.org/search.php?match=python">http://dir.gmane.org/search.php?match=python</a>.</p>
</li>
<li><p class="first"><a class="reference external" href="http://sourceforge.net">http://sourceforge.net</a> -- Lots of projects.  Search for &quot;python&quot;.</p>
</li>
<li><p class="first">USENET -- comp.lang.python.  Can also be accessed through Gmane:
<a class="reference external" href="http://dir.gmane.org/gmane.comp.python.general">http://dir.gmane.org/gmane.comp.python.general</a>.</p>
</li>
<li><p class="first">The Python tutor email list --
<a class="reference external" href="http://mail.python.org/mailman/listinfo/tutor">http://mail.python.org/mailman/listinfo/tutor</a></p>
</li>
</ul>
<p>Local documentation:</p>
<ul>
<li><p class="first">On MS Windows, the Python documentation is installed with the
standard installation.</p>
</li>
<li><p class="first">Install the standard Python documentation on your machine from
<a class="reference external" href="http://www.python.org/doc/">http://www.python.org/doc/</a>.</p>
</li>
<li><p class="first"><tt class="docutils literal">pydoc</tt>.  Example, on the command line, type: <tt class="docutils literal">pydoc re</tt>.</p>
</li>
<li><p class="first">Import a module, then view its <tt class="docutils literal">.__doc__</tt> attribute.</p>
</li>
<li><p class="first">At the interactive prompt, use <tt class="docutils literal">help(obj)</tt>.  You might need to
import it first.  Example:</p>
<pre class="literal-block">
&gt;&gt;&gt; import urllib
&gt;&gt;&gt; help(urllib)
</pre>
</li>
<li><p class="first">In IPython, the question mark operator gives help.  Example:</p>
<pre class="literal-block">
In [13]: open?
Type:           builtin_function_or_method
Base Class:     &lt;type 'builtin_function_or_method'&gt;
String Form:    &lt;built-in function open&gt;
Namespace:      Python builtin
Docstring:
    open(name[, mode[, buffering]]) -&gt; file object

    Open a file using the file() type, returns a file object.
Constructor Docstring:
    x.__init__(...) initializes x; see x.__class__.__doc__ for signature
Callable:       Yes
Call def:       Calling definition not available.Call docstring:
    x.__call__(...) &lt;==&gt; x(...)
</pre>
</li>
</ul>
</div>
<div class="section" id="a-general-description-of-python">
<h2><a class="toc-backref" href="#id7">1.2&nbsp;&nbsp;&nbsp;A general description of Python</a></h2>
<p>Python is a high-level general purpose programming language:</p>
<ul class="simple">
<li>Because code is automatically compiled to byte code and executed,
Python is suitable for use as a scripting language, Web application
implementation language, etc.</li>
<li>Because Python can be extended in C and C++, Python can provide the
speed needed for even compute intensive tasks.</li>
<li>Because of its strong structuring constructs (nested code blocks,
functions, classes, modules, and packages) and its consistent use of
objects and object-oriented programming, Python enables us to write
clear, logical applications for small and large tasks.</li>
</ul>
<p>Important features of Python:</p>
<ul class="simple">
<li>Built-in high level data types: strings, lists, dictionaries, etc.</li>
<li>The usual control structures: if, if-else, if-elif-else, while, plus
a powerful collection iterator (for).</li>
<li>Multiple levels of organizational structure: statements,
functions, classes, modules, and packages. These assist in
organizing code. An excellent and large example is the Python
standard library.</li>
<li>Compile on the fly to byte code -- Source code is compiled to byte
code without a separate compile step. Source code modules can also
be &quot;pre-compiled&quot; to byte code files.</li>
<li>Object-oriented -- Python provides a consistent way to use
objects: everything is an object.  And, in Python it is easy to
implement new object types (called classes in object-oriented
programming).</li>
<li>Extensions in C and C++ -- Extension modules and extension types can
be written by hand. There are also tools that help with this, for
example, SWIG, sip, Pyrex.</li>
<li>Jython is a version of Python that &quot;plays well with&quot; Java.  See:
<a class="reference external" href="http://www.jython.org/Project/">The Jython Project --
http://www.jython.org/Project/</a>.</li>
</ul>
<p>Some things you will need to know:</p>
<ul>
<li><p class="first">Python uses indentation to show block structure. Indent one level to
show the beginning of a block. Out-dent one level to show the end of
a block. As an example, the following C-style code:</p>
<pre class="literal-block">
if (x)
{
    if (y)
    {
        f1()
    }
    f2()
}
</pre>
<p>in Python would be:</p>
<pre class="literal-block">
if x:
    if y:
        f1()
    f2()
</pre>
</li>
</ul>
<p>And, the convention is to use four spaces (and no hard tabs) for
each level of indentation.  Actually, it's more than a convention;
it's practically a requirement.  Following that &quot;convention&quot; will
make it so much easier to merge your Python code with code from
other sources.</p>
<p>An overview of Python:</p>
<ul>
<li><p class="first">A scripting language -- Python is suitable (1) for embedding, (2)
for writing small unstructured scripts, (3) for &quot;quick and dirty&quot;
programs.</p>
</li>
<li><p class="first"><em>Not</em> a scripting language -- (1) Python scales.  (2) Python
encourages us to write code that is clear and well-structured.</p>
</li>
<li><p class="first">Interpreted, but also compiled to byte-code.  Modules are
automatically compiled (to .pyc) when imported, but may also be
explicitly compiled.</p>
</li>
<li><p class="first">Provides an interactive command line and interpreter shell.  In
fact, there are several.</p>
</li>
<li><p class="first">Dynamic -- For example:</p>
<ul class="simple">
<li>Types are bound to values, not to variables.</li>
<li>Function and method lookup is done at runtime.</li>
<li>Values are inspect-able.</li>
<li>There is an interactive interpreter, more than one, in fact.</li>
<li>You can list the methods supported by any given object.</li>
</ul>
</li>
<li><p class="first">Strongly typed at run-time, not compile-time.  Objects (values)
have a type, but variables do not.</p>
</li>
<li><p class="first">Reasonably high level -- High level built-in data types; high level
control structures (for walking lists and iterators, for example).</p>
</li>
<li><p class="first">Object-oriented -- Almost everything is an object.  Simple object
definition.  Data hiding by agreement.  Multiple inheritance.
Interfaces by convention. Polymorphism.</p>
</li>
<li><p class="first">Highly structured -- Statements, functions, classes, modules,
and packages enable us to write large, well-structured
applications.  Why structure?  Readability, locate-ability,
modifiability.</p>
</li>
<li><p class="first">Explicitness</p>
</li>
<li><p class="first">First-class objects:</p>
<ul class="simple">
<li>Definition: Can (1) pass to function; (2) return from function;
(3) stuff into a data structure.</li>
<li>Operators can be applied to <em>values</em> (not variables).  Example:
<tt class="docutils literal"><span class="pre">f(x)[3]</span></tt></li>
</ul>
</li>
<li><p class="first">Indented block structure -- &quot;Python is pseudo-code that runs.&quot;</p>
</li>
<li><p class="first">Embedding and extending Python -- Python provides a
well-documented and supported way (1) to embed the Python
interpreter in C/C++ applications and (2) to extend Python with
modules and objects implemented in C/C++.</p>
<ul class="simple">
<li>In some cases, SWIG can generate wrappers for existing C/C++
code automatically.  See <a class="reference external" href="http://www.swig.org/">http://www.swig.org/</a></li>
<li>Cython enables us to generate C code from Python <em>and</em> to
&quot;easily&quot; create wrappers for C/C++ functions.  See
<a class="reference external" href="http://www.cosc.canterbury.ac.nz/~greg/python/Pyrex/">http://www.cosc.canterbury.ac.nz/~greg/python/Pyrex/</a></li>
<li>To embed and extend Python with Java, there is Jython.  See
<a class="reference external" href="http://www.jython.org/">http://www.jython.org/</a></li>
</ul>
</li>
<li><p class="first">Automatic garbage collection. (But, there is a <tt class="docutils literal">gc</tt> module to
allow explicit control of garbage collection.)</p>
</li>
<li><p class="first">Comparison with other languages: compiled languages (e.g. C/C++);
Java; Perl, Tcl, and Ruby.  Python excells at: development speed,
execution speed, clarity and maintainability.</p>
</li>
<li><p class="first">Varieties of Python:</p>
<ul>
<li><p class="first">CPython -- Standard Python 2.x implemented in C.</p>
</li>
<li><p class="first">Jython -- Python for the Java environment --
<a class="reference external" href="http://www.jython.org/">http://www.jython.org/</a></p>
</li>
<li><p class="first">PyPy -- Python with a JIT compiler and stackless mode --
<a class="reference external" href="http://pypy.org/">http://pypy.org/</a></p>
</li>
<li><p class="first">Stackless -- Python with enhanced thread support and
microthreads etc. -- <a class="reference external" href="http://www.stackless.com/">http://www.stackless.com/</a></p>
</li>
<li><p class="first">IronPython -- Python for .NET and the CLR --
<a class="reference external" href="http://ironpython.net/">http://ironpython.net/</a></p>
</li>
<li><p class="first">Python 3 -- The new, new Python.  This is intended as a
replacement for Python 2.x. -- <a class="reference external" href="http://www.python.org/doc/">http://www.python.org/doc/</a>.
A few differences (from Python 2.x):</p>
<ul class="simple">
<li>The <tt class="docutils literal">print</tt> statement changed to the <tt class="docutils literal">print</tt> function.</li>
<li>Strings are unicode by default.</li>
<li>Classes are all &quot;new style&quot; classes.</li>
<li>Changes to syntax for catching exceptions.</li>
<li>Changes to integers -- no long integer; integer division with
automatic convert to float.</li>
<li>More pervasive use of iterables (rather than collections).</li>
<li>Etc.</li>
</ul>
<p>For a more information about differences between Python 2.x and
Python 3.x, see the description of the various fixes that can be
applied with the <tt class="docutils literal">2to3</tt> tool:
<a class="reference external" href="http://docs.python.org/3/library/2to3.html#fixers">http://docs.python.org/3/library/2to3.html#fixers</a></p>
<p>The migration tool, <tt class="docutils literal">2to3</tt>, eases the conversion of 2.x code
to 3.x.</p>
</li>
</ul>
</li>
<li><p class="first">Also see <a class="reference external" href="http://www.python.org/peps/pep-0020.html">The Zen of Python</a> --
<a class="reference external" href="http://www.python.org/peps/pep-0020.html">http://www.python.org/peps/pep-0020.html</a>.
Or, at the Python interactive prompt, type:</p>
<pre class="literal-block">
&gt;&gt;&gt; import this
</pre>
</li>
</ul>
</div>
<div class="section" id="interactive-python">
<h2><a class="toc-backref" href="#id8">1.3&nbsp;&nbsp;&nbsp;Interactive Python</a></h2>
<p>If you execute Python from the command line with no script (no
arguments), Python gives you an interactive prompt. This is an
excellent facility for learning Python and for trying small snippets
of code. Many of the examples that follow were developed using the
Python interactive prompt.</p>
<p>Start the Python interactive interpreter by typing <tt class="docutils literal">python</tt> with
no arguments at the command line.  For example:</p>
<pre class="literal-block">
$ python
Python 2.6.1 (r261:67515, Jan 11 2009, 15:19:23)
[GCC 4.3.2] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more
information.
&gt;&gt;&gt; print 'hello'
hello
&gt;&gt;&gt;
</pre>
<p>You may also want to consider using IDLE. IDLE is a graphical
integrated development environment for Python; it contains a Python
shell.  It is likely that Idle was installed for you when you
installed Python. You will find a script to start up IDLE in the
Tools/scripts directory of your Python distribution. IDLE requires
Tkinter.</p>
<p>In addition, there are tools that will give you a more powerful and
fancy Python interactive interpreter.  One example is IPython, which
is available at <a class="reference external" href="http://ipython.scipy.org/">http://ipython.scipy.org/</a>.</p>
</div>
</div>
<div class="section" id="lexical-matters">
<h1><a class="toc-backref" href="#id9">2&nbsp;&nbsp;&nbsp;Lexical matters</a></h1>
<div class="section" id="lines">
<h2><a class="toc-backref" href="#id10">2.1&nbsp;&nbsp;&nbsp;Lines</a></h2>
<ul class="simple">
<li>Python does what you want it to do <em>most</em> of the time so that you
only have to add extra characters <em>some</em> of the time.</li>
<li>Statement separator is a semi-colon, but is only needed when
there is more than one statement on a line.  And, writing more
than one statement on the same line is considered bad form.</li>
<li>Continuation lines -- A back-slash as last character of the line
makes the following line a continuation of the current line.  But,
note that an opening &quot;context&quot; (parenthesis, square bracket, or
curly bracket) makes the back-slash unnecessary.</li>
</ul>
</div>
<div class="section" id="comments">
<h2><a class="toc-backref" href="#id11">2.2&nbsp;&nbsp;&nbsp;Comments</a></h2>
<p>Everything after &quot;#&quot; on a line is ignored.  No block comments, but
docstrings are a comment in quotes at the beginning of a module,
class, method or function.  Also, editors with support for Python
often provide the ability to comment out selected blocks of code,
usually with &quot;##&quot;.</p>
</div>
<div class="section" id="names-and-tokens">
<h2><a class="toc-backref" href="#id12">2.3&nbsp;&nbsp;&nbsp;Names and tokens</a></h2>
<ul class="simple">
<li>Allowed characters: a-z A-Z 0-9 underscore, and must begin with a
letter or underscore.</li>
<li>Names and identifiers are case sensitive.</li>
<li>Identifiers can be of unlimited length.</li>
<li>Special names, customizing, etc. -- Usually begin and end in
double underscores.</li>
<li>Special name classes -- Single and double underscores.<ul>
<li>Single leading single underscore -- Suggests a &quot;private&quot; method
or variable name.  Not imported by &quot;from module import *&quot;.</li>
<li>Single trailing underscore -- Use it to avoid conflicts with
Python keywords.</li>
<li>Double leading underscores -- Used in a class definition to
cause name mangling (weak hiding).  But, not often used.</li>
</ul>
</li>
<li>Naming conventions -- Not rigid, but:<ul>
<li>Modules and packages -- all lower case.</li>
<li>Globals and constants -- Upper case.</li>
<li>Classes -- Bumpy caps with initial upper.</li>
<li>Methods and functions -- All lower case with words separated by
underscores.</li>
<li>Local variables -- Lower case (with underscore between words) or
bumpy caps with initial lower or your choice.</li>
<li>Good advice -- Follow the conventions used in the code on which
you are working.</li>
</ul>
</li>
<li>Names/variables in Python do not have a type.  Values have types.</li>
</ul>
</div>
<div class="section" id="blocks-and-indentation">
<h2><a class="toc-backref" href="#id13">2.4&nbsp;&nbsp;&nbsp;Blocks and indentation</a></h2>
<p>Python represents block structure and nested block structure with
indentation, not with begin and end brackets.</p>
<p>The empty block -- Use the <tt class="docutils literal">pass</tt> no-op statement.</p>
<p>Benefits of the use of indentation to indicate structure:</p>
<ul class="simple">
<li>Reduces the need for a coding standard.  Only need to specify that
indentation is 4 spaces and no hard tabs.</li>
<li>Reduces inconsistency.  Code from different sources follow the
same indentation style.  It has to.</li>
<li>Reduces work.  Only need to get the indentation correct, not
<em>both</em> indentation and brackets.</li>
<li>Reduces clutter.  Eliminates all the curly brackets.</li>
<li>If it looks correct, it is correct.  Indentation cannot fool
the reader.</li>
</ul>
<p>Editor considerations -- The standard is 4 spaces (no hard tabs) for
each indentation level.  You will need a text editor that helps you
respect that.</p>
</div>
<div class="section" id="docstrings">
<h2><a class="toc-backref" href="#id14">2.5&nbsp;&nbsp;&nbsp;Docstrings</a></h2>
<p>Doc strings are like comments, but they are carried with executing
code.  Docstrings can be viewed with several tools, e.g. <tt class="docutils literal">help()</tt>,
<tt class="docutils literal">obj.__doc__</tt>, and, in IPython, a question mark (<tt class="docutils literal">?</tt>) after a
name will produce help.</p>
<p>A docstring is written as a quoted string that is at the top of a
module or the first lines after the header line of a function or
class.</p>
<p>We can use triple-quoting to create docstrings that span multiple
lines.</p>
<p>There are also tools that extract and format docstrings, for example:</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.python.org/lib/module-pydoc.html">pydoc -- Documentation generator and online help system</a> --
<a class="reference external" href="http://docs.python.org/lib/module-pydoc.html">http://docs.python.org/lib/module-pydoc.html</a>.</li>
<li><cite>epydoc</cite>  -- Epydoc: Automatic API Documentation Generation for
Python -- <a class="reference external" href="http://epydoc.sourceforge.net/">http://epydoc.sourceforge.net/</a></li>
<li>Sphinx -- Can also extract documentation from Python docstrings.
See <a class="reference external" href="http://sphinx-doc.org/index.html">http://sphinx-doc.org/index.html</a>.</li>
</ul>
<p>See the following for suggestions and more information on doc
strings: <a class="reference external" href="http://www.python.org/dev/peps/pep-0257/">Docstring conventions --
http://www.python.org/dev/peps/pep-0257/</a>.</p>
</div>
<div class="section" id="program-structure">
<h2><a class="toc-backref" href="#id15">2.6&nbsp;&nbsp;&nbsp;Program structure</a></h2>
<ul class="simple">
<li>Execution -- def, class, etc are executable statements that add
something to the current name-space.  Modules can be both
executable and import-able.</li>
<li>Statements, data structures, functions, classes, modules,
packages.</li>
<li>Functions</li>
<li>Classes</li>
<li>Modules correspond to files with a &quot;*.py&quot; extension.  Packages
correspond to a directory (or folder) in the file system; a
package contains a file named &quot;__init__.py&quot;.  Both modules and
packages can be imported (see section <a class="reference internal" href="#import-statement">import statement</a>).</li>
<li>Packages -- A directory containing a file named &quot;__init__.py&quot;.
Can provide additional initialization when the package or a module
in it is loaded (imported).</li>
</ul>
</div>
<div class="section" id="operators">
<h2><a class="toc-backref" href="#id16">2.7&nbsp;&nbsp;&nbsp;Operators</a></h2>
<ul>
<li><p class="first">See: <a class="reference external" href="http://docs.python.org/ref/operators.html">http://docs.python.org/ref/operators.html</a>.  Python defines
the following operators:</p>
<pre class="literal-block">
+       -       *       **      /       //      %
&lt;&lt;      &gt;&gt;      &amp;       |       ^       ~
&lt;       &gt;       &lt;=      &gt;=      ==      !=      &lt;&gt;
</pre>
<p>The comparison operators <tt class="docutils literal">&lt;&gt;</tt> and <tt class="docutils literal">!=</tt> are alternate spellings of
the same operator. <tt class="docutils literal">!=</tt> is the preferred spelling; <tt class="docutils literal">&lt;&gt;</tt> is
obsolescent.</p>
</li>
<li><p class="first">Logical operators:</p>
<pre class="literal-block">
and     or      is      not     in
</pre>
</li>
<li><p class="first">There are also (1) the dot operator, (2) the subscript
operator <tt class="docutils literal">[]</tt>, and the function/method call operator <tt class="docutils literal">()</tt>.</p>
</li>
<li><p class="first">For information on the precedences of operators, see the table at
<a class="reference external" href="http://docs.python.org/2/reference/expressions.html#operator-precedence">http://docs.python.org/2/reference/expressions.html#operator-precedence</a>,
which is reproduced below.</p>
</li>
<li><p class="first">For information on what the different operators <em>do</em>, the section
in the &quot;Python Language Reference&quot; titled &quot;Special method
names&quot; may be of help:
<a class="reference external" href="http://docs.python.org/2/reference/datamodel.html#special-method-names">http://docs.python.org/2/reference/datamodel.html#special-method-names</a></p>
<p>The following table summarizes the operator precedences in Python,
from lowest precedence (least binding) to highest precedence (most
binding). Operators on the same line have the same
precedence. Unless the syntax is explicitly given, operators are
binary. Operators on the same line group left to right (except for
comparisons, including tests, which all have the same precedence
and chain from left to right -- see <a class="reference external" href="http://docs.python.org/ref/comparisons.html#comparisons">section 5.9</a>
-- and
exponentiation, which groups from right to left):</p>
<pre class="literal-block">
Operator                  Description
========================  ==================
lambda                    Lambda expression
or                        Boolean OR
and                       Boolean AND
not x                     Boolean NOT
in, not in                Membership tests
is, is not                Identity tests
&lt;, &lt;=, &gt;, &gt;=, &lt;&gt;, !=, ==  Comparisons
|                         Bitwise OR
^                         Bitwise XOR
&amp;                         Bitwise AND
&lt;&lt;, &gt;&gt;                    Shifts
+, -                      Addition and subtraction
*, /, %                   Multiplication, division, remainder
+x, -x                    Positive, negative
~x                        Bitwise not
**                        Exponentiation
x.attribute               Attribute reference
x[index]                  Subscription
x[index:index]            Slicing
f(arguments...)           Function call
(expressions...)          Binding or tuple display
[expressions...]          List display
{key:datum...}            Dictionary display
`expressions...`          String conversion
</pre>
</li>
<li><p class="first">Note that most operators result in calls to methods with special
names, for example <tt class="docutils literal">__add__</tt>, <tt class="docutils literal">__sub__</tt>, <tt class="docutils literal">__mul__</tt>, etc.
See <a class="reference external" href="http://docs.python.org/2/reference/datamodel.html#special-method-names">Special method names
http://docs.python.org/2/reference/datamodel.html#special-method-names</a></p>
<p>Later, we will see how these operators can be emulated in classes
that you define yourself, through the use of these special names.</p>
</li>
</ul>
</div>
<div class="section" id="also-see">
<h2><a class="toc-backref" href="#id17">2.8&nbsp;&nbsp;&nbsp;Also see</a></h2>
<p>For more on lexical matters and Python styles, see:</p>
<ul class="simple">
<li><a class="reference external" href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html">Code Like a Pythonista: Idiomatic Python</a> --
<a class="reference external" href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html">http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html</a>.</li>
<li><a class="reference external" href="http://www.python.org/dev/peps/pep-0008/">Style Guide for Python Code --
http://www.python.org/dev/peps/pep-0008/</a></li>
<li>The flake8 style checking program.  See
<a class="reference external" href="https://pypi.python.org/pypi/flake8">https://pypi.python.org/pypi/flake8</a>.  Also see the pylint code
checker: <a class="reference external" href="https://pypi.python.org/pypi/pylint">https://pypi.python.org/pypi/pylint</a>.</li>
</ul>
</div>
<div class="section" id="code-evaluation">
<h2><a class="toc-backref" href="#id18">2.9&nbsp;&nbsp;&nbsp;Code evaluation</a></h2>
<p>Understanding the Python execution model -- How Python evaluates and
executes your code.</p>
<p>Evaluating expressions.</p>
<p>Creating names/variables -- Binding -- The following all create names
(variables) and bind values (objects) to them: (1) assignment, (2)
function definition, (3) class definition, (4) function and method
call, (5) importing a module, ...</p>
<p>First class objects -- Almost all objects in Python are first class.
Definition: An object is first class if: (1) we can put it in a
structured object; (2) we can pass it to a function; (3) we can return
it from a function.</p>
<p>References -- Objects (or references to them) can be shared.
What does this mean?</p>
<ul class="simple">
<li>The object(s) satisfy the identity test operator <tt class="docutils literal">is</tt>.</li>
<li>The built-in function <tt class="docutils literal">id()</tt> returns the same value.</li>
<li>The consequences for mutable objects are different from those for
immutable objects.</li>
<li>Changing (updating) a mutable object referenced through one variable
or container also changes that object referenced through other
variables or containers, because <em>it is the same object</em>.</li>
<li><tt class="docutils literal">del()</tt> -- The built-in function <tt class="docutils literal">del()</tt> removes a reference,
not (necessarily) the object itself.</li>
</ul>
</div>
</div>
<div class="section" id="statements-and-inspection-preliminaries">
<h1><a class="toc-backref" href="#id19">3&nbsp;&nbsp;&nbsp;Statements and inspection -- preliminaries</a></h1>
<p><tt class="docutils literal">print</tt> -- Example:</p>
<pre class="literal-block">
print obj
print &quot;one&quot;, &quot;two&quot;, 'three'
</pre>
<p><tt class="docutils literal">for:</tt> -- Example:</p>
<pre class="literal-block">
stuff = ['aa', 'bb', 'cc']
for item in stuff:
    print item
</pre>
<p>Learn what the <em>type</em> of an object is -- Example:</p>
<pre class="literal-block">
type(obj)
</pre>
<p>Learn what attributes an object has and what it's capabilities are
-- Example:</p>
<pre class="literal-block">
dir(obj)
value = &quot;a message&quot;
dir(value)
</pre>
<p>Get help on a class or an object -- Example:</p>
<pre class="literal-block">
help(str)
help(&quot;&quot;)
value = &quot;abc&quot;
help(value)
help(value.upper)
</pre>
<p>In IPython (but not standard Python), you can also get help at the
interactive prompt by typing &quot;?&quot; and &quot;??&quot; after an object.
Example:</p>
<pre class="literal-block">
In [48]: a = ''
In [49]: a.upper?
Type:       builtin_function_or_method
String Form:&lt;built-in method upper of str object at 0x7f1c426e0508&gt;
Docstring:
S.upper() -&gt; string

Return a copy of the string S converted to uppercase.
</pre>
</div>
<div class="section" id="built-in-data-types">
<h1><a class="toc-backref" href="#id20">4&nbsp;&nbsp;&nbsp;Built-in data-types</a></h1>
<p>For information on built-in data types, see section
<a class="reference external" href="http://docs.python.org/lib/types.html">Built-in Types --
http://docs.python.org/lib/types.html</a>
in the Python standard documentation.</p>
<div class="section" id="numeric-types">
<h2><a class="toc-backref" href="#id21">4.1&nbsp;&nbsp;&nbsp;Numeric types</a></h2>
<p>The numeric types are:</p>
<ul class="simple">
<li>Plain integers -- Same precision as a C long, usually a 32-bit
binary number.</li>
<li>Long integers -- Define with <tt class="docutils literal">100L</tt>.  But, plain integers are
automatically promoted when needed.</li>
<li>Floats -- Implemented as a C double.  Precision depends on your
machine.  See <tt class="docutils literal">sys.float_info</tt>.</li>
<li>Complex numbers -- Define with, for example, <tt class="docutils literal">3j</tt> or
<tt class="docutils literal">complex(3.0, 2.0)</tt>.</li>
</ul>
<p>See <a class="reference external" href="http://docs.python.org/lib/typesnumeric.html">2.3.4 Numeric Types -- int, float, long, complex</a> --
<a class="reference external" href="http://docs.python.org/lib/typesnumeric.html">http://docs.python.org/lib/typesnumeric.html</a>.</p>
<p>Python does mixed arithmetic.</p>
<p>Integer division truncates.  This is changed in Python 3.  Use
<tt class="docutils literal">float(n)</tt> to force coercion to a float.  Example:</p>
<pre class="literal-block">
In [8]: a = 4
In [9]: b = 5
In [10]: a / b
Out[10]: 0               # possibly wrong?
In [11]: float(a) / b
Out[11]: 0.8
</pre>
<p>Applying the function call operator (parentheses) to a type or class
creates an instance of that type or class.</p>
<p>There is also a <tt class="docutils literal">math</tt> module.  See:
<a class="reference external" href="http://docs.python.org/2/library/math.html#module-math">http://docs.python.org/2/library/math.html#module-math</a>
Example:</p>
<pre class="literal-block">
In [8]: import math
In [9]: math.fabs(-12.345)
Out[9]: 12.345
</pre>
<p>Scientific and heavily numeric programming -- High level Python is
not very efficient for numerical programming.  But, there are
libraries that help -- Numpy and SciPy -- See: <a class="reference external" href="http://scipy.org/">SciPy: Scientific
Tools for Python -- http://scipy.org/</a></p>
</div>
<div class="section" id="tuples-and-lists">
<h2><a class="toc-backref" href="#id22">4.2&nbsp;&nbsp;&nbsp;Tuples and lists</a></h2>
<p>List -- A list is a dynamic array/sequence.  It is ordered and
indexable.  A list is mutable.</p>
<p>List constructors: <tt class="docutils literal">[]</tt>, <tt class="docutils literal">list()</tt>.</p>
<p><tt class="docutils literal">range()</tt> and <tt class="docutils literal">xrange()</tt>:</p>
<ul class="simple">
<li><tt class="docutils literal">range(n)</tt> creates a list of n integers.  Optional arguments are
the starting integer and a stride.</li>
<li><tt class="docutils literal">xrange</tt> is like <tt class="docutils literal">range</tt>, except that it creates an iterator
that produces the items in the list of integers instead of the
list itself.</li>
</ul>
<p>Tuples -- A tuple is a sequence.  A tuple is immutable.</p>
<p>Tuple constructors: <tt class="docutils literal">()</tt>, but really a comma; also <tt class="docutils literal">tuple()</tt>.</p>
<p>Tuples are like lists, but are not mutable.</p>
<p>Python lists are (1) heterogeneous (2) indexable, and (3) dynamic.
For example,  we can add to a list and make it longer.</p>
<p>Notes on sequence constructors:</p>
<ul class="simple">
<li>To construct a tuple with a single element, use <tt class="docutils literal">(x,)</tt>; a
tuple with a single element requires a comma.</li>
<li>You can spread elements across multiple lines (and no need for
backslash continuation character &quot;\&quot;).</li>
<li>A comma can follow the last element.</li>
</ul>
<p>The length of a tuple or list (or other container): <tt class="docutils literal">len(mylist)</tt>.</p>
<p>Operators for lists:</p>
<ul>
<li><p class="first">Try: <tt class="docutils literal">list1 + list2</tt>, <tt class="docutils literal">list1 * n</tt>, <tt class="docutils literal">list1 += list2</tt>, etc.</p>
</li>
<li><p class="first">Comparison operators: <tt class="docutils literal">&lt;</tt>, <tt class="docutils literal">==</tt>, <tt class="docutils literal">&gt;=</tt>, etc.</p>
</li>
<li><p class="first">Test for membership with the <tt class="docutils literal">in</tt> operator.  Example:</p>
<pre class="literal-block">
In [77]: a = [11, 22, 33]
In [78]: a
Out[78]: [11, 22, 33]
In [79]: 22 in a
Out[79]: True
In [80]: 44 in a
Out[80]: False
</pre>
</li>
</ul>
<p>Subscription:</p>
<ul class="simple">
<li>Indexing into a sequence</li>
<li>Negative indexes -- Effectively, length of sequence plus (minus) index.</li>
<li>Slicing -- Example: <tt class="docutils literal">data[2:5]</tt>.  Default values: beginning and
end of list.</li>
<li>Slicing with strides -- Example: <tt class="docutils literal"><span class="pre">data[::2]</span></tt>.</li>
</ul>
<p>Operations on tuples -- No operations that change the tuple, since
tuples are immutable.  We can do iteration and subscription.  We can
do &quot;contains&quot; (the <tt class="docutils literal">in</tt> operator) and get the length (the <tt class="docutils literal">len()</tt>
operator).  We can use certain boolean operators.</p>
<p>Operations on lists -- Operations similar to tuples plus:</p>
<ul class="simple">
<li>Append -- <tt class="docutils literal">mylist.append(newitem)</tt>.</li>
<li>Insert -- <tt class="docutils literal">mylist.insert(index, newitem)</tt>.  Note on efficiency:
The <tt class="docutils literal">insert</tt> method is not as fast as the <tt class="docutils literal">append</tt> method.  If
you find that you need to do a large number of <tt class="docutils literal">mylist.insert(0,
obj)</tt> (that is, inserting at the beginning of the list) consider
using a deque instead.  See:
<a class="reference external" href="http://docs.python.org/2/library/collections.html#collections.deque">http://docs.python.org/2/library/collections.html#collections.deque</a>.
Or, use <tt class="docutils literal">append</tt> and <tt class="docutils literal">reverse</tt>.</li>
<li>Extend -- <tt class="docutils literal">mylist.extend(anotherlist)</tt>.  Also can use <tt class="docutils literal">+</tt> and
<tt class="docutils literal">+=</tt>.</li>
<li>Remove -- <tt class="docutils literal">mylist.remove(item)</tt> and <tt class="docutils literal">mylist.pop()</tt>.  Note
that <tt class="docutils literal">append()</tt> together with <tt class="docutils literal">pop()</tt> implements a stack.</li>
<li>Delete -- <tt class="docutils literal">del mylist[index]</tt>.</li>
<li>Pop -- Get last (right-most) item and remove from list --
<tt class="docutils literal">mylist.pop()</tt>.</li>
</ul>
<p>List operators -- <tt class="docutils literal">+</tt>, <tt class="docutils literal">*</tt>, etc.</p>
<p>For more operations and operators on sequences, see:
<a class="reference external" href="http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange">http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange</a>.</p>
<p>Exercises:</p>
<ul>
<li><p class="first">Create an empty list.  Append 4 strings to the list.  Then pop
one item off the end of the list.  Solution:</p>
<pre class="literal-block">
In [25]: a = []
In [26]: a.append('aaa')
In [27]: a.append('bbb')
In [28]: a.append('ccc')
In [29]: a.append('ddd')
In [30]: print a
['aaa', 'bbb', 'ccc', 'ddd']
In [31]: a.pop()
Out[31]: 'ddd'
</pre>
</li>
<li><p class="first">Use the <tt class="docutils literal">for</tt> statement to print the items in the list.
Solution:</p>
<pre class="literal-block">
In [32]: for item in a:
   ....:         print item
   ....:
aaa
bbb
ccc
</pre>
</li>
<li><p class="first">Use the string <tt class="docutils literal">join</tt> operation to concatenate the items in
the list.  Solution:</p>
<pre class="literal-block">
In [33]: '||'.join(a)
Out[33]: 'aaa||bbb||ccc'
</pre>
</li>
<li><p class="first">Use lists containing three (3) elements to create and show a tree:</p>
<pre class="literal-block">
In [37]: b = ['bb', None, None]
In [38]: c = ['cc', None, None]
In [39]: root = ['aa', b, c]
In [40]:
In [40]:
In [40]: def show_tree(t):
   ....:     if not t:
   ....:         return
   ....:     print t[0]
   ....:     show_tree(t[1])
   ....:     show_tree(t[2])
   ....:
   ....:
In [41]: show_tree(root)
aa
bb
cc
</pre>
<p>Note that we will learn a better way to represent tree
structures when we cover implementing classes in Python.</p>
</li>
</ul>
</div>
<div class="section" id="strings">
<h2><a class="toc-backref" href="#id23">4.3&nbsp;&nbsp;&nbsp;Strings</a></h2>
<p>Strings are sequences.  They are immutable.  They are indexable.
They are iterable.</p>
<p>For operations on strings, see
<a class="reference external" href="http://docs.python.org/lib/string-methods.html">http://docs.python.org/lib/string-methods.html</a> or use:</p>
<pre class="literal-block">
&gt;&gt;&gt; help(str)
</pre>
<p>Or:</p>
<pre class="literal-block">
&gt;&gt;&gt; dir(&quot;abc&quot;)
</pre>
<p>String operations (methods).</p>
<p>String operators, e.g. <tt class="docutils literal">+</tt>, <tt class="docutils literal">&lt;</tt>, <tt class="docutils literal">&lt;=</tt>, <tt class="docutils literal">==</tt>, etc..</p>
<p>Constructors/literals:</p>
<ul class="simple">
<li>Quotes:  single and double.  Escaping quotes and other special
characters with a back-slash.</li>
<li>Triple quoting -- Use triple single quotes or double quotes to
define multi-line strings.</li>
<li><tt class="docutils literal">str()</tt> -- The constructor and the name of the type/class.</li>
<li><tt class="docutils literal"><span class="pre">'aSeparator'.join(aList)</span></tt></li>
<li>Many more.</li>
</ul>
<p>Escape characters in strings -- <tt class="docutils literal">\t</tt>, <tt class="docutils literal">\n</tt>, <tt class="docutils literal">\\</tt>, etc.</p>
<p>String formatting -- See:
<a class="reference external" href="http://docs.python.org/2/library/stdtypes.html#string-formatting-operations">http://docs.python.org/2/library/stdtypes.html#string-formatting-operations</a></p>
<p>Examples:</p>
<pre class="literal-block">
In [18]: name = 'dave'
In [19]: size = 25
In [20]: factor = 3.45
In [21]: print 'Name: %s  Size: %d  Factor: %3.4f' % (name, size, factor, )
Name: dave  Size: 25  Factor: 3.4500
In [25]: print 'Name: %s  Size: %d  Factor: %08.4f' % (name, size, factor, )
Name: dave  Size: 25  Factor: 003.4500
</pre>
<p>If the right-hand argument to the formatting operator is a
dictionary, then you can (actually, must) use the names of keys in
the dictionary in your format strings.  Examples:</p>
<pre class="literal-block">
In [115]: values = {'vegetable': 'chard', 'fruit': 'nectarine'}
In [116]: 'I love %(vegetable)s and I love %(fruit)s.' % values
Out[116]: 'I love chard and I love nectarine.'
</pre>
<p>Also consider using the right justify and left justify operations.
Examples: <tt class="docutils literal">mystring.rjust(20)</tt>, <tt class="docutils literal">mystring.ljust(20, <span class="pre">':')</span></tt>.</p>
<p>In Python 3, the <tt class="docutils literal">str.format</tt> method is preferred to the string
formatting operator.  This method is also available in Python 2.7.
It has benefits and advantages over the string formatting operator.
You can start learning about it here:
<a class="reference external" href="http://docs.python.org/2/library/stdtypes.html#string-methods">http://docs.python.org/2/library/stdtypes.html#string-methods</a></p>
<p>Exercises:</p>
<ul>
<li><p class="first">Use a literal to create a string containing (1) a single quote,
(2) a double quote, (3) both a single and double quote.
Solutions:</p>
<pre class="literal-block">
&quot;Some 'quoted' text.&quot;
'Some &quot;quoted&quot; text.'
'Some &quot;quoted&quot; \'extra\' text.'
</pre>
</li>
<li><p class="first">Write a string literal that spans multiple lines.  Solution:</p>
<pre class="literal-block">
&quot;&quot;&quot;This string
spans several lines
because it is a little long.
&quot;&quot;&quot;
</pre>
</li>
<li><p class="first">Use the string <tt class="docutils literal">join</tt> operation to create a string that
contains a colon as a separator.  Solution:</p>
<pre class="literal-block">
&gt;&gt;&gt; content = []
&gt;&gt;&gt; content.append('finch')
&gt;&gt;&gt; content.append('sparrow')
&gt;&gt;&gt; content.append('thrush')
&gt;&gt;&gt; content.append('jay')
&gt;&gt;&gt; contentstr = ':'.join(content)
&gt;&gt;&gt; print contentstr
finch:sparrow:thrush:jay
</pre>
</li>
<li><p class="first">Use string formatting to produce a string containing your last
and first names, separated by a comma.  Solution:</p>
<pre class="literal-block">
&gt;&gt;&gt; first = 'Dave'
&gt;&gt;&gt; last = 'Kuhlman'
&gt;&gt;&gt; full = '%s, %s' % (last, first, )
&gt;&gt;&gt; print full
Kuhlman, Dave
</pre>
</li>
</ul>
<p>Incrementally building up large strings from lots of small strings
-- <strong>the old way</strong> -- Since strings in Python are immutable,
appending to a string requires a re-allocation.  So, it is faster to
append to a list, then use <tt class="docutils literal">join</tt>.  Example:</p>
<pre class="literal-block">
In [25]: strlist = []
In [26]: strlist.append('Line #1')
In [27]: strlist.append('Line #2')
In [28]: strlist.append('Line #3')
In [29]: str = '\n'.join(strlist)
In [30]: print str
Line #1
Line #2
Line #3
</pre>
<p>Incrementally building up large strings from lots of small strings
-- <strong>the new way</strong> -- The <tt class="docutils literal">+=</tt> operation on strings has been
optimized.  So, when you do this <tt class="docutils literal">str1 += str2</tt>, even many times,
it is efficient.</p>
<p>The <tt class="docutils literal">translate</tt> method enables us to map the characters in a
string, replacing those in one table by those in another.  And, the
<tt class="docutils literal">maketrans</tt> function in the <tt class="docutils literal">string</tt> module, makes it easy to
create the mapping table:</p>
<pre class="literal-block">
import string

def test():
    a = 'axbycz'
    t = string.maketrans('abc', '123')
    print a
    print a.translate(t)

test()
</pre>
<div class="section" id="the-new-string-format-method">
<h3><a class="toc-backref" href="#id24">4.3.1&nbsp;&nbsp;&nbsp;The new string.format method</a></h3>
<p>The new way to do string formatting (which is standard in Python 3
and <em>perhaps</em> preferred for new code in Python 2) is to use the
<tt class="docutils literal">string.format</tt> method.  See here:</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.python.org/2/library/stdtypes.html#str.format">http://docs.python.org/2/library/stdtypes.html#str.format</a></li>
<li><a class="reference external" href="http://docs.python.org/2/library/string.html#format-string-syntax">http://docs.python.org/2/library/string.html#format-string-syntax</a></li>
<li><a class="reference external" href="http://docs.python.org/2/library/string.html#format-specification-mini-language">http://docs.python.org/2/library/string.html#format-specification-mini-language</a></li>
</ul>
<p>Some examples:</p>
<pre class="literal-block">
In [1]: 'aaa {1} bbb {0} ccc {1} ddd'.format('xx', 'yy', )
Out[1]: 'aaa yy bbb xx ccc yy ddd'
In [2]: 'number: {0:05d} ok'.format(25)
Out[2]: 'number: 00025 ok'
In [4]: 'n1: {num1}  n2: {num2}'.format(num2=25, num1=100)
Out[4]: 'n1: 100  n2: 25'
In [5]: 'n1: {num1}  n2: {num2}  again: {num1}'.format(num2=25, num1=100)
Out[5]: 'n1: 100  n2: 25  again: 100'
In [6]: 'number: {:05d} ok'.format(25)
Out[6]: 'number: 00025 ok'
In [7]: values = {'name': 'dave', 'hobby': 'birding'}
In [8]: 'user: {name}  activity: {hobby}'.format(**values)
Out[8]: 'user: dave  activity: birding'
</pre>
</div>
<div class="section" id="unicode-strings">
<h3><a class="toc-backref" href="#id25">4.3.2&nbsp;&nbsp;&nbsp;Unicode strings</a></h3>
<p>Representing unicode:</p>
<pre class="literal-block">
In [96]: a = u'abcd'
In [97]: a
Out[97]: u'abcd'
In [98]: b = unicode('efgh')
In [99]: b
Out[99]: u'efgh'
</pre>
<p>Convert to unicode: <tt class="docutils literal">a_string.decode(encoding)</tt>.  Examples:</p>
<pre class="literal-block">
In [102]: 'abcd'.decode('utf-8')
Out[102]: u'abcd'
In [103]:
In [104]: 'abcd'.decode(sys.getdefaultencoding())
Out[104]: u'abcd'
</pre>
<p>Convert out of unicode:  <tt class="docutils literal">a_unicode_string.encode(encoding)</tt>.
Examples:</p>
<pre class="literal-block">
In [107]: a = u'abcd'
In [108]: a.encode('utf-8')
Out[108]: 'abcd'
In [109]: a.encode(sys.getdefaultencoding())
Out[109]: 'abcd'
In [110]: b = u'Sel\xe7uk'
In [111]: print b.encode('utf-8')
Selçuk
</pre>
<p>Test for unicode type -- Example:</p>
<pre class="literal-block">
In [122]: import types
In [123]: a = u'abcd'
In [124]: type(a) is types.UnicodeType
Out[124]: True
In [125]:
In [126]: type(a) is type(u'')
Out[126]: True
</pre>
<p>Or better:</p>
<pre class="literal-block">
In [127]: isinstance(a, unicode)
Out[127]: True
</pre>
<p>An example with a character &quot;c&quot; with a hachek:</p>
<pre class="literal-block">
In [135]: name = 'Ivan Krsti\xc4\x87'
In [136]: name.decode('utf-8')
Out[136]: u'Ivan Krsti\u0107'
In [137]:
In [138]: len(name)
Out[138]: 12
In [139]: len(name.decode('utf-8'))
Out[139]: 11
</pre>
<p>You can also create a unicode character by using the <tt class="docutils literal">unichr()</tt>
built-in function:</p>
<pre class="literal-block">
In [2]: a = 'aa' + unichr(170) + 'bb'
In [3]: a
Out[3]: u'aa\xaabb'
In [6]: b = a.encode('utf-8')
In [7]: b
Out[7]: 'aa\xc2\xaabb'
In [8]: print b
aaªbb
</pre>
<p>Guidance for use of encodings and unicode -- If you are working with
a multibyte character set:</p>
<ol class="arabic simple">
<li>Convert/decode from an external encoding to unicode <em>early</em>
(<tt class="docutils literal">my_string.decode(encoding)</tt>).</li>
<li>Do your work in unicode.</li>
<li>Convert/encode to an external encoding <em>late</em>
(<tt class="docutils literal">my_string.encode(encoding)</tt>).</li>
</ol>
<p>For more information, see:</p>
<ul class="simple">
<li><a class="reference external" href="http://farmdev.com/talks/unicode/">Unicode In Python, Completely Demystified --
http://farmdev.com/talks/unicode/</a></li>
<li><a class="reference external" href="http://www.python.org/dev/peps/pep-0100/">PEP 100: Python Unicode Integration --
http://www.python.org/dev/peps/pep-0100/</a></li>
<li>In the Python standard library:<ul>
<li><a class="reference external" href="http://docs.python.org/2/library/codecs.html#module-codecs">codecs -- Codec registry and base classes --
http://docs.python.org/2/library/codecs.html#module-codecs</a></li>
<li><a class="reference external" href="http://docs.python.org/2/library/codecs.html#standard-encodings">Standard Encodings --
http://docs.python.org/2/library/codecs.html#standard-encodings</a></li>
</ul>
</li>
</ul>
<p>If you are reading and writing multibyte character data from or to a
<em>file</em>, then look at the <tt class="docutils literal">codecs.open()</tt> in the <a class="reference external" href="http://docs.python.org/2/library/codecs.html#codecs.open">codecs module
-- http://docs.python.org/2/library/codecs.html#codecs.open</a>.</p>
<p>Handling multi-byte character sets in Python 3 is easier, I think,
but different.  One hint is to use the <tt class="docutils literal">encoding</tt> keyword
parameter to the <tt class="docutils literal">open</tt> built-in function.  Here is an example:</p>
<pre class="literal-block">
def test():
    infile = open('infile1.txt', 'r', encoding='utf-8')
    outfile = open('outfile1.txt', 'w', encoding='utf-8')
    for line in infile:
        line = line.upper()
        outfile.write(line)
    infile.close()
    outfile.close()

test()
</pre>
</div>
</div>
<div class="section" id="dictionaries">
<h2><a class="toc-backref" href="#id26">4.4&nbsp;&nbsp;&nbsp;Dictionaries</a></h2>
<p>A dictionary is a collection, whose values are accessible by key.  It
is a collection of name-value pairs.</p>
<p>The order of elements in a dictionary is undefined.  But, we can
iterate over (1) the keys, (2) the values, and (3) the items
(key-value pairs) in a dictionary.  We can set the value of a key and
we can get the value associated with a key.</p>
<p>Keys must be immutable objects: ints, strings, tuples, ...</p>
<p>Literals for constructing dictionaries:</p>
<pre class="literal-block">
d1 = {}
d2 = {key1: value1, key2: value2, }
</pre>
<p>Constructor for dictionaries -- <tt class="docutils literal">dict()</tt> can be used to create
instances of the class <tt class="docutils literal">dict</tt>.  Some examples:</p>
<pre class="literal-block">
dict({'one': 2, 'two': 3})
dict({'one': 2, 'two': 3}.items())
dict({'one': 2, 'two': 3}.iteritems())
dict(zip(('one', 'two'), (2, 3)))
dict([['two', 3], ['one', 2]])
dict([('two', 3), ('one', 2)])
dict(one=2, two=3)
dict([(['one', 'two'][i-2], i) for i in (2, 3)])
</pre>
<p>For operations on dictionaries, see
<a class="reference external" href="http://docs.python.org/lib/typesmapping.html">http://docs.python.org/lib/typesmapping.html</a> or use:</p>
<pre class="literal-block">
&gt;&gt;&gt; help({})
</pre>
<p>Or:</p>
<pre class="literal-block">
&gt;&gt;&gt; dir({})
</pre>
<p>Indexing -- Access or add items to a dictionary with the indexing
operator <tt class="docutils literal">[ ]</tt>.  Example:</p>
<pre class="literal-block">
In [102]: dict1 = {}
In [103]: dict1['name'] = 'dave'
In [104]: dict1['category'] = 38
In [105]: dict1
Out[105]: {'category': 38, 'name': 'dave'}
</pre>
<p>Some of the operations produce the keys, the values, and the items
(pairs) in a dictionary.  Examples:</p>
<pre class="literal-block">
In [43]: d = {'aa': 111, 'bb': 222}
In [44]: d.keys()
Out[44]: ['aa', 'bb']
In [45]: d.values()
Out[45]: [111, 222]
In [46]: d.items()
Out[46]: [('aa', 111), ('bb', 222)]
</pre>
<p>When iterating over large dictionaries, use methods <tt class="docutils literal">iterkeys()</tt>,
<tt class="docutils literal">itervalues()</tt>, and <tt class="docutils literal">iteritems()</tt>.  Example:</p>
<pre class="literal-block">
In [47]:
In [47]: d = {'aa': 111, 'bb': 222}
In [48]: for key in d.iterkeys():
   ....:     print key
   ....:
   ....:
aa
bb
</pre>
<p>To test for the existence of a key in a dictionary, use the <tt class="docutils literal">in</tt>
operator or the <tt class="docutils literal">mydict.has_key(k)</tt> method.  The <tt class="docutils literal">in</tt> operator
is preferred.  Example:</p>
<pre class="literal-block">
&gt;&gt;&gt; d = {'tomato': 101, 'cucumber': 102}
&gt;&gt;&gt; k = 'tomato'
&gt;&gt;&gt; k in d
True
&gt;&gt;&gt; d.has_key(k)
True
</pre>
<p>You can often avoid the need for a test by using method <tt class="docutils literal">get</tt>.
Example:</p>
<pre class="literal-block">
&gt;&gt;&gt; d = {'tomato': 101, 'cucumber': 102}
&gt;&gt;&gt; d.get('tomato', -1)
101
&gt;&gt;&gt; d.get('chard', -1)
-1
&gt;&gt;&gt; if d.get('eggplant') is None:
...     print 'missing'
...
missing
</pre>
<p>Dictionary &quot;view&quot; objects provide dynamic (automatically updated)
views of the keys or the values or the items in a dictionary.  View
objects also support set operations.  Create views with
<tt class="docutils literal">mydict.viewkeys()</tt>, <tt class="docutils literal">mydict.viewvalues()</tt>, and
<tt class="docutils literal">mydict.viewitems()</tt>.  See:
<a class="reference external" href="http://docs.python.org/2/library/stdtypes.html#dictionary-view-objects">http://docs.python.org/2/library/stdtypes.html#dictionary-view-objects</a>.</p>
<p>The dictionary <tt class="docutils literal">setdefault</tt> method provides a way to get the value
associated with a key from a dictionary and to set that value if the
key is missing.  Example:</p>
<pre class="literal-block">
In [106]: a
Out[106]: {}
In [108]: a.setdefault('cc', 33)
Out[108]: 33
In [109]: a
Out[109]: {'cc': 33}
In [110]: a.setdefault('cc', 44)
Out[110]: 33
In [111]: a
Out[111]: {'cc': 33}
</pre>
<p>Exercises:</p>
<ul>
<li><p class="first">Write a literal that defines a dictionary using both string
literals and variables containing strings.  Solution:</p>
<pre class="literal-block">
&gt;&gt;&gt; first = 'Dave'
&gt;&gt;&gt; last = 'Kuhlman'
&gt;&gt;&gt; name_dict = {first: last, 'Elvis': 'Presley'}
&gt;&gt;&gt; print name_dict
{'Dave': 'Kuhlman', 'Elvis': 'Presley'}
</pre>
</li>
<li><p class="first">Write statements that iterate over (1) the keys, (2) the values,
and (3) the items in a dictionary.  (Note: Requires introduction
of the <tt class="docutils literal">for</tt> statement.)  Solutions:</p>
<pre class="literal-block">
&gt;&gt;&gt; d = {'aa': 111, 'bb': 222, 'cc': 333}
&gt;&gt;&gt; for key in d.keys():
...   print key
...
aa
cc
bb
&gt;&gt;&gt; for value in d.values():
...   print value
...
111
333
222
&gt;&gt;&gt; for item in d.items():
...   print item
...
('aa', 111)
('cc', 333)
('bb', 222)
&gt;&gt;&gt; for key, value in d.items():
...   print key, '::', value
...
aa :: 111
cc :: 333
bb :: 222
</pre>
</li>
</ul>
<p>Additional notes on dictionaries:</p>
<ul>
<li><p class="first">You can use <tt class="docutils literal">iterkeys()</tt>, <tt class="docutils literal">itervalues()</tt>, <tt class="docutils literal">iteritems()</tt> to
obtain iterators over keys, values, and items.</p>
</li>
<li><p class="first">A dictionary itself is iterable: it iterates over its keys.  So,
the following two lines are equivalent:</p>
<pre class="literal-block">
for k in myDict: print k
for k in myDict.iterkeys(): print k
</pre>
</li>
<li><p class="first">The <tt class="docutils literal">in</tt> operator tests for a key in a dictionary.  Example:</p>
<pre class="literal-block">
In [52]: mydict = {'peach': 'sweet', 'lemon': 'tangy'}
In [53]: key = 'peach'
In [54]: if key in mydict:
   ....:     print mydict[key]
   ....:
sweet
</pre>
</li>
</ul>
</div>
<div class="section" id="files">
<h2><a class="toc-backref" href="#id27">4.5&nbsp;&nbsp;&nbsp;Files</a></h2>
<p>Open a file with the <tt class="docutils literal">open</tt> factory method.  Example:</p>
<pre class="literal-block">
In [28]: f = open('mylog.txt', 'w')
In [29]: f.write('message #1\n')
In [30]: f.write('message #2\n')
In [31]: f.write('message #3\n')
In [32]: f.close()
In [33]: f = file('mylog.txt', 'r')
In [34]: for line in f:
   ....:     print line,
   ....:
message #1
message #2
message #3
In [35]: f.close()
</pre>
<p>Modes for opening files:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Modes</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>r</td>
<td>read</td>
</tr>
<tr><td>w</td>
<td>write; truncates file</td>
</tr>
<tr><td>a</td>
<td>write; append; position at end</td>
</tr>
<tr><td>r+</td>
<td>update; position at beginning for write</td>
</tr>
<tr><td>w+</td>
<td>update; truncates file</td>
</tr>
<tr><td>a+</td>
<td>update; position at end for write</td>
</tr>
<tr><td>b</td>
<td>binary (examples: 'rb', 'wb', 'rb+', etc)</td>
</tr>
</tbody>
</table>
<p>Notes:</p>
<ul>
<li><p class="first">Use the (built-in) <tt class="docutils literal">open(path, mode)</tt> function to open a file and
create a file object.  You could also use <tt class="docutils literal">file()</tt>, but <tt class="docutils literal">open()</tt>
is recommended.</p>
</li>
<li><p class="first">A file object that is open for reading a text file supports the
iterator protocol and, therefore, can be used in a <tt class="docutils literal">for</tt>
statement.  It iterates over the <em>lines</em> in the file.  This is
most likely only useful for text files.</p>
</li>
<li><p class="first"><tt class="docutils literal">open</tt> is a factory method that creates file objects.  Use it to
open files for reading, writing, and appending.  Examples:</p>
<pre class="literal-block">
infile = open('myfile.txt', 'r')    # open for reading
outfile = open('myfile.txt', 'w')   # open for (over-) writing
log = open('myfile.txt', 'a')       # open for appending to existing content
</pre>
</li>
<li><p class="first">When you have finished with a file, close it.  Examples:</p>
<pre class="literal-block">
infile.close()
outfile.close()
</pre>
</li>
<li><p class="first">You can also use the <tt class="docutils literal">with:</tt> statement to automatically close
the file.  Example:</p>
<pre class="literal-block">
with open('tmp01.txt', 'r') as infile:
    for x in infile:
        print x,
</pre>
<p>The above works because a file is a context manager: it obeys the
context manager protocol.  A file has methods <tt class="docutils literal">__enter__</tt> and
<tt class="docutils literal">__exit__</tt>, and the <tt class="docutils literal">__exit__</tt> method automatically closes the
file for us.  See the section on the <a class="reference internal" href="#with-statement">with: statement</a>.</p>
</li>
<li><p class="first">In order to open multiple files, you can nest <tt class="docutils literal">with:</tt>
statements, or use a single <tt class="docutils literal">with:</tt> statement with multiple
&quot;expression as target&quot; clauses.  Example:</p>
<pre class="literal-block">
def test():
    #
    # use multiple nested with: statements.
    with open('small_file.txt', 'r') as infile:
        with open('tmp_outfile.txt', 'w') as outfile:
            for line in infile:
                outfile.write('line: %s' % line.upper())
    print infile
    print outfile
    #
    # use a single with: statement.
    with open('small_file.txt', 'r') as infile, \
            open('tmp_outfile.txt', 'w') as outfile:
        for line in infile:
            outfile.write('line: %s' % line.upper())
    print infile
    print outfile

test()
</pre>
</li>
<li><p class="first"><tt class="docutils literal">file</tt> is the file type and can be used as a constructor to create
file objects.  <em>But</em>, <tt class="docutils literal">open</tt> is preferred.</p>
</li>
<li><p class="first">Lines read from a text file have a newline.  Strip it off with
something like: <tt class="docutils literal"><span class="pre">line.rstrip('\n')</span></tt>.</p>
</li>
<li><p class="first">For binary files you should add the binary mode, for example:
<tt class="docutils literal">rb</tt>, <tt class="docutils literal">wb</tt>.  For more about modes, see the description of the
<tt class="docutils literal">open()</tt> function at <a class="reference external" href="http://docs.python.org/lib/built-in-funcs.html">Built-in Functions
http://docs.python.org/lib/built-in-funcs.html --</a>.</p>
</li>
<li><p class="first">Learn more about file objects and the methods they provide at:
<a class="reference external" href="http://docs.python.org/2/library/stdtypes.html#file-objects">2.3.9 File Objects --
http://docs.python.org/2/library/stdtypes.html#file-objects</a>.</p>
</li>
</ul>
<p>You can also append to an existing file.  Note the &quot;a&quot; mode in the
following example:</p>
<pre class="literal-block">
In [39]: f = open('mylog.txt', 'a')
In [40]: f.write('message #4\n')
In [41]: f.close()
In [42]: f = file('mylog.txt', 'r')
In [43]: for line in f:
   ....:     print line,
   ....:
message #1
message #2
message #3
message #4
In [44]: f.close()
</pre>
<p>For binary files, add &quot;b&quot; to the mode.  Not strictly necessary on
UNIX, but needed on MS Windows.  And, you will want to make your
code portable across platforms.  Example:</p>
<pre class="literal-block">
In [62]: import zipfile
In [63]: outfile = open('tmp1.zip', 'wb')
In [64]: zfile = zipfile.ZipFile(outfile, 'w', zipfile.ZIP_DEFLATED)
In [65]: zfile.writestr('entry1', 'my heroes have always been cowboys')
In [66]: zfile.writestr('entry2', 'and they still are it seems')
In [67]: zfile.writestr('entry3', 'sadly in search of and')
In [68]: zfile.writestr('entry4', 'on step in back of')
In [69]:
In [70]: zfile.writestr('entry4', 'one step in back of')
In [71]: zfile.writestr('entry5', 'themselves and their slow moving ways')
In [72]: zfile.close()
In [73]: outfile.close()
In [75]:
$
$ unzip -lv tmp1.zip
Archive:  tmp1.zip
 Length   Method    Size  Ratio   Date   Time   CRC-32    Name
--------  ------  ------- -----   ----   ----   ------    ----
      34  Defl:N       36  -6%  05-29-08 17:04  f6b7d921  entry1
      27  Defl:N       29  -7%  05-29-08 17:07  10da8f3d  entry2
      22  Defl:N       24  -9%  05-29-08 17:07  3fd17fda  entry3
      18  Defl:N       20 -11%  05-29-08 17:08  d55182e6  entry4
      19  Defl:N       21 -11%  05-29-08 17:08  1a892acd  entry4
      37  Defl:N       39  -5%  05-29-08 17:09  e213708c  entry5
--------          -------  ---                            -------
     157              169  -8%                            6 files
</pre>
<p>Exercises:</p>
<ul>
<li><p class="first">Read all of the lines of a file into a list.  Print the 3rd and
5th lines in the file/list.  Solution:</p>
<pre class="literal-block">
In [55]: f = open('tmp1.txt', 'r')
In [56]: lines = f.readlines()
In [57]: f.close()
In [58]: lines
Out[58]: ['the\n', 'big\n', 'brown\n', 'dog\n', 'had\n', 'long\n', 'hair\n']
In [59]: print lines[2]
brown

In [61]: print lines[4]
had
</pre>
</li>
</ul>
<p>More notes:</p>
<ul class="simple">
<li>Strip newlines (and other whitespace) from a string with methods
<tt class="docutils literal">strip()</tt>, <tt class="docutils literal">lstrip()</tt>, and <tt class="docutils literal">rstrip()</tt>.</li>
<li>Get the current position within a file by using <tt class="docutils literal">myfile.tell()</tt>.</li>
<li>Set the current position within a file by using <tt class="docutils literal">myfile.seek()</tt>.
It may be helpful to use <tt class="docutils literal">os.SEEK_CUR</tt> and <tt class="docutils literal">os.SEEK_END</tt>.  For
example:<ul>
<li><tt class="docutils literal">f.seek(2, os.SEEK_CUR)</tt> advances the position by two</li>
<li><tt class="docutils literal"><span class="pre">f.seek(-3,</span> os.SEEK_END)</tt> sets the position to the third to last.</li>
<li><tt class="docutils literal">f.seek(25)</tt> sets the position relative to the beginning of the file.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="other-built-in-types">
<h2><a class="toc-backref" href="#id28">4.6&nbsp;&nbsp;&nbsp;Other built-in types</a></h2>
<p>Other built-in data types are described in section
<a class="reference external" href="http://docs.python.org/lib/types.html">Built-in Types --
http://docs.python.org/lib/types.html</a>
in the Python standard documentation.</p>
<div class="section" id="the-none-value-type">
<h3><a class="toc-backref" href="#id29">4.6.1&nbsp;&nbsp;&nbsp;The None value/type</a></h3>
<p>The unique value <tt class="docutils literal">None</tt> is used to indicate &quot;no value&quot;, &quot;nothing&quot;,
&quot;non-existence&quot;, etc.  There is only one <tt class="docutils literal">None</tt> value; in other
words, it's a singleton.</p>
<p>Use <tt class="docutils literal">is</tt> to test for <tt class="docutils literal">None</tt>.  Example:</p>
<pre class="literal-block">
&gt;&gt;&gt; flag = None
&gt;&gt;&gt;
&gt;&gt;&gt; if flag is None:
...     print 'clear'
...
clear
&gt;&gt;&gt; if flag is not None:
...     print 'hello'
...
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="boolean-values">
<h3><a class="toc-backref" href="#id30">4.6.2&nbsp;&nbsp;&nbsp;Boolean values</a></h3>
<p><tt class="docutils literal">True</tt> and <tt class="docutils literal">False</tt> are the boolean values.</p>
<p>The following values also count as false, for example, in an <tt class="docutils literal">if:</tt>
statement: <tt class="docutils literal">False</tt>, numeric zero, <tt class="docutils literal">None</tt>, the empty string, an
empty list, an empty dictionary, any empty container, etc.  All
other values, including <tt class="docutils literal">True</tt>, act as true values.</p>
</div>
<div class="section" id="sets-and-frozensets">
<h3><a class="toc-backref" href="#id31">4.6.3&nbsp;&nbsp;&nbsp;Sets and frozensets</a></h3>
<p>A set is an unordered collection of immutable objects.  A set does not
contain duplicates.</p>
<p>Sets support several set operations, for example: union, intersection,
difference, ...</p>
<p>A frozenset is like a set, except that a frozenset is immutable.
Therefore, a frozenset is hash-able and can be used as a key in a
dictionary, and it can be added to a set.</p>
<p>Create a set with the set constructor.  Examples:</p>
<pre class="literal-block">
&gt;&gt;&gt; a = set()
&gt;&gt;&gt; a
set([])
&gt;&gt;&gt; a.add('aa')
&gt;&gt;&gt; a.add('bb')
&gt;&gt;&gt; a
set(['aa', 'bb'])
&gt;&gt;&gt; b = set([11, 22])
&gt;&gt;&gt; b
set([11, 22])
&gt;&gt;&gt; c = set([22, 33])
&gt;&gt;&gt; b.union(c)
set([33, 11, 22])
&gt;&gt;&gt; b.intersection(c)
set([22])
</pre>
<p>For more information on sets, see:
<a class="reference external" href="http://docs.python.org/lib/types-set.html">Set Types -- set, frozenset --
http://docs.python.org/lib/types-set.html</a></p>
</div>
</div>
</div>
<div class="section" id="functions-and-classes-a-preview">
<h1><a class="toc-backref" href="#id32">5&nbsp;&nbsp;&nbsp;Functions and Classes -- A Preview</a></h1>
<p>Structured code -- Python programs are made up of expressions,
statements, functions, classes, modules, and packages.</p>
<p>Python objects are first-class objects.</p>
<p>Expressions are evaluated.</p>
<p>Statements are executed.</p>
<p>Functions (1) are objects and (2) are callable.</p>
<p>Object-oriented programming in Python.  Modeling &quot;real world&quot;
objects. (1) Encapsulation; (2) data hiding; (3) inheritance.
Polymorphism.</p>
<p>Classes -- (1) encapsulation; (2) data hiding; (3) inheritance.</p>
<p>An overview of the structure of a typical class: (1) methods; (2) the
constructor; (3) class (static) variables; (4) super/subclasses.</p>
</div>
<div class="section" id="statements">
<h1><a class="toc-backref" href="#id33">6&nbsp;&nbsp;&nbsp;Statements</a></h1>
<div class="section" id="assignment-statement">
<h2><a class="toc-backref" href="#id34">6.1&nbsp;&nbsp;&nbsp;Assignment statement</a></h2>
<p>Form -- <tt class="docutils literal">target = expression</tt>.</p>
<p>Possible targets:</p>
<ul>
<li><p class="first">Identifier</p>
</li>
<li><p class="first">Tuple or list -- Can be nested.  Left and right sides must have
equivalent structure.  Example:</p>
<pre class="literal-block">
&gt;&gt;&gt; x, y, z = 11, 22, 33
&gt;&gt;&gt; [x, y, z] = 111, 222, 333
&gt;&gt;&gt; a, (b, c) = 11, (22, 33)
&gt;&gt;&gt; a, B = 11, (22, 33)
</pre>
<p>This feature can be used to simulate an enum:</p>
<pre class="literal-block">
In [22]: LITTLE, MEDIUM, LARGE = range(1, 4)
In [23]: LITTLE
Out[23]: 1
In [24]: MEDIUM
Out[24]: 2
</pre>
</li>
<li><p class="first">Subscription of a sequence, dictionary, etc.  Example:</p>
<pre class="literal-block">
In [10]: a = range(10)
In [11]: a
Out[11]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
In [12]: a[3] = 'abc'
In [13]: a
Out[13]: [0, 1, 2, 'abc', 4, 5, 6, 7, 8, 9]
In [14]:
In [14]: b = {'aa': 11, 'bb': 22}
In [15]: b
Out[15]: {'aa': 11, 'bb': 22}
In [16]: b['bb'] = 1000
In [17]: b['cc'] = 2000
In [18]: b
Out[18]: {'aa': 11, 'bb': 1000, 'cc': 2000}
</pre>
</li>
<li><p class="first">A slice of a sequence -- Note that the sequence must be mutable.
Example:</p>
<pre class="literal-block">
In [1]: a = range(10)
In [2]: a
Out[2]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
In [3]: a[2:5] = [11, 22, 33, 44, 55, 66]
In [4]: a
Out[4]: [0, 1, 11, 22, 33, 44, 55, 66, 5, 6, 7, 8, 9]
</pre>
</li>
<li><p class="first">Attribute reference -- Example:</p>
<pre class="literal-block">
&gt;&gt;&gt; class MyClass:
...     pass
...
&gt;&gt;&gt; anObj = MyClass()
&gt;&gt;&gt; anObj.desc = 'pretty'
&gt;&gt;&gt; print anObj.desc
pretty
</pre>
</li>
</ul>
<p>There is also augmented assignment.  Examples:</p>
<pre class="literal-block">
&gt;&gt;&gt; index = 0
&gt;&gt;&gt; index += 1
&gt;&gt;&gt; index += 5
&gt;&gt;&gt; index += f(x)
&gt;&gt;&gt; index -= 1
&gt;&gt;&gt; index *= 3
</pre>
<p>Things to note:</p>
<ul>
<li><p class="first">Assignment to a name creates a new variable (if it does not exist in
the namespace) and a binding.  Specifically, it binds a value to the
new name.  Calling a function also does this to the (formal)
parameters within the local namespace.</p>
</li>
<li><p class="first">In Python, a language with dynamic typing, the data type is
associated with the value, not the variable, as is the case in
statically typed languages.</p>
</li>
<li><p class="first">Assignment can also cause sharing of an object.  Example:</p>
<pre class="literal-block">
obj1 = A()
obj2 = obj1
</pre>
<p>Check to determine that the same object is shared with
<tt class="docutils literal">id(obj)</tt> or the <tt class="docutils literal">is</tt> operator.  Example:</p>
<pre class="literal-block">
In [23]: a = range(10)
In [24]: a
Out[24]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
In [25]: b = a
In [26]: b
Out[26]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
In [27]: b[3] = 333
In [28]: b
Out[28]: [0, 1, 2, 333, 4, 5, 6, 7, 8, 9]
In [29]: a
Out[29]: [0, 1, 2, 333, 4, 5, 6, 7, 8, 9]
In [30]: a is b
Out[30]: True
In [31]: print id(a), id(b)
31037920 31037920
</pre>
</li>
<li><p class="first">You can also do multiple assignment in a single statement.
Example:</p>
<pre class="literal-block">
In [32]: a = b = 123
In [33]: a
Out[33]: 123
In [34]: b
Out[34]: 123
In [35]:
In [35]:
In [35]: a = b = [11, 22]
In [36]: a is b
Out[36]: True
</pre>
</li>
<li><p class="first">You can interchange (swap) the value of two variables using
assignment and packing/unpacking:</p>
<pre class="literal-block">
&gt;&gt;&gt; a = 111
&gt;&gt;&gt; b = 222
&gt;&gt;&gt; a, b = b, a
&gt;&gt;&gt; a
222
&gt;&gt;&gt; b
111
</pre>
</li>
</ul>
</div>
<div class="section" id="import-statement">
<h2><a class="toc-backref" href="#id35">6.2&nbsp;&nbsp;&nbsp;import statement</a></h2>
<p>Make module (or objects in the module) available.</p>
<p>What <tt class="docutils literal">import</tt> does:</p>
<ul>
<li><p class="first">Evaluate the content of a module.</p>
</li>
<li><p class="first">Likely to create variables in the local (module) namespace.</p>
</li>
<li><p class="first">Evaluation of a specific module only happens once during a given run
of the program.  Therefore, a module is shared across an
application.</p>
</li>
<li><p class="first">A module is evaluated from top to bottom.  Later statements can
replace values created earlier.  This is true of functions and
classes, as well as (other) variables.</p>
</li>
<li><p class="first">Which statements are evaluated?  Assignment, <tt class="docutils literal">class</tt>, <tt class="docutils literal">def</tt>,
...</p>
</li>
<li><p class="first">Use the following idiom to make a module both run-able and
import-able:</p>
<pre class="literal-block">
if __name__ == '__main__':
    # import pdb; pdb.set_trace()
    main()        # or &quot;test()&quot; or some other function defined in module
</pre>
<p>Notes:</p>
<ul class="simple">
<li>The above condition will be true <em>only when</em> the module is run
as a script and will <em>not</em> be true when the module is imported.</li>
<li>The line containing <tt class="docutils literal">pdb</tt> can be copied any place in your
program and un-commented, and then the program will drop into
the Python debugger when that location is reached.</li>
</ul>
</li>
</ul>
<p>Where <tt class="docutils literal">import</tt> looks for modules:</p>
<ul>
<li><p class="first"><tt class="docutils literal">sys.path</tt> shows where it looks.</p>
</li>
<li><p class="first">There are some standard places.</p>
</li>
<li><p class="first">Add additional directories by setting the environment variable
<tt class="docutils literal">PYTHONPATH</tt>.  For help, type:</p>
<pre class="literal-block">
$ python --help
</pre>
</li>
<li><p class="first">You can also add paths by modifying <tt class="docutils literal">sys.path</tt>, for example:</p>
<pre class="literal-block">
import sys
sys.path.insert(0, '/path/to/my/module')
</pre>
</li>
<li><p class="first">Packages need a file named <tt class="docutils literal">__init__.py</tt>.</p>
</li>
<li><p class="first">Extensions -- To determine what extensions import looks for,
do:</p>
<pre class="literal-block">
&gt;&gt;&gt; import imp
&gt;&gt;&gt; imp.get_suffixes()
[('.so', 'rb', 3), ('module.so', 'rb', 3), ('.py', 'U', 1), ('.pyc', 'rb', 2)]
</pre>
</li>
</ul>
<p>Forms of the <tt class="docutils literal">import</tt> statement:</p>
<ul class="simple">
<li><tt class="docutils literal">import A</tt> -- Names in the local (module) namespace are
accessible with the dot operator.</li>
<li><tt class="docutils literal">import A as B</tt> -- Import the module A, but bind the module
object to the variable B.</li>
<li><tt class="docutils literal">import A1, A2</tt> -- Not recommended</li>
<li><tt class="docutils literal">from A import B</tt></li>
<li><tt class="docutils literal">from A import B1, B2</tt></li>
<li><tt class="docutils literal">from A import B as C</tt></li>
<li><tt class="docutils literal">from A import *</tt> -- Not recommended: clutters and mixes
name-spaces.</li>
<li><tt class="docutils literal">from A.B import C</tt> -- (1) Possibly import object <tt class="docutils literal">C</tt> from module <tt class="docutils literal">B</tt>
in package <tt class="docutils literal">A</tt> or (2) possibly import module <tt class="docutils literal">C</tt> from
sub-package <tt class="docutils literal">B</tt> in package <tt class="docutils literal">A</tt>.</li>
<li><tt class="docutils literal">import A.B.C</tt> -- To reference attributes in <tt class="docutils literal">C</tt>, must use
fully-qualified name, for example use <tt class="docutils literal">A.B.C.D</tt> to reference <tt class="docutils literal">D</tt>
inside of <tt class="docutils literal">C</tt>.</li>
</ul>
<p>Examples:</p>
<pre class="literal-block">
from xml.dom.minidom import parseString
print &quot;1.&quot;, parseString

from xml.dom import minidom
print &quot;2.&quot;, minidom.parseString

import xml.dom.minidom
print &quot;3.&quot;, xml.dom.minidom.parseString

from xml.dom.minidom import parseString as prsStr
print &quot;4.&quot;, prsStr
</pre>
<p>When we run the above, we see:</p>
<pre class="literal-block">
$ python import_example.py
1. &lt;function parseString at 0x7f869d8c60c8&gt;
2. &lt;function parseString at 0x7f869d8c60c8&gt;
3. &lt;function parseString at 0x7f869d8c60c8&gt;
4. &lt;function parseString at 0x7f869d8c60c8&gt;
</pre>
<p>More notes on the <tt class="docutils literal">import</tt> statement:</p>
<ul>
<li><p class="first">The import statement and packages -- A file named <tt class="docutils literal">__init__.py</tt> is
required in a package.  This file is evaluated the first time either
the package is imported or a file in the package is imported.
Question: What is made available when you do <tt class="docutils literal">import aPackage</tt>?
Answer: All variables (names) that are global inside the
<tt class="docutils literal">__init__.py</tt> module in that package.  But, see notes on the use
of <tt class="docutils literal">__all__</tt>: <a class="reference external" href="http://docs.python.org/ref/import.html">The import statement --
http://docs.python.org/ref/import.html</a></p>
</li>
<li><p class="first">The use of <tt class="docutils literal">if __name__ == &quot;__main__&quot;:</tt> -- Makes a module both
import-able and executable.</p>
</li>
<li><p class="first">Using dots in the import statement -- From the Python language
reference manual:</p>
<blockquote>
<p>&quot;Hierarchical module names:when the module names contains one or
more dots, the module search path is carried out differently. The
sequence of identifiers up to the last dot is used to find a
<tt class="docutils literal">package</tt>; the final identifier is then searched inside the
package. A package is generally a subdirectory of a directory on
sys.path that has a file __init__.py.&quot;</p>
</blockquote>
<p>See: <a class="reference external" href="http://docs.python.org/ref/import.html">The import statement --
http://docs.python.org/ref/import.html</a></p>
</li>
</ul>
<p>Exercises:</p>
<ul>
<li><p class="first">Import a module from the standard library, for example <tt class="docutils literal">re</tt>.</p>
</li>
<li><p class="first">Import an element from a module from the standard library, for
example import <tt class="docutils literal">compile</tt> from the <tt class="docutils literal">re</tt> module.</p>
</li>
<li><p class="first">Create a simple Python package with a single module in it.
Solution:</p>
<ol class="arabic">
<li><p class="first">Create a directory named <tt class="docutils literal">simplepackage</tt> in the current
directory.</p>
</li>
<li><p class="first">Create an (empty) <tt class="docutils literal">__init__.py</tt> in the new directory.</p>
</li>
<li><p class="first">Create an <tt class="docutils literal">simple.py</tt> in the new directory.</p>
</li>
<li><p class="first">Add a simple function name <tt class="docutils literal">test1</tt> in <tt class="docutils literal">simple.py</tt>.</p>
</li>
<li><p class="first">Import using any of the following:</p>
<pre class="literal-block">
&gt;&gt;&gt; import simplepackage.simple
&gt;&gt;&gt; from simplepackage import simple
&gt;&gt;&gt; from simplepackage.simple import test1
&gt;&gt;&gt; from simplepackage.simple import test1 as mytest
</pre>
</li>
</ol>
</li>
</ul>
</div>
<div class="section" id="print-statement">
<h2><a class="toc-backref" href="#id36">6.3&nbsp;&nbsp;&nbsp;print statement</a></h2>
<p><tt class="docutils literal">print</tt> sends output to <tt class="docutils literal">sys.stdout</tt>.  It adds a newline, unless
an extra comma is added.</p>
<p>Arguments to <tt class="docutils literal">print</tt>:</p>
<ul class="simple">
<li>Multiple items -- Separated by commas.</li>
<li>End with comma to suppress carriage return. (But, it still appends
a blank.)</li>
<li>Use string formatting for more control over output.</li>
<li>Also see various &quot;pretty-printing&quot; functions and methods, in
particular, <tt class="docutils literal">pprint</tt>.  See
<a class="reference external" href="http://docs.python.org/lib/module-pprint.html">3.27 pprint -- Data pretty printer</a> --
<a class="reference external" href="http://docs.python.org/lib/module-pprint.html">http://docs.python.org/lib/module-pprint.html</a>.</li>
</ul>
<p>String formatting -- Arguments are a tuple.  Reference:
<a class="reference external" href="http://docs.python.org/lib/typesseq-strings.html">2.3.6.2 String Formatting Operations</a> --
<a class="reference external" href="http://docs.python.org/lib/typesseq-strings.html">http://docs.python.org/lib/typesseq-strings.html</a>.</p>
<p>Can also use <tt class="docutils literal">sys.stdout</tt>.  Note that a carriage return is <em>not</em>
automatically added.  Example:</p>
<pre class="literal-block">
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.stdout.write('hello\n')
</pre>
<p>Controlling the destination and format of print -- Replace
<tt class="docutils literal">sys.stdout</tt> with an instance of any class that implements the
method <tt class="docutils literal">write</tt> taking one parameter.  Example:</p>
<pre class="literal-block">
import sys

class Writer:
    def __init__(self, file_name):
        self.out_file = file(file_name, 'a')
    def write(self, msg):
        self.out_file.write('[[%s]]' % msg)
    def close(self):
        self.out_file.close()

def test():
    writer = Writer('outputfile.txt')
    save_stdout = sys.stdout
    sys.stdout = writer
    print 'hello'
    print 'goodbye'
    writer.close()
    # Show the output.
    tmp_file = file('outputfile.txt')
    sys.stdout = save_stdout
    content = tmp_file.read()
    tmp_file.close()
    print content

test()
</pre>
<p>There is an alternative form of the <tt class="docutils literal">print</tt> statement that takes a
file-like object, in particular an object that has a <tt class="docutils literal">write</tt>
method.  For example:</p>
<pre class="literal-block">
In [1]: outfile = open('tmp.log', 'w')
In [2]: print &gt;&gt; outfile, 'Message #1'
In [3]: print &gt;&gt; outfile, 'Message #2'
In [4]: print &gt;&gt; outfile, 'Message #3'
In [5]: outfile.close()
In [6]:
In [6]: infile = open('tmp.log', 'r')
In [7]: for line in infile:
   ...:     print 'Line:', line.rstrip('\n')
   ...:
Line: Message #1
Line: Message #2
Line: Message #3
In [8]: infile.close()
</pre>
<p>Future deprecation warning -- There is no print <em>statement</em> in Python
3.  There is a print built-in <em>function</em>.</p>
</div>
<div class="section" id="if-elif-else-statement">
<h2><a class="toc-backref" href="#id37">6.4&nbsp;&nbsp;&nbsp;if: elif: else: statement</a></h2>
<p>A template for the <tt class="docutils literal">if:</tt> statement:</p>
<pre class="literal-block">
if condition1:
    statements
elif condition2:
    statements
elif condition3:
    statements
else:
    statements
</pre>
<p>The <tt class="docutils literal">elif</tt> and <tt class="docutils literal">else</tt> clauses are optional.</p>
<p>Conditions -- Expressions -- Anything that returns a value.
Compare with <tt class="docutils literal">eval()</tt> and <tt class="docutils literal">exec</tt>.</p>
<p>Truth values:</p>
<ul class="simple">
<li>False -- <tt class="docutils literal">False</tt>, <tt class="docutils literal">None</tt>, numeric zero, the empty string, an
empty collection (list or tuple or dictionary or ...).</li>
<li>True -- <tt class="docutils literal">True</tt> and everything else.</li>
</ul>
<p>Operators:</p>
<ul>
<li><p class="first"><tt class="docutils literal">and</tt> and <tt class="docutils literal">or</tt> -- Note that both <tt class="docutils literal">and</tt> and <tt class="docutils literal">or</tt> do short
circuit evaluation.</p>
</li>
<li><p class="first"><tt class="docutils literal">not</tt></p>
</li>
<li><p class="first"><tt class="docutils literal">is</tt> and <tt class="docutils literal">is not</tt> -- The identical object.  Cf. <tt class="docutils literal">a is b</tt> and
<tt class="docutils literal">id(a) == id(b)</tt>.  Useful to test for <tt class="docutils literal">None</tt>, for example:</p>
<pre class="literal-block">
if x is None:
    ...
if x is not None:
    ...
</pre>
</li>
<li><p class="first"><tt class="docutils literal">in</tt> and <tt class="docutils literal">not in</tt> -- Can be used to test for existence of a
key in a dictionary or for the presence of a value in a
collection.</p>
<p>The <tt class="docutils literal">in</tt> operator tests for equality, not identity.</p>
<p>Example:</p>
<pre class="literal-block">
In [1]: a = (11, 22)
In [2]: b = (11, 22)
In [3]: a is b
Out[3]: False
In [4]: d = {a: 'abc'}
In [5]: a in d
Out[5]: True
In [6]: b in d
Out[6]: True
</pre>
</li>
<li><p class="first">Comparison operators, for example <tt class="docutils literal">==</tt>, <tt class="docutils literal">!=</tt>, <tt class="docutils literal">&lt;</tt>, <tt class="docutils literal">&lt;=</tt>, ...</p>
</li>
</ul>
<p>Short circuit evaluation:</p>
<ul class="simple">
<li><tt class="docutils literal">expr1 and expr2</tt> -- Does not evaluate <tt class="docutils literal">expr2</tt> if <tt class="docutils literal">expr1</tt>
is False.</li>
<li><tt class="docutils literal">expr1 or expr2</tt> -- Does not evaluate <tt class="docutils literal">expr2</tt> if <tt class="docutils literal">expr1</tt>
is True.</li>
</ul>
<p>There is an <tt class="docutils literal">if</tt> expression.  Example:</p>
<pre class="literal-block">
&gt;&gt;&gt; a = 'aa'
&gt;&gt;&gt; b = 'bb'
&gt;&gt;&gt; x = 'yes' if a == b else 'no'
&gt;&gt;&gt; x
'no'
</pre>
<p>Notes:</p>
<ul class="simple">
<li>The <tt class="docutils literal">elif:</tt> clauses and the <tt class="docutils literal">else:</tt> clause are optional.</li>
<li>The <tt class="docutils literal">if:</tt>, <tt class="docutils literal">elif:</tt>, and <tt class="docutils literal">else:</tt> clauses are all header lines
in the sense that they are each followed by an indented block of
code and each of these header lines ends with a colon.  (To put an
empty block after one of these, or any other, statement header
line, use the <tt class="docutils literal">pass</tt> statement.  It's effectively a no-op.)</li>
<li>Parentheses around the condition in an <tt class="docutils literal">if:</tt> or <tt class="docutils literal">elif:</tt> are
not required and are considered bad form, unless the condition
extends over multiple lines, in which case parentheses are
preferred over use of a line continuation character (backslash at
the end of the line).</li>
</ul>
<p>Exercises:</p>
<ul class="simple">
<li>Write an <tt class="docutils literal">if</tt> statement with an <tt class="docutils literal">and</tt> operator.</li>
<li>Write an <tt class="docutils literal">if</tt> statement with an <tt class="docutils literal">or</tt> operator.</li>
<li>Write an <tt class="docutils literal">if</tt> statement containing both <tt class="docutils literal">and</tt> and <tt class="docutils literal">or</tt>
operators.</li>
</ul>
</div>
<div class="section" id="for-statement">
<h2><a class="toc-backref" href="#id38">6.5&nbsp;&nbsp;&nbsp;for: statement</a></h2>
<p>Iterate over a sequence or an &quot;iterable&quot; object.</p>
<p>Form:</p>
<pre class="literal-block">
for x in y:
    block
</pre>
<p>Iterator -- Some notes on what it means to be iterable:</p>
<ul class="simple">
<li>An iterable is something that can be used in an iterator context,
for example, in a <tt class="docutils literal">for:</tt> statement, in a list comprehension, and
in a generator expression.</li>
<li>Sequences and containers are iterable.  Examples: tuples, lists,
strings, dictionaries, sets.</li>
<li>Instances of classes that obey the iterator protocol are
iterable.  See <a class="reference external" href="http://docs.python.org/lib/typeiter.html">http://docs.python.org/lib/typeiter.html</a>.</li>
<li>We can create an iterator object with built-in functions such as
<tt class="docutils literal">iter()</tt> and <tt class="docutils literal">enumerate()</tt>.  See
<a class="reference external" href="http://docs.python.org/lib/built-in-funcs.html">Built-in Functions --
http://docs.python.org/lib/built-in-funcs.html</a>
in the Python standard library reference.</li>
<li>Functions that use the <tt class="docutils literal">yield</tt> statement, produce an iterator,
although it's actually called a generator.</li>
<li>A generator expression produces an iterable object.  A generator
expression looks like a list comprehension but is surrounded by
parentheses instead of square brackets.</li>
<li>An iterable implements the iterator interface and satisfies the
iterator protocol.  The iterator protocol: <tt class="docutils literal">__iter__()</tt> and
<tt class="docutils literal">next()</tt> methods.  See <a class="reference external" href="http://docs.python.org/lib/typeiter.html">2.3.5 Iterator Types</a> --
(<a class="reference external" href="http://docs.python.org/lib/typeiter.html">http://docs.python.org/lib/typeiter.html</a>).</li>
</ul>
<p>Testing for &quot;iterability&quot;:</p>
<ul class="simple">
<li>If you can use an object in a <tt class="docutils literal">for:</tt> statement, it's iterable.</li>
<li>If the expresion <tt class="docutils literal">iter(obj)</tt> does not produce a <tt class="docutils literal">TypeError</tt>
exception, it's iterable.</li>
</ul>
<p>Some ways to produce iterators:</p>
<ul>
<li><p class="first"><tt class="docutils literal">iter()</tt> and <tt class="docutils literal">enumerate()</tt> -- See:
<a class="reference external" href="http://docs.python.org/lib/built-in-funcs.html">http://docs.python.org/lib/built-in-funcs.html</a>.</p>
</li>
<li><p class="first"><tt class="docutils literal">some_dict.iterkeys()</tt>, <tt class="docutils literal">some_dict.itervalues()</tt>,
<tt class="docutils literal">some_dict.iteritems()</tt>.</p>
</li>
<li><p class="first">Use a sequence in an iterator context, for example in a <tt class="docutils literal">for</tt>
statement.  Lists, tuples, dictionaries, and strings can be used in
an iterator context to produce an iterator.</p>
</li>
<li><p class="first">Generator expressions -- Syntactically like list comprehensions,
but (1) surrounded by parentheses instead of square brackets and
(2) use lazy evaluation.</p>
</li>
<li><p class="first">A class that implements the iterator protocol -- Example:</p>
<pre class="literal-block">
class A(object):
    def __init__(self):
        self.data = [11,22,33]
        self.idx = 0
    def __iter__(self):
        return self
    def next(self):
        if self.idx &lt; len(self.data):
            x = self.data[self.idx]
            self.idx +=1
            return x
        else:
            raise StopIteration

def test():
    a = A()
    for x in a:
        print x

test()
</pre>
<p>Note that the iterator protocol changes in Python 3.</p>
</li>
<li><p class="first">A function containing a yield statement.  See:</p>
<ul class="simple">
<li><a class="reference external" href="http://docs.python.org/2/reference/expressions.html#yield-expressions">Yield expressions --
http://docs.python.org/2/reference/expressions.html#yield-expressions</a></li>
<li><a class="reference external" href="http://docs.python.org/2/reference/simple_stmts.html#the-yield-statement">The yield statement --
http://docs.python.org/2/reference/simple_stmts.html#the-yield-statement</a></li>
</ul>
</li>
<li><p class="first">Also see <tt class="docutils literal">itertools</tt> module in the Python standard library for
much more help with iterators:
<a class="reference external" href="http://docs.python.org/2/library/itertools.html#module-itertools">itertools — Functions creating iterators for efficient looping --
http://docs.python.org/2/library/itertools.html#module-itertools</a></p>
</li>
</ul>
<p>The <tt class="docutils literal">for:</tt> statement can also do unpacking.  Example:</p>
<pre class="literal-block">
In [25]: items = ['apple', 'banana', 'cherry', 'date']
In [26]: for idx, item in enumerate(items):
   ....:     print '%d.  %s' % (idx, item, )
   ....:
0.  apple
1.  banana
2.  cherry
3.  date
</pre>
<p>The <tt class="docutils literal">for</tt> statement can also have an optional <tt class="docutils literal">else:</tt> clause.  The
<tt class="docutils literal">else:</tt> clause is executed if the <tt class="docutils literal">for</tt> statement completes
normally, that is if a <tt class="docutils literal">break</tt> statement is <em>not</em> executed.</p>
<p>Helpful functions with <tt class="docutils literal">for</tt>:</p>
<ul>
<li><p class="first"><tt class="docutils literal">enumerate(iterable)</tt> -- Returns an iterable that produces
pairs (tuples) containing count (index) and value.  Example:</p>
<pre class="literal-block">
&gt;&gt;&gt; for idx, value in enumerate([11,22,33]):
...     print idx, value
...
0 11
1 22
2 33
</pre>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">range([start,]</span> stop[, step])</tt> and <tt class="docutils literal"><span class="pre">xrange([start,]</span> stop[, step])</tt>.</p>
</li>
</ul>
<p>List comprehensions -- Since list comprehensions create lists, they
are useful in <tt class="docutils literal">for</tt> statements, although, when the number of
elements is large, you should consider using a generator expression
instead.  A list comprehension looks a bit like a <tt class="docutils literal">for:</tt>
statement, but is inside square brackets, and it is an expression,
not a statement.  Two forms (among others):</p>
<ul class="simple">
<li><tt class="docutils literal">[f(x) for x in iterable]</tt></li>
<li><tt class="docutils literal">[f(x) for x in iterable if t(x)]</tt></li>
</ul>
<p>Generator expressions -- A generator expression looks similar to a
list comprehension, except that it is surrounded by parentheses
rather than square brackets.  Example:</p>
<pre class="literal-block">
In [28]: items = ['apple', 'banana', 'cherry', 'date']
In [29]: gen1 = (item.upper() for item in items)
In [30]: for x in gen1:
   ....:     print 'x:', x
   ....:
x: APPLE
x: BANANA
x: CHERRY
x: DATE
</pre>
<p>Comprehensions for sets -- They look like list comprehensions, but
are surrounded by <em>curley</em> brackets instead of square brackets.
Example:</p>
<pre class="literal-block">
In [1]: a = [11, 22, 33]
In [2]: b = {x * 4 for x in a}
In [3]: print b
set([88, 132, 44])
</pre>
<p>Exercises:</p>
<ul>
<li><p class="first">Write a list comprehension that returns all the keys in a
dictionary whose associated values are greater than zero.</p>
<ul class="simple">
<li>The dictionary: <tt class="docutils literal">{'aa': 11, 'cc': 33, 'dd': <span class="pre">-55,</span> 'bb': 22}</tt></li>
<li>Solution: <tt class="docutils literal">[x[0] for x in my_dict.iteritems() if x[1] &gt; 0]</tt></li>
</ul>
</li>
<li><p class="first">Write a list comprehension that produces even integers from 0 to
10.  Use a <tt class="docutils literal">for</tt> statement to iterate over those values.
Solution:</p>
<pre class="literal-block">
for x in [y for y in range(10) if y % 2 == 0]:
    print 'x: %s' % x
</pre>
</li>
<li><p class="first">Write a list comprehension that iterates over two lists and
produces all the combinations of items from the lists.  Solution:</p>
<pre class="literal-block">
In [19]: a = range(4)
In [20]: b = [11,22,33]
In [21]: a
Out[21]: [0, 1, 2, 3]
In [22]: b
Out[22]: [11, 22, 33]
In [23]: c = [(x, y) for x in a for y in b]
In [24]: print c
[(0, 11), (0, 22), (0, 33), (1, 11), (1, 22), (1, 33),
(2, 11), (2, 22), (2, 33), (3, 11), (3, 22), (3, 33)]
</pre>
</li>
</ul>
<p>But, note that in the previous exercise, a generator expression
would often be better.  A generator expression is like a list
comprehension, except that, instead of creating the entire list,
it produces a generator that can be used to produce each of the
elements.</p>
<p>The <tt class="docutils literal">break</tt> and <tt class="docutils literal">continue</tt> statements are often useful in a
<tt class="docutils literal">for</tt> statement.  See <a class="reference internal" href="#continue-and-break-statements">continue and break statements</a></p>
<p>The <tt class="docutils literal">for</tt> statement can also have an optional <tt class="docutils literal">else:</tt> clause.
The <tt class="docutils literal">else:</tt> clause is executed if the <tt class="docutils literal">for</tt> statement completes
normally, that is if a <tt class="docutils literal">break</tt> statement is <em>not</em> executed.
Example:</p>
<pre class="literal-block">
for item in data1:
    if item &gt; 100:
        value1 = item
        break
else:
    value1 = 'not found'
print 'value1:', value1
</pre>
<p>When run, it prints:</p>
<pre class="literal-block">
value1: not found
</pre>
</div>
<div class="section" id="while-statement">
<h2><a class="toc-backref" href="#id39">6.6&nbsp;&nbsp;&nbsp;while: statement</a></h2>
<p>Form:</p>
<pre class="literal-block">
while condition:
    block
</pre>
<p>The <tt class="docutils literal">while:</tt> statement is not often used in Python because the
<tt class="docutils literal">for:</tt> statement is usually more convenient, more idiomatic, and
more Pythonic.</p>
<p>Exercises:</p>
<ul>
<li><p class="first">Write a <tt class="docutils literal">while</tt> statement that prints integers from zero to 5.
Solution:</p>
<pre class="literal-block">
count = 0
while count &lt; 5:
    count += 1
    print count
</pre>
</li>
</ul>
<p>The <tt class="docutils literal">break</tt> and <tt class="docutils literal">continue</tt> statements are often useful in a
<tt class="docutils literal">while</tt> statement.  See <a class="reference internal" href="#continue-and-break-statements">continue and break statements</a></p>
<p>The <tt class="docutils literal">while</tt> statement can also have an optional <tt class="docutils literal">else:</tt> clause.
The <tt class="docutils literal">else:</tt> clause is executed if the <tt class="docutils literal">while</tt> statement completes
normally, that is if a <tt class="docutils literal">break</tt> statement is <em>not</em> executed.</p>
</div>
<div class="section" id="continue-and-break-statements">
<h2><a class="toc-backref" href="#id40">6.7&nbsp;&nbsp;&nbsp;continue and break statements</a></h2>
<p>The <tt class="docutils literal">break</tt> statement exits from a loop.</p>
<p>The <tt class="docutils literal">continue</tt> statement causes execution to immediately
continue at the start of the loop.</p>
<p>Can be used in <tt class="docutils literal">for:</tt> and <tt class="docutils literal">while:</tt>.</p>
<p>When the <tt class="docutils literal">for:</tt> statement or the <tt class="docutils literal">while:</tt> statement has an
<tt class="docutils literal">else:</tt> clause, the block in the <tt class="docutils literal">else:</tt> clause is executed only
if a <tt class="docutils literal">break</tt> statement is <em>not</em> executed.</p>
<p>Exercises:</p>
<ul>
<li><p class="first">Using <tt class="docutils literal">break</tt>, write a <tt class="docutils literal">while</tt> statement that prints
integers from zero to 5.  Solution:</p>
<pre class="literal-block">
count = 0
while True:
    count += 1
    if count &gt; 5:
        break
    print count
</pre>
<p>Notes:</p>
<ul class="simple">
<li>A <tt class="docutils literal">for</tt> statement that uses <tt class="docutils literal">range()</tt> or <tt class="docutils literal">xrange()</tt> would
be better than a <tt class="docutils literal">while</tt> statement for this use.</li>
</ul>
</li>
<li><p class="first">Using <tt class="docutils literal">continue</tt>, write a <tt class="docutils literal">while</tt> statement that processes
only even integers from 0 to 10.  Note: <tt class="docutils literal">%</tt> is the modulo
operator.  Solution:</p>
<pre class="literal-block">
count = 0
while count &lt; 10:
    count += 1
    if count % 2 == 0:
        continue
    print count
</pre>
</li>
</ul>
</div>
<div class="section" id="try-except-statement">
<h2><a class="toc-backref" href="#id41">6.8&nbsp;&nbsp;&nbsp;try: except: statement</a></h2>
<p>Exceptions are a systematic and consistent way of processing errors
and &quot;unusual&quot; events in Python.</p>
<p>Caught and un-caught exceptions -- Uncaught exceptions terminate a
program.</p>
<p>The <tt class="docutils literal">try:</tt> statement catches an exception.</p>
<p>Almost all errors in Python are exceptions.</p>
<p>Evaluation (execution model) of the <tt class="docutils literal">try</tt> statement -- When an
exception occurs in the <tt class="docutils literal">try</tt> block, even if inside a nested
function call, execution of the <tt class="docutils literal">try</tt> block ends and the <tt class="docutils literal">except</tt>
clauses are searched for a matching exception.</p>
<p>Tracebacks -- Also see the <tt class="docutils literal">traceback</tt> module:
<a class="reference external" href="http://docs.python.org/lib/module-traceback.html">http://docs.python.org/lib/module-traceback.html</a></p>
<p>Exceptions are classes.</p>
<p>Exception classes -- subclassing, args.</p>
<p>An exception class in an <tt class="docutils literal">except:</tt> clause catches instances of
that exception class and all subclasses, but <em>not</em> superclasses.</p>
<p>Built-in exception classes -- See:</p>
<ul class="simple">
<li>Module <tt class="docutils literal">exceptions</tt>.</li>
<li>Built-in exceptions -- <a class="reference external" href="http://docs.python.org/lib/module-exceptions.html">http://docs.python.org/lib/module-exceptions.html</a>.</li>
</ul>
<p>User defined exception classes -- subclasses of <tt class="docutils literal">Exception</tt>.</p>
<p>Example:</p>
<pre class="literal-block">
try:
    raise RuntimeError('this silly error')
except RuntimeError as exp:
    print &quot;[[[%s]]]&quot; % exp
</pre>
<p>Reference: <a class="reference external" href="http://docs.python.org/lib/module-exceptions.html">http://docs.python.org/lib/module-exceptions.html</a></p>
<p>You can also get the arguments passed to the constructor of an
exception object.  In the above example, these would be:</p>
<pre class="literal-block">
exp.args
</pre>
<p>Why would you define your own exception class?  One answer:  You
want a user of your code to catch your exception and no others.</p>
<p>Catching an exception by exception class catches exceptions of that
class and all its subclasses.  So:</p>
<pre class="literal-block">
except SomeExceptionClass, exp:
</pre>
<p>matches and catches an exception if SomeExceptionClass is the
exception class or a base class (superclass) of the exception class.
The exception object (usually an instance of some exception class)
is bound to <tt class="docutils literal">exp</tt>.</p>
<p>A more &quot;modern&quot; syntax is:</p>
<pre class="literal-block">
except SomeExceptionClass as exp:
</pre>
<p>So:</p>
<pre class="literal-block">
class MyE(ValueError):
    pass

try:
    raise MyE()
except ValueError:
    print 'caught exception'
</pre>
<p>will print &quot;caught exception&quot;, because <tt class="docutils literal">ValueError</tt> is a base class
of <tt class="docutils literal">MyE</tt>.</p>
<p>Also see the entries for &quot;EAFP&quot; (easier to ask for forgiveness than
permission) and &quot;LBYL&quot; (look before you leap) in the Python
glossary: <a class="reference external" href="http://docs.python.org/3/glossary.html">http://docs.python.org/3/glossary.html</a>.</p>
<p>Exercises:</p>
<ul>
<li><p class="first">Write a <em>very</em> simple, empty exception subclass.  Solution:</p>
<pre class="literal-block">
class MyE(Exception):
    pass
</pre>
</li>
<li><p class="first">Write a <tt class="docutils literal">try:except:</tt> statement that raises your exception and
also catches it.  Solution:</p>
<pre class="literal-block">
try:
    raise MyE('hello there dave')
except MyE as exp:
    print exp
</pre>
</li>
</ul>
</div>
<div class="section" id="raise-statement">
<h2><a class="toc-backref" href="#id42">6.9&nbsp;&nbsp;&nbsp;raise statement</a></h2>
<p>Throw or raise an exception.</p>
<p>Forms:</p>
<ul class="simple">
<li><tt class="docutils literal">raise instance</tt></li>
<li><tt class="docutils literal">raise MyExceptionClass(value)</tt> -- preferred.</li>
<li><tt class="docutils literal">raise MyExceptionClass, value</tt></li>
</ul>
<p>The <tt class="docutils literal">raise</tt> statement takes:</p>
<ul class="simple">
<li>An (instance of) a built-in exception class.</li>
<li>An instance of class <tt class="docutils literal">Exception</tt> or</li>
<li>An instance of a built-in subclass of class <tt class="docutils literal">Exception</tt> or</li>
<li>An instance of a user-defined subclass of class <tt class="docutils literal">Exception</tt> or</li>
<li>One of the above classes and (optionally) a value (for example,
a string or a tuple).</li>
</ul>
<p>See <a class="reference external" href="http://docs.python.org/2/reference/simple_stmts.html#the-raise-statement">http://docs.python.org/2/reference/simple_stmts.html#the-raise-statement</a></p>
<p>For a list of built-in exceptions, see
<a class="reference external" href="http://docs.python.org/lib/module-exceptions.html">http://docs.python.org/lib/module-exceptions.html</a>.</p>
<p>The following example defines an exception subclass and throws an
instance of that subclass.  It also shows how to pass and catch
multiple arguments to the exception:</p>
<pre class="literal-block">
class NotsobadError(Exception):
    pass

def test(x):
    try:
        if x == 0:
            raise NotsobadError('a moderately bad error', 'not too bad')
    except NotsobadError, e:
        print 'Error args: %s' % (e.args, )

test(0)
</pre>
<p>Which prints out the following:</p>
<pre class="literal-block">
Error args: ('a moderately bad error', 'not too bad')
</pre>
<p>Notes:</p>
<ul class="simple">
<li>In order to pass in multiple arguments with the exception, we use
a tuple, or we pass multiple arguments to the constructor.</li>
</ul>
<p>The following example does a small amount of processing of the
arguments:</p>
<pre class="literal-block">
class NotsobadError(Exception):
    &quot;&quot;&quot;An exception class.
    &quot;&quot;&quot;
    def get_args(self):
        return '::::'.join(self.args)

def test(x):
    try:
        if x == 0:
            raise NotsobadError('a moderately bad error', 'not too bad')
    except NotsobadError, e:
        print 'Error args: {{{%s}}}' % (e.get_args(), )

test(0)
</pre>
</div>
<div class="section" id="with-statement">
<h2><a class="toc-backref" href="#id43">6.10&nbsp;&nbsp;&nbsp;with: statement</a></h2>
<p>The <tt class="docutils literal">with</tt> statement enables us to use a context manager (any
object that satisfies the context manager protocol) to add code
before (on entry to) and after (on exit from) a block of code.</p>
<div class="section" id="writing-a-context-manager">
<h3><a class="toc-backref" href="#id44">6.10.1&nbsp;&nbsp;&nbsp;Writing a context manager</a></h3>
<p>A context manager is an instance of a class that satisfies this
interface:</p>
<pre class="literal-block">
class Context01(object):
    def __enter__(self):
        pass
    def __exit__(self, exc_type, exc_value, traceback):
        pass
</pre>
<p>Here is an example that uses the above context manager:</p>
<pre class="literal-block">
class Context01(object):
    def __enter__(self):
        print 'in __enter__'
        return 'some value or other'    # usually we want to return self
    def __exit__(self, exc_type, exc_value, traceback):
        print 'in __exit__'
</pre>
<p>Notes:</p>
<ul>
<li><p class="first">The <tt class="docutils literal">__enter__</tt> method is called <em>before</em> our block of code is
entered.</p>
</li>
<li><p class="first">Usually, but not always, we will want the <tt class="docutils literal">__enter__</tt> method to
return <tt class="docutils literal">self</tt>, that is, the instance of our context manager
class.  We do this so that we can write:</p>
<pre class="literal-block">
with MyContextManager() as obj:
    pass
</pre>
<p>and then use the instance (<tt class="docutils literal">obj</tt> in this case) in the nested
block.</p>
</li>
<li><p class="first">The <tt class="docutils literal">__exit__</tt> method is called when our block of code is
exited either normally or because of an exception.</p>
</li>
<li><p class="first">If an exception is supplied, and the method wishes to suppress the
exception (i.e., prevent it from being propagated), it should
return a true value. Otherwise, the exception will be processed
normally upon exit from this method.</p>
</li>
<li><p class="first">If the block exits normally, the value of <tt class="docutils literal">exc_type</tt>,
<tt class="docutils literal">exc_value</tt>, and <tt class="docutils literal">traceback</tt> will be <tt class="docutils literal">None</tt>.</p>
</li>
</ul>
<p>For more information on the <tt class="docutils literal">with:</tt> statement, see
<a class="reference external" href="http://docs.python.org/2/library/stdtypes.html#context-manager-types">Context Manager Types --
http://docs.python.org/2/library/stdtypes.html#context-manager-types</a>.</p>
<p>See module <tt class="docutils literal">contextlib</tt> for strange ways of writing context
managers:
<a class="reference external" href="http://docs.python.org/2/library/contextlib.html#module-contextlib">http://docs.python.org/2/library/contextlib.html#module-contextlib</a></p>
</div>
<div class="section" id="using-the-with-statement">
<h3><a class="toc-backref" href="#id45">6.10.2&nbsp;&nbsp;&nbsp;Using the with: statement</a></h3>
<p>Here are examples:</p>
<pre class="literal-block">
# example 1
with Context01():
    print 'in body'

# example 2
with Context02() as a_value:
    print 'in body'
    print 'a_value: &quot;%s&quot;' % (a_value, )
    a_value.some_method_in_Context02()

# example 3
with open(infilename, 'r') as infile, open(outfilename, 'w') as outfile:
    for line in infile:
        line = line.rstrip()
        outfile.write('%s\n' % line.upper())
</pre>
<p>Notes:</p>
<ul class="simple">
<li>In the form <tt class="docutils literal">with ... as val</tt>, the value returned by the
<tt class="docutils literal">__enter__</tt> method is assigned to the variable (<tt class="docutils literal">val</tt> in this
case).</li>
<li>In order to use more than one context manager, you can nest
<tt class="docutils literal">with:</tt> statements, or separate uses of of the context managers
with commas, which is usually preferred.  See example 3 above.</li>
</ul>
<p>Here is a more extensive example:</p>
<pre class="literal-block">
import sys
import time

class SimpleContext(object):
    &quot;&quot;&quot;A simple context manager&quot;&quot;&quot;
    def __init__(self, label):
        self.label = label
    def __enter__(self):
        print &quot;entering block&quot;
        return self
    def __exit__(self, exc_type, exc_value, traceback):
        if exc_type is None:
            print &quot;leaving block&quot;
        else:
            sys.stderr.write(&quot;caught exception -- type: %s\n&quot; % (exc_type, ))
            return False
    def print_msg(self, msg, outfile=sys.stdout):
        outfile.write(&quot;%s (%s) %s\n&quot; % (self.label, time.ctime(), msg, ))

def test_with():
    print 'stage 1'
    with SimpleContext('logging 1') as context:
        context.print_msg('message 1')
        context.print_msg('message 2')
        context.print_msg('message 3')
        context.label = 'logging 2'
        context.print_msg('message 4')
        context.print_msg('message 5')
        context.print_msg('message 6')
    print 'stage 2'
    with SimpleContext('logging 3') as context:
        context.print_msg('message 7')
        # cause a NameError exception
        print unknown_variable
        context.print_msg('message 8')
    print 'stage 3'

def test():
    try:
        test_with()
    except NameError as exp:
        print 'caught exception up above -- exp: %s' % exp

test()
</pre>
<p>When we run the above example we see the following output:</p>
<pre class="literal-block">
$ python with_as2.py
stage 1
entering block
logging 1 (Mon Dec 23 10:52:59 2013) message 1
logging 1 (Mon Dec 23 10:52:59 2013) message 2
logging 1 (Mon Dec 23 10:52:59 2013) message 3
logging 2 (Mon Dec 23 10:52:59 2013) message 4
logging 2 (Mon Dec 23 10:52:59 2013) message 5
logging 2 (Mon Dec 23 10:52:59 2013) message 6
leaving block
stage 2
entering block
logging 3 (Mon Dec 23 10:52:59 2013) message 7
caught exception -- type: &lt;type 'exceptions.NameError'&gt;
caught exception up above -- exp: global name 'unknown_variable' is not defined
</pre>
<p>Notes:</p>
<ul class="simple">
<li>The <tt class="docutils literal">__enter__</tt> method is called before entering the nested
block in the <tt class="docutils literal">with:</tt> statement.</li>
<li>The <tt class="docutils literal">__exit__</tt> method is called after leaving the nested block
in the <tt class="docutils literal">with:</tt> statement.</li>
<li>The <tt class="docutils literal">__enter__</tt> method of this context manager returns <tt class="docutils literal">self</tt>
so that we can use it to call the <tt class="docutils literal">print_msg</tt> method.</li>
<li>The <tt class="docutils literal">__exit__</tt> method catches an exception in the block of the
<tt class="docutils literal">with:</tt> statement if there is one.</li>
<li>If the <tt class="docutils literal">__exit__</tt> method detects an exception <em>and</em> returns
<tt class="docutils literal">False</tt>, the exception is propagated up the call chain (call
stack).  If it had returned <tt class="docutils literal">True</tt>, exception processing would
have ceased.</li>
<li>The above example uses a <tt class="docutils literal">try:</tt> statement to catch that
exception further up the call stack.</li>
</ul>
</div>
</div>
<div class="section" id="del">
<h2><a class="toc-backref" href="#id46">6.11&nbsp;&nbsp;&nbsp;del</a></h2>
<p>The <tt class="docutils literal">del</tt> statement can be used to:</p>
<ul class="simple">
<li>Remove names from namespace.</li>
<li>Remove attributes from an object.</li>
<li>Remove items from a collection.</li>
</ul>
<p>The <tt class="docutils literal">del</tt> statement does <strong>not</strong> delete the object referred to.</p>
<p>If name is listed in a <tt class="docutils literal">global</tt> statement, then <tt class="docutils literal">del</tt> removes
name from the global namespace.</p>
<p>Names can be a (nested) list.  Examples:</p>
<pre class="literal-block">
&gt;&gt;&gt; del a
&gt;&gt;&gt; del a, b, c
</pre>
<p>We can also delete items from a list or dictionary (and perhaps from
other objects that we can subscript).  Examples:</p>
<pre class="literal-block">
In [9]:d = {'aa': 111, 'bb': 222, 'cc': 333}
In [10]:print d
{'aa': 111, 'cc': 333, 'bb': 222}
In [11]:del d['bb']
In [12]:print d
{'aa': 111, 'cc': 333}
In [13]:
In [13]:a = [111, 222, 333, 444]
In [14]:print a
[111, 222, 333, 444]
In [15]:del a[1]
In [16]:print a
[111, 333, 444]
</pre>
<p>And, we can delete an attribute from an instance.  Example:</p>
<pre class="literal-block">
In [17]:class A:
   ....:    pass
   ....:
In [18]:a = A()
In [19]:a.x = 123
In [20]:dir(a)
Out[20]:['__doc__', '__module__', 'x']
In [21]:print a.x
123
In [22]:del a.x
In [23]:dir(a)
Out[23]:['__doc__', '__module__']
In [24]:print a.x
----------------------------------------------
exceptions.AttributeError     Traceback (most recent call last)

/home/dkuhlman/a1/Python/Test/&lt;console&gt;

AttributeError: A instance has no attribute 'x'
</pre>
</div>
<div class="section" id="assert-statement">
<h2><a class="toc-backref" href="#id47">6.12&nbsp;&nbsp;&nbsp;assert statement</a></h2>
<p>The assert statement enables to check for error and abnormal
conditions.</p>
<p>Here is an example:</p>
<pre class="literal-block">
def test(value):
    assert value % 2 == 0
    print 'value:', value

def main():
    print '__debug__:', __debug__
    test(4)
    test(3)

if __name__ == '__main__':
    main()
</pre>
<p>Notes:</p>
<ul>
<li><p class="first">The above code will produce an <tt class="docutils literal">AssertionError</tt> exception when
<tt class="docutils literal">test(3)</tt> is called.</p>
</li>
<li><p class="first">Assertions are checked only when the <tt class="docutils literal">__debug__</tt> builtin
variable is True.  Turn it off and optimize compiled code by
running Python with the <tt class="docutils literal"><span class="pre">-O</span></tt> command line option.  Example:</p>
<pre class="literal-block">
$ python -O myscript.py
</pre>
</li>
<li><p class="first">See:
<a class="reference external" href="http://docs.python.org/2/reference/simple_stmts.html#the-assert-statement">http://docs.python.org/2/reference/simple_stmts.html#the-assert-statement</a></p>
</li>
</ul>
</div>
<div class="section" id="case-statement">
<h2><a class="toc-backref" href="#id48">6.13&nbsp;&nbsp;&nbsp;case statement</a></h2>
<p>There is no case statement in Python.  Use the <tt class="docutils literal">if:</tt> statement
with a sequence of <tt class="docutils literal">elif:</tt> clauses.</p>
<p>Or, use a dictionary of functions.  Example:</p>
<pre class="literal-block">
def f():
    print 'hi'

def g():
    print 'bye'

Funcs = {'say-hi': f, 'say-bye': g}

def run_task(task):
    Funcs[task]()

def test():
    run_task('say-hi')
    run_task('say-bye')

test()
</pre>
<p>And, if we run the above, we see:</p>
<pre class="literal-block">
$ python say_hi_bye.py
hi
bye
</pre>
</div>
</div>
<div class="section" id="functions-modules-packages-and-debugging">
<h1><a class="toc-backref" href="#id49">7&nbsp;&nbsp;&nbsp;Functions, Modules, Packages, and Debugging</a></h1>
<div class="section" id="functions">
<h2><a class="toc-backref" href="#id50">7.1&nbsp;&nbsp;&nbsp;Functions</a></h2>
<div class="section" id="the-def-statement">
<h3><a class="toc-backref" href="#id51">7.1.1&nbsp;&nbsp;&nbsp;The def statement</a></h3>
<p>The <tt class="docutils literal">def</tt> statement is used to define functions and methods.</p>
<p>The <tt class="docutils literal">def</tt> statement is evaluated.  It produces a function/method
(object) and binds it to a variable in the current name-space.</p>
<p>Although the <tt class="docutils literal">def</tt> statement is evaluated, the code in its nested
block is not executed.  Therefore, many errors may not be detected
until each and every path through that code is tested.
Recommendations: (1) Use a Python code checker, for example
<tt class="docutils literal">flake8</tt> or <tt class="docutils literal">pylint</tt>; (2) Do thorough testing and use the Python
<tt class="docutils literal">unittest</tt> framework.  Pythonic wisdom: If it's not tested, it's
broken.</p>
</div>
<div class="section" id="returning-values">
<h3><a class="toc-backref" href="#id52">7.1.2&nbsp;&nbsp;&nbsp;Returning values</a></h3>
<p>The <tt class="docutils literal">return</tt> statement is used to return values from a function.</p>
<p>The <tt class="docutils literal">return</tt> statement takes zero or more values, separated by
commas.  Using commas actually returns a single tuple.</p>
<p>The default value is <tt class="docutils literal">None</tt>.</p>
<p>To return multiple values, use a tuple or list.  Don't forget that
(assignment) unpacking can be used to capture multiple values.
Returning multiple items separated by commas is equivalent to
returning a tuple.  Example:</p>
<pre class="literal-block">
In [8]: def test(x, y):
   ...:     return x * 3, y * 4
   ...:
In [9]: a, b = test(3, 4)
In [10]: print a
9
In [11]: print b
16
</pre>
</div>
<div class="section" id="parameters">
<h3><a class="toc-backref" href="#id53">7.1.3&nbsp;&nbsp;&nbsp;Parameters</a></h3>
<p>Default values -- Example:</p>
<pre class="literal-block">
In [53]: def t(max=5):
   ....:     for val in range(max):
   ....:         print val
   ....:
   ....:
In [54]: t(3)
0
1
2
In [55]: t()
0
1
2
3
4
</pre>
<p>Giving a parameter a default value makes that parameter optional.</p>
<p>Note: If a function has a parameter with a default value, then all
&quot;normal&quot; arguments must proceed the parameters with default values.
More completely, parameters must be given from left to right in the
following order:</p>
<ol class="arabic simple">
<li>Normal arguments.</li>
<li>Arguments with default values.</li>
<li>Argument list (<tt class="docutils literal">*args</tt>).</li>
<li>Keyword arguments (<tt class="docutils literal">**kwargs</tt>).</li>
</ol>
<p>Extra parameters -- <tt class="docutils literal">*args</tt>.  It's a tuple.</p>
<p>Keyword parameters -- <tt class="docutils literal">**kwargs</tt>.  It's a dictionary.</p>
</div>
<div class="section" id="arguments">
<h3><a class="toc-backref" href="#id54">7.1.4&nbsp;&nbsp;&nbsp;Arguments</a></h3>
<p>When calling a function, values may be passed to a function with
positional arguments or keyword arguments.</p>
<p>Positional arguments must placed before (to the left of) keyword
arguments.</p>
<p>Passing lists and dictionaries to a function as multiple arguments --
<tt class="docutils literal"><span class="pre">some_func(*aList)</span></tt>.  Effectively, this syntax causes Python to
unroll the arguments.  Example:</p>
<pre class="literal-block">
def fn1(*args, **kwargs):
    fn2(*args, **kwargs)
</pre>
</div>
<div class="section" id="local-variables">
<h3><a class="toc-backref" href="#id55">7.1.5&nbsp;&nbsp;&nbsp;Local variables</a></h3>
<p>Creating local variables -- Any binding operation creates a local
variable.  Examples are (1) parameters of a function; (2) assignment
to a variable in a function; (3) the <tt class="docutils literal">import</tt> statement; (4) etc.
Contrast with accessing a variable.</p>
<p>Variable look-up -- The LGB/LEGB rule -- The local, enclosing,
global, built-in scopes are searched in that order.  See:
<a class="reference external" href="http://www.python.org/dev/peps/pep-0227/">http://www.python.org/dev/peps/pep-0227/</a></p>
<p>The <tt class="docutils literal">global</tt> statement -- Inside a function, we must use
<tt class="docutils literal">global</tt> when we want to set the value of a global variable.
Example:</p>
<pre class="literal-block">
Some_global_variable = 'nil'
Another_global_variable = 'nil'

def fn():
    global Some_global_variable, Another_global_variable
    Some_global_variable = 'hello'
    ...
</pre>
<p>Another example:</p>
<pre class="literal-block">
def set_globals1(x, y):
    print x, y
    global Gx
    Gx = x
    global Gy
    Gy = y

def set_globals2(x, y):
    global Gx, Gy
    print x, y
    Gx = x
    Gy = y
</pre>
<p>The <tt class="docutils literal">global</tt> statement should be lexically before first use of
variables mentioned in it.</p>
<p>But in the following example, the <tt class="docutils literal">global</tt> statement is not
needed.  We need <tt class="docutils literal">global</tt> when we assign or bind a new value to a
global variable.</p>
<pre class="literal-block">
Gz = []

def set_globals3(x):
    # global statement not needed
    # global Gz
    Gz.append(x)
</pre>
</div>
<div class="section" id="other-things-to-know-about-functions">
<h3><a class="toc-backref" href="#id56">7.1.6&nbsp;&nbsp;&nbsp;Other things to know about functions</a></h3>
<ul>
<li><p class="first">Functions are first-class -- You can store them in a structure,
pass them to a function, and return them from a function.</p>
</li>
<li><p class="first">Function calls can take keyword arguments.  Example:</p>
<pre class="literal-block">
&gt;&gt;&gt; test(size=25)
</pre>
</li>
<li><p class="first">Formal parameters to a function can have default values.  Example:</p>
<pre class="literal-block">
&gt;&gt;&gt; def test(size=0):
        ...
</pre>
<p>Do <em>not</em> use mutable objects as default values.</p>
</li>
<li><p class="first">You can &quot;capture&quot; remaining arguments with <tt class="docutils literal">*args</tt>, and
<tt class="docutils literal">**kwargs</tt>. (Spelling is not significant.)  Example:</p>
<pre class="literal-block">
In [13]: def test(size, *args, **kwargs):
   ....:     print size
   ....:     print args
   ....:     print kwargs
   ....:
   ....:
In [14]: test(32, 'aa', 'bb', otherparam='xyz')
32
('aa', 'bb')
{'otherparam': 'xyz'}
</pre>
</li>
<li><p class="first">Normal arguments must come before default arguments which must
come before keyword arguments.</p>
</li>
<li><p class="first">A function that does not explicitly return a value, returns
<tt class="docutils literal">None</tt>.</p>
</li>
<li><p class="first">In order to <em>set</em> the value of a global variable, declare the
variable with <tt class="docutils literal">global</tt>.</p>
</li>
</ul>
<p>Exercises:</p>
<ul>
<li><p class="first">Write a function that takes a single argument, prints the value
of the argument, and returns the argument as a string.  Solution:</p>
<pre class="literal-block">
&gt;&gt;&gt; def t(x):
...     print 'x: %s' % x
...     return '[[%s]]' % x
...
&gt;&gt;&gt; t(3)
x: 3
'[[3]]'
</pre>
</li>
<li><p class="first">Write a function that takes a variable number of arguments and
prints them all.  Solution:</p>
<pre class="literal-block">
&gt;&gt;&gt; def t(*args):
...     for arg in args:
...         print 'arg: %s' % arg
...
&gt;&gt;&gt; t('aa', 'bb', 'cc')
arg: aa
arg: bb
arg: cc
</pre>
</li>
<li><p class="first">Write a function that prints the names and values of keyword
arguments passed to it.  Solution:</p>
<pre class="literal-block">
&gt;&gt;&gt; def t(**kwargs):
...     for key in kwargs.keys():
...         print 'key: %s  value: %s' % (key, kwargs[key], )
...
&gt;&gt;&gt; t(arg1=11, arg2=22)
key: arg1  value: 11
key: arg2  value: 22
</pre>
</li>
</ul>
</div>
<div class="section" id="global-variables-and-the-global-statement">
<h3><a class="toc-backref" href="#id57">7.1.7&nbsp;&nbsp;&nbsp;Global variables and the global statement</a></h3>
<p>By default, assignment in a function or method creates local
variables.</p>
<p>Reference (not assignment) to a variable, accesses a local
variable if it has already been created, else accesses a global
variable.</p>
<p>In order to assign a value to a global variable, declare the
variable as global at the beginning of the function or method.</p>
<p>If in a function or method, you both reference and assign to a
variable, then you must either:</p>
<ol class="arabic simple">
<li>Assign to the variable first, or</li>
<li>Declare the variable as global.</li>
</ol>
<p>The <tt class="docutils literal">global</tt> statement declares one or more variables, separated
by commas, to be global.</p>
<p>Some examples:</p>
<pre class="literal-block">
In [1]:
In [1]: X = 3
In [2]: def t():
   ...:       print X
   ...:
In [3]:
In [3]: t()
3
In [4]: def s():
   ...:      X = 4
   ...:
In [5]:
In [5]:
In [5]: s()
In [6]: t()
3
In [7]: X = -1
In [8]: def u():
   ...:      global X
   ...:      X = 5
   ...:
In [9]:
In [9]: u()
In [10]: t()
5
In [16]: def v():
   ....:     x = X
   ....:     X = 6
   ....:     return x
   ....:
In [17]:
In [17]: v()
------------------------------------------------------------
Traceback (most recent call last):
  File &quot;&lt;ipython console&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;&lt;ipython console&gt;&quot;, line 2, in v
UnboundLocalError: local variable 'X' referenced before assignment
In [18]: def w():
   ....:     global X
   ....:     x = X
   ....:     X = 7
   ....:     return x
   ....:
In [19]:
In [19]: w()
Out[19]: 5
In [20]: X
Out[20]: 7
</pre>
</div>
<div class="section" id="docstrings-for-functions">
<h3><a class="toc-backref" href="#id58">7.1.8&nbsp;&nbsp;&nbsp;Docstrings for functions</a></h3>
<p>Add docstrings as a triple-quoted string beginning with the first
line of a function or method.  See section <a class="reference internal" href="#docstrings-for-classes">Docstrings for classes</a>
for more information on docstrings.</p>
</div>
<div class="section" id="decorators-for-functions">
<h3><a class="toc-backref" href="#id59">7.1.9&nbsp;&nbsp;&nbsp;Decorators for functions</a></h3>
<p>A decorator performs a transformation on a function.  Examples of
decorators that are built-in functions are: <tt class="docutils literal">&#64;classmethod</tt>,
<tt class="docutils literal">&#64;staticmethod</tt>, and <tt class="docutils literal">&#64;property</tt>.  See:
<a class="reference external" href="http://docs.python.org/2/library/functions.html#built-in-functions">http://docs.python.org/2/library/functions.html#built-in-functions</a></p>
<p>A decorator is applied using the &quot;&#64;&quot; character on a line immediately
preceeding the function definition header.  Examples:</p>
<pre class="literal-block">
class SomeClass(object):

    &#64;classmethod
    def HelloClass(cls, arg):
        pass
    ## HelloClass = classmethod(HelloClass)

    &#64;staticmethod
    def HelloStatic(arg):
        pass
    ## HelloStatic = staticmethod(HelloStatic)

#
# Define/implement a decorator.
def wrapper(fn):
    def inner_fn(*args, **kwargs):
        print '&gt;&gt;'
        result = fn(*args, **kwargs)
        print '&lt;&lt;'
        return result
    return inner_fn

#
# Apply a decorator.
&#64;wrapper
def fn1(msg):
    pass
## fn1 = wrapper(fn1)
</pre>
<p>Notes:</p>
<ul class="simple">
<li>The decorator form (with the &quot;&#64;&quot; character) is equivalent to the
form (commented out) that calls the decorator function explicitly.</li>
<li>The use of <tt class="docutils literal">classmethods</tt> and <tt class="docutils literal">staticmethod</tt> will be explained
later in the section on object-oriented programming.</li>
<li>A decorator is implemented as a function.  Therefore, to learn
about some specific decorator, you should search for the
documentation on or the implementation of that function.  Remember
that in order to use a function, it must be defined in the current
module or imported by the current module or be a built-in.</li>
<li>The form that explicitly calls the decorator function (commented
out in the example above) is equivalent to the form using the &quot;&#64;&quot;
character.</li>
</ul>
</div>
</div>
<div class="section" id="lambda">
<h2><a class="toc-backref" href="#id60">7.2&nbsp;&nbsp;&nbsp;lambda</a></h2>
<p>Use a lambda, as a convenience, when you need a function that both:</p>
<ul class="simple">
<li>is anonymous (does not need a name) and</li>
<li>contains only an expression and no statements.  But, you can call
functions that contain statements, have side effects, etc.</li>
</ul>
<p>Example:</p>
<pre class="literal-block">
In [1]: fn = lambda x, y, z: (x ** 2) + (y * 2) + z
In [2]: fn(4, 5, 6)
Out[2]: 32
In [3]:
In [3]: format = lambda obj, category: 'The &quot;%s&quot; is a &quot;%s&quot;.' % (obj, category, )
In [4]: format('pine tree', 'conifer')
Out[4]: 'The &quot;pine tree&quot; is a &quot;conifer&quot;.'
</pre>
<p>A lambda can take multiple arguments and can return (like a
function) multiple values.  Example:</p>
<pre class="literal-block">
In [79]: a = lambda x, y: (x * 3, y * 4, (x, y))
In [80]:
In [81]: a(3, 4)
Out[81]: (9, 16, (3, 4))
</pre>
<p>Suggestion: In some cases, a lambda may be useful as an event
handler.</p>
<p>Example:</p>
<pre class="literal-block">
class Test:
    def __init__(self, first='', last=''):
        self.first = first
        self.last = last
    def test(self, formatter):
        &quot;&quot;&quot;
        Test for lambdas.
        formatter is a function taking 2 arguments, first and last
          names.  It should return the formatted name.
        &quot;&quot;&quot;
        msg = 'My name is %s' % (formatter(self.first, self.last),)
        print msg

def test():
    t = Test('Dave', 'Kuhlman')
    t.test(lambda first, last: '%s %s' % (first, last, ))
    t.test(lambda first, last: '%s, %s' % (last, first, ))

test()
</pre>
<p>A <tt class="docutils literal">lambda</tt> enables us to define &quot;functions&quot; where we do not need
names for those functions.  Example:</p>
<pre class="literal-block">
In [45]: a = [
   ....: lambda x: x,
   ....: lambda x: x * 2,
   ....: ]
In [46]:
In [46]: a
Out[46]: [&lt;function __main__.&lt;lambda&gt;&gt;, &lt;function __main__.&lt;lambda&gt;&gt;]
In [47]: a[0](3)
Out[47]: 3
In [48]: a[1](3)
Out[48]: 6
</pre>
<p>Reference:
<a class="reference external" href="http://docs.python.org/2/reference/expressions.html#lambda">http://docs.python.org/2/reference/expressions.html#lambda</a></p>
</div>
<div class="section" id="iterators-and-generators">
<h2><a class="toc-backref" href="#id61">7.3&nbsp;&nbsp;&nbsp;Iterators and generators</a></h2>
<p>Concepts:</p>
<dl class="docutils">
<dt>iterator</dt>
<dd>And iterator is something that satisfies the iterator protocol.
Clue: If it's an iterator, you can use it in a <tt class="docutils literal">for:</tt>
statement.</dd>
<dt>generator</dt>
<dd>A generator is a class or function that implements an
iterator, i.e. that implements the iterator protocol.</dd>
<dt>the iterator protocol</dt>
<dd><p class="first">An object satisfies the iterator protocol if it does the
following:</p>
<ul class="last simple">
<li>It implements a <tt class="docutils literal">__iter__</tt> method, which returns an iterator
object.</li>
<li>It implements a <tt class="docutils literal">next</tt> function, which returns the next item
from the collection, sequence, stream, etc of items to be
iterated over</li>
<li>It raises the <tt class="docutils literal">StopIteration</tt> exception when the items are
exhausted and the <tt class="docutils literal">next()</tt> method is called.</li>
</ul>
</dd>
<dt><tt class="docutils literal">yield</tt></dt>
<dd>The <tt class="docutils literal">yield</tt> statement enables us to write functions that are
generators.  Such functions may be similar to coroutines, since
they may &quot;yield&quot; multiple times and are resumed.</dd>
</dl>
<p>For more information on iterators, see <a class="reference external" href="http://docs.python.org/2/library/stdtypes.html#iterator-types">the section on iterator
types in the Python Library Reference --
http://docs.python.org/2/library/stdtypes.html#iterator-types</a>.</p>
<p>For more on the <tt class="docutils literal">yield</tt> statement, see:
<a class="reference external" href="http://docs.python.org/2/reference/simple_stmts.html#the-yield-statement">http://docs.python.org/2/reference/simple_stmts.html#the-yield-statement</a></p>
<p>Actually, <tt class="docutils literal">yield</tt> is an expression.  For more on yield expressions
and on the <tt class="docutils literal">next()</tt> and <tt class="docutils literal">send()</tt> generator methods, as well as
others, see: <a class="reference external" href="http://docs.python.org/2/reference/expressions.html#yield-expressions">Yield expression --
http://docs.python.org/2/reference/expressions.html#yield-expressions</a>
in the Python
language reference manual.</p>
<p>A function or method containing a <tt class="docutils literal">yield</tt> statement implements a
generator.  Adding the <tt class="docutils literal">yield</tt> statement to a function or method
turns that function or method into one which, when called, returns
a generator, i.e. an object that implements the iterator protocol.</p>
<p>A generator (a function containing <tt class="docutils literal">yield</tt>) provides a convenient
way to implement a filter.  But, also consider:</p>
<ul class="simple">
<li>The <tt class="docutils literal">filter()</tt> built-in function</li>
<li>List comprehensions with an <tt class="docutils literal">if</tt> clause</li>
</ul>
<p>Here are a few examples:</p>
<pre class="literal-block">
def simplegenerator():
    yield 'aaa'                          # Note 1
    yield 'bbb'
    yield 'ccc'

def list_tripler(somelist):
    for item in somelist:
        item *= 3
        yield item

def limit_iterator(somelist, max):
    for item in somelist:
        if item &gt; max:
            return                       # Note 2
        yield item

def test():
    print '1.', '-' * 30
    it = simplegenerator()
    for item in it:
        print item
    print '2.', '-' * 30
    alist = range(5)
    it = list_tripler(alist)
    for item in it:
        print item
    print '3.', '-' * 30
    alist = range(8)
    it = limit_iterator(alist, 4)
    for item in it:
        print item
    print '4.', '-' * 30
    it = simplegenerator()
    try:
        print it.next()                  # Note 3
        print it.next()
        print it.next()
        print it.next()
    except StopIteration, exp:           # Note 4
        print 'reached end of sequence'

if __name__ == '__main__':
    test()
</pre>
<p>Notes:</p>
<ol class="arabic simple">
<li>The <tt class="docutils literal">yield</tt> statement returns a value.  When the next item is
requested and the iterator is &quot;resumed&quot;, execution continues
immediately after the <tt class="docutils literal">yield</tt> statement.</li>
<li>We can terminate the sequence generated by an iterator by using a
<tt class="docutils literal">return</tt> statement with no value.</li>
<li>To resume a generator, use the generator's <tt class="docutils literal">next()</tt> or
<tt class="docutils literal">send()</tt> methods.  <tt class="docutils literal">send()</tt> is like <tt class="docutils literal">next()</tt>, but provides
a value to the yield expression.</li>
<li>We can alternatively obtain the items in a sequence by calling
the iterator's <tt class="docutils literal">next()</tt> method.  Since an iterator is a
first-class object, we can save it in a data structure and can
pass it around for use at different locations and times in our
program.</li>
<li>When an iterator is exhausted or empty, it throws the
<tt class="docutils literal">StopIteration</tt> exception, which we can catch by using a
<tt class="docutils literal">try:</tt> statement.</li>
</ol>
<p>And here is the output from running the above example:</p>
<pre class="literal-block">
$ python test_iterator.py
1. ------------------------------
aaa
bbb
ccc
2. ------------------------------
0
3
6
9
12
3. ------------------------------
0
1
2
3
4
4. ------------------------------
aaa
bbb
ccc
reached end of sequence
</pre>
<p>An instance of a class which implements the iterator protocol is
iterable.  For example, it can be used in a <tt class="docutils literal">for</tt> statement or in
a list comprehension, or in a generator expression, or as an
argument to the <tt class="docutils literal">iter()</tt> built-in method.  For more on the
iterator protocol, see:
<a class="reference external" href="http://docs.python.org/2/library/stdtypes.html#iterator-types">http://docs.python.org/2/library/stdtypes.html#iterator-types</a></p>
<p>Note that the iterator protocol has changed in Python 3.  See:
<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#iterator-types">http://docs.python.org/3/library/stdtypes.html#iterator-types</a></p>
<p>Examples -- The following code implements an iterator that
produces all the objects in a tree of objects:</p>
<pre class="literal-block">
class Node:
    def __init__(self, data, children=None):
        self.initlevel = 0
        self.data = data
        if children is None:
            self.children = []
        else:
            self.children = children
    def set_initlevel(self, initlevel): self.initlevel = initlevel
    def get_initlevel(self): return self.initlevel
    def addchild(self, child):
        self.children.append(child)
    def get_data(self):
        return self.data
    def get_children(self):
        return self.children
    def show_tree(self, level):
        self.show_level(level)
        print 'data: %s' % (self.data, )
        for child in self.children:
            child.show_tree(level + 1)
    def show_level(self, level):
        print '   ' * level,
    #
    # Generator method #1
    # This generator turns instances of this class into iterable objects.
    #
    def walk_tree(self, level):
        yield (level, self, )
        for child in self.get_children():
            for level1, tree1 in child.walk_tree(level+1):
                yield level1, tree1
    def __iter__(self):
        return self.walk_tree(self.initlevel)


#
# Generator method #2
# This generator uses a support function (walk_list) which calls
#   this function to recursively walk the tree.
# If effect, this iterates over the support function, which
#   iterates over this function.
#
def walk_tree(tree, level):
    yield (level, tree)
    for child in walk_list(tree.get_children(), level+1):
        yield child

def walk_list(trees, level):
    for tree in trees:
        for tree in walk_tree(tree, level):
            yield tree


#
# Generator method #3
# This generator is like method #2, but calls itself (as an iterator),
#   rather than calling a support function.
#
def walk_tree_recur(tree, level):
    yield (level, tree,)
    for child in tree.get_children():
        for level1, tree1 in walk_tree_recur(child, level+1):
            yield (level1, tree1, )


def show_level(level):
    print '   ' * level,


def test():
    a7 = Node('777')
    a6 = Node('666')
    a5 = Node('555')
    a4 = Node('444')
    a3 = Node('333', [a4, a5])
    a2 = Node('222', [a6, a7])
    a1 = Node('111', [a2, a3])
    initLevel = 2
    a1.show_tree(initLevel)
    print '=' * 40
    for level, item in walk_tree(a1, initLevel):
        show_level(level)
        print 'item:', item.get_data()
    print '=' * 40
    for level, item in walk_tree_recur(a1, initLevel):
        show_level(level)
        print 'item:', item.get_data()
    print '=' * 40
    a1.set_initlevel(initLevel)
    for level, item in a1:
        show_level(level)
        print 'item:', item.get_data()
    iter1 = iter(a1)
    print iter1
    print iter1.next()
    print iter1.next()
    print iter1.next()
    print iter1.next()
    print iter1.next()
    print iter1.next()
    print iter1.next()
##    print iter1.next()
    return a1

if __name__ == '__main__':
    test()
</pre>
<p>Notes:</p>
<ul class="simple">
<li>An instance of class <tt class="docutils literal">Node</tt> is &quot;iterable&quot;.  It can be used
directly in a <tt class="docutils literal">for</tt> statement, a list comprehension, etc.  So,
for example, when an instance of <tt class="docutils literal">Node</tt> is used in a <tt class="docutils literal">for</tt>
statement, it produces an iterator.</li>
<li>We could also call the <tt class="docutils literal">Node.walk_method</tt> directly to obtain
an iterator.</li>
<li>Method <tt class="docutils literal">Node.walk_tree</tt> and functions <tt class="docutils literal">walk_tree</tt> and
<tt class="docutils literal">walk_tree_recur</tt> are generators.  When called, they return an
iterator.  They do this because they each contain a <tt class="docutils literal">yield</tt>
statement.</li>
<li>These methods/functions are recursive.  They call themselves.
Since they are generators, they must call themselves in a context
that uses an iterator, for example in a <tt class="docutils literal">for</tt> statement.</li>
</ul>
</div>
<div class="section" id="modules">
<h2><a class="toc-backref" href="#id62">7.4&nbsp;&nbsp;&nbsp;Modules</a></h2>
<p>A module is a Python source code file.</p>
<p>A module can be imported.  When imported, the module is evaluated,
and a module object is created.  The module object has
attributes. The following attributes are of special interest:</p>
<ul class="simple">
<li><tt class="docutils literal">__doc__</tt> -- The docstring of the module.</li>
<li><tt class="docutils literal">__name__</tt> -- The name of the module when the module is
imported, but the string &quot;__main__&quot; when the module is executed.</li>
<li>Other names that are created (bound) in the module.</li>
</ul>
<p>A module can be run.</p>
<p>To make a module both import-able and run-able, use the following
idiom (at the end of the module):</p>
<pre class="literal-block">
def main():
    o
    o
    o

if __name__ == '__main__':
    main()
</pre>
<p>Where Python looks for modules:</p>
<ul class="simple">
<li>See <tt class="docutils literal">sys.path</tt>.</li>
<li>Standard places.</li>
<li>Environment variable <tt class="docutils literal">PYTHONPATH</tt>.</li>
</ul>
<p>Notes about modules and objects:</p>
<ul class="simple">
<li>A module is an object.</li>
<li>A module (object) can be shared.</li>
<li>A specific module is imported only once in a single run.  This
means that a single module object is shared by all the modules
that import it.</li>
</ul>
<div class="section" id="docstrings-for-modules">
<h3><a class="toc-backref" href="#id63">7.4.1&nbsp;&nbsp;&nbsp;Docstrings for modules</a></h3>
<p>Add docstrings as a triple-quoted string at or near the top of the
file.  See section <a class="reference internal" href="#docstrings-for-classes">Docstrings for classes</a> for
more information on docstrings.</p>
</div>
</div>
<div class="section" id="packages">
<h2><a class="toc-backref" href="#id64">7.5&nbsp;&nbsp;&nbsp;Packages</a></h2>
<p>A package is a directory on the file system which contains a file
named <tt class="docutils literal">__init__.py</tt>.</p>
<p>The <tt class="docutils literal">__init__.py</tt> file:</p>
<ul>
<li><p class="first">Why is it there? -- It makes modules in the directory
&quot;import-able&quot;.</p>
</li>
<li><p class="first">Can <tt class="docutils literal">__init__.py</tt> be empty? -- Yes.  Or, just include a
comment.</p>
</li>
<li><p class="first">When is it evaluated? -- It is evaluated the first time that an
application imports anything from that directory/package.</p>
</li>
<li><p class="first">What can you do with it? -- Any code that should be executed
exactly once and during import.  For example:</p>
<ul class="simple">
<li>Perform initialization needed by the package.</li>
<li>Make variables, functions, classes, etc available.  For
example, when the package is imported rather than modules in
the package.  You can also expose objects defined in modules
contained in the package.</li>
</ul>
</li>
<li><p class="first">Define a variable named <tt class="docutils literal">__all__</tt> to specify the list of names
that will be imported by <tt class="docutils literal">from my_package import *</tt>.  For
example, if the following is present in
<tt class="docutils literal">my_package/__init__.py</tt>:</p>
<pre class="literal-block">
__all__ = ['func1', 'func2',]
</pre>
<p>Then, <tt class="docutils literal">from my_package import *</tt> will import <tt class="docutils literal">func1</tt> and
<tt class="docutils literal">func2</tt>, but not other names defined in <tt class="docutils literal">my_package</tt>.</p>
<p>Note that <tt class="docutils literal">__all__</tt> can be used at the module level, as well
as at the package level.</p>
</li>
</ul>
<p>For more information, see the section on packages in the Python
tutorial: <a class="reference external" href="http://docs.python.org/2/tutorial/modules.html#packages">http://docs.python.org/2/tutorial/modules.html#packages</a>.</p>
<p>Guidance and suggestions:</p>
<ul>
<li><p class="first">&quot;Flat is better&quot; -- Use the <tt class="docutils literal">__init__.py</tt> file to present a
&quot;flat&quot; view of the API for your code.  Enable your users to do
<tt class="docutils literal">import mypackage</tt> and then reference:</p>
<ul class="simple">
<li><tt class="docutils literal">mypackage.item1</tt></li>
<li><tt class="docutils literal">mypackage.item2</tt></li>
<li><tt class="docutils literal">mypackage.item3</tt></li>
<li>Etc.</li>
</ul>
<p>Where <tt class="docutils literal">item1</tt>, <tt class="docutils literal">item2</tt>, etc compose the API you want your
users to use, even though the implementation of these items may be
buried deep in your code.</p>
</li>
<li><p class="first">Use the <tt class="docutils literal">__init__.py</tt> module to present a &quot;clean&quot; API.  Present
only the items that you intend your users to use, and by doing so,
&quot;hide&quot; items you do <em>not</em> intend them to use.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="classes">
<h1><a class="toc-backref" href="#id65">8&nbsp;&nbsp;&nbsp;Classes</a></h1>
<p>Classes model the behavior of objects in the &quot;real&quot; world. Methods
implement the behaviors of these types of objects.  Member
variables hold (current) state.  Classes enable us to implement new
data types in Python.</p>
<p>The <tt class="docutils literal">class:</tt> statement is used to define a class.  The <tt class="docutils literal">class:</tt>
statement creates a class object and binds it to a name.</p>
<div class="section" id="a-simple-class">
<h2><a class="toc-backref" href="#id66">8.1&nbsp;&nbsp;&nbsp;A simple class</a></h2>
<pre class="literal-block">
In [104]: class A:
   .....:     pass
   .....:
In [105]: a = A()
</pre>
<p>To define a new style class (recommended), inherit from <tt class="docutils literal">object</tt> or
from another class that does.  Example:</p>
<pre class="literal-block">
In [21]: class A(object):
   ....:     pass
   ....:
In [22]:
In [22]: a = A()
In [23]: a
Out[23]: &lt;__main__.A object at 0x82fbfcc&gt;
</pre>
</div>
<div class="section" id="defining-methods">
<h2><a class="toc-backref" href="#id67">8.2&nbsp;&nbsp;&nbsp;Defining methods</a></h2>
<p>A method is a function defined in class scope and with first
parameter <tt class="docutils literal">self</tt>:</p>
<pre class="literal-block">
In [106]: class B(object):
   .....:     def show(self):
   .....:         print 'hello from B'
   .....:
In [107]: b = B()
In [108]: b.show()
hello from B
</pre>
<p>A method as we describe it here is more properly called an
<em>instance method</em>, in order to distinguish it from <em>class methods</em>
and <em>static methods</em>.</p>
</div>
<div class="section" id="the-constructor">
<h2><a class="toc-backref" href="#id68">8.3&nbsp;&nbsp;&nbsp;The constructor</a></h2>
<p>The constructor is a method named <tt class="docutils literal">__init__</tt>.</p>
<p>Exercise:  Define a class with a member variable <tt class="docutils literal">name</tt> and a
<tt class="docutils literal">show</tt> method.  Use <tt class="docutils literal">print</tt> to show the name.  Solution:</p>
<pre class="literal-block">
In [109]: class A(object):
   .....:       def __init__(self, name):
   .....:           self.name = name
   .....:       def show(self):
   .....:           print 'name: &quot;%s&quot;' % self.name
   .....:
In [111]: a = A('dave')
In [112]: a.show()
name: &quot;dave&quot;
</pre>
<p>Notes:</p>
<ul class="simple">
<li>The <tt class="docutils literal">self</tt> variable is explicit.  It references the current
object, that is the object whose method is currently executing.</li>
<li>The spelling (&quot;self&quot;) is optional, but <em>everyone</em> spells it that
way.</li>
</ul>
</div>
<div class="section" id="member-instance-variables">
<h2><a class="toc-backref" href="#id69">8.4&nbsp;&nbsp;&nbsp;Member/instance variables</a></h2>
<p>Defining instance (member) variables -- Member variables are created
with assignment.  Example:</p>
<pre class="literal-block">
class A(object):
    def __init__(self, name):
        self.name = name
</pre>
<p>A small gotcha -- Do this:</p>
<pre class="literal-block">
In [28]: class A(object):
   ....:     def __init__(self, items=None):
   ....:         if items is None:
   ....:             self.items = []
   ....:         else:
   ....:             self.items = items
</pre>
<p>Do <em>not</em> do this:</p>
<pre class="literal-block">
In [29]: class B:
   ....:     def __init__(self, items=[]):   # wrong.  list ctor evaluated only once.
   ....:         self.items = items
</pre>
<p>In the second example, the <tt class="docutils literal">def</tt> statement and the list
constructor are evaluated only once.  Therefore, the item member
variable of all instances of class B, will share the same value,
which is most likely <em>not</em> what you want.</p>
</div>
<div class="section" id="calling-methods">
<h2><a class="toc-backref" href="#id70">8.5&nbsp;&nbsp;&nbsp;Calling methods</a></h2>
<ul>
<li><p class="first">Use the instance and the dot operator.</p>
</li>
<li><p class="first">Calling a method defined in the same class or a superclass:</p>
<ul>
<li><p class="first">From outside the class -- Use the instance:</p>
<pre class="literal-block">
some_object.some_method()
an_array_of_of_objects[1].another_method()
</pre>
</li>
<li><p class="first">From within the same class -- Use <tt class="docutils literal">self</tt>:</p>
<pre class="literal-block">
self.a_method()
</pre>
</li>
<li><p class="first">From with a subclass when the method is in the superclass and
there is a method with the same name in the current class -- Use
the class (name) or use <tt class="docutils literal">super</tt>:</p>
<pre class="literal-block">
SomeSuperClass.__init__(self, arg1, arg2) super(CurrentClass,
self).__init__(arg1, arg2)
</pre>
</li>
</ul>
</li>
<li><p class="first">Calling a method defined in a specific superclass -- Use the
class (name).</p>
</li>
</ul>
</div>
<div class="section" id="adding-inheritance">
<h2><a class="toc-backref" href="#id71">8.6&nbsp;&nbsp;&nbsp;Adding inheritance</a></h2>
<p>Referencing superclasses -- Use the built-in <tt class="docutils literal">super</tt> or the
explicit name of the superclass.  Use of <tt class="docutils literal">super</tt> is preferred.
For example:</p>
<pre class="literal-block">
In [39]: class B(A):
   ....:     def __init__(self, name, size):
   ....:         super(B, self).__init__(name)
   ....:         # A.__init__(self, name)    # an older alternative form
   ....:         self.size = size
</pre>
<p>The use of <tt class="docutils literal">super()</tt> may solve problems searching for the base
class when using multiple inheritance.  A better solution is to not
use multiple inheritance.</p>
<p>You can also use multiple inheritance.  But, it can cause confusion.
For example, in the following, class C inherits from both A and B:</p>
<pre class="literal-block">
class C(A, B):
    ...
</pre>
<p>Python searches superclasses MRO (method resolution order).  If
only single inheritance is involved, there is little confusion.  If
multiple inheritance is being used, the search order of super
classes can get complex -- see here:
<a class="reference external" href="http://www.python.org/download/releases/2.3/mro">http://www.python.org/download/releases/2.3/mro</a></p>
<p>For more information on inheritance, see the tutorial in the
standard Python documentation set: <a class="reference external" href="http://docs.python.org/2/tutorial/classes.html#inheritance">9.5 Inheritance</a>
and <a class="reference external" href="http://docs.python.org/2/tutorial/classes.html#multiple-inheritance">9.5.1 Multiple Inheritance</a>.</p>
<p>Watch out for problems with inheriting from multiple classes that
have a common base class.  To avoid these problems, you may want to
consider using mixins -- see <a class="reference external" href="http://en.wikipedia.org/wiki/Mixin">http://en.wikipedia.org/wiki/Mixin</a>.
Or, perhaps, implement a &quot;has-a&quot; relationship, where an instance of
one class has or holds an instance of another class in an instance
variable, but does <em>not</em> inherit from that class.</p>
</div>
<div class="section" id="class-variables">
<h2><a class="toc-backref" href="#id72">8.7&nbsp;&nbsp;&nbsp;Class variables</a></h2>
<ul>
<li><p class="first">Also called static data.</p>
</li>
<li><p class="first">A class variable is shared by instances of the class.</p>
</li>
<li><p class="first">Define at class level with assignment.  Example:</p>
<pre class="literal-block">
class A(object):
    size = 5
    def get_size(self):
        return A.size
</pre>
</li>
<li><p class="first">Reference with <tt class="docutils literal">classname.variable</tt>.</p>
</li>
<li><p class="first">Caution: <tt class="docutils literal">self.variable = x</tt> creates a new member variable.</p>
</li>
<li><p class="first">In a <em>class method</em>, you can use the first parameter (usually &quot;cls&quot;)
to reference the class variable instead of using the hard coded
class name.  Example:</p>
<pre class="literal-block">
class A(object):
    size = -1

    &#64;classmethod
    def incr_size(cls, increment=1):
        cls.size += increment
</pre>
</li>
</ul>
</div>
<div class="section" id="class-methods-and-static-methods">
<h2><a class="toc-backref" href="#id73">8.8&nbsp;&nbsp;&nbsp;Class methods and static methods</a></h2>
<p>Instance (plain) methods:</p>
<ul class="simple">
<li>An instance method receives the instance as its first argument.</li>
<li>Therefore, an instance method has access to data specific to that
particular instance.</li>
</ul>
<p>Class methods:</p>
<ul class="simple">
<li>A class method receives the class as its first argument.</li>
<li>Define class methods with built-in function <tt class="docutils literal">classmethod()</tt> or
with decorator <tt class="docutils literal">&#64;classmethod</tt>.</li>
<li>See the description of <tt class="docutils literal">classmethod()</tt> built-in function at
&quot;Built-in Functions&quot;:
<a class="reference external" href="http://docs.python.org/2/library/functions.html#classmethod">http://docs.python.org/2/library/functions.html#classmethod</a></li>
</ul>
<p>Static methods:</p>
<ul class="simple">
<li>A static method receives neither the instance nor the class as its
first argument.</li>
<li>Define static methods with built-in function <tt class="docutils literal">staticmethod()</tt> or
with decorator <tt class="docutils literal">&#64;staticmethod</tt>.</li>
<li>See the description of <tt class="docutils literal">staticmethod()</tt> built-in function at
&quot;Built-in Functions&quot;:
<a class="reference external" href="http://docs.python.org/2/library/functions.html#staticmethod">http://docs.python.org/2/library/functions.html#staticmethod</a></li>
</ul>
<p>Notes on decorators:</p>
<ul>
<li><p class="first">A decorator of the form <tt class="docutils literal">&#64;afunc</tt> is the same as <tt class="docutils literal">m =
afunc(m)</tt>.  So, this:</p>
<pre class="literal-block">
&#64;afunc
def m(self): pass
</pre>
<p>is the same as:</p>
<pre class="literal-block">
def m(self): pass
m = afunc(m)
</pre>
</li>
<li><p class="first">You can use decorators <tt class="docutils literal">&#64;classmethod</tt> and <tt class="docutils literal">&#64;staticmethod</tt>
(instead of the <tt class="docutils literal">classmethod()</tt> and <tt class="docutils literal">staticmethod()</tt> built-in
functions) to declare class methods and static methods.</p>
</li>
</ul>
<p>Example:</p>
<pre class="literal-block">
class B(object):

    Count = 0

    def dup_string(x):
        s1 = '%s%s' % (x, x,)
        return s1
    dup_string = staticmethod(dup_string)

    &#64;classmethod
    def show_count(cls, msg):
        print '%s  %d' % (msg, cls.Count, )

def test():
    print B.dup_string('abcd')
    B.show_count('here is the count: ')
</pre>
<p>An alternative way to implement &quot;static methods&quot; -- Use a &quot;plain&quot;,
module-level function.  For example:</p>
<pre class="literal-block">
In [1]: def inc_count():
   ...:         A.count += 1
   ...:
In [2]:
In [2]: def dec_count():
   ...:         A.count -= 1
   ...:
In [3]:
In [3]: class A:
   ...:         count = 0
   ...:     def get_count(self):
   ...:             return A.count
   ...:
In [4]:
In [4]: a = A()
In [5]: a.get_count()
Out[5]: 0
In [6]:
In [6]:
In [6]: inc_count()
In [7]: inc_count()
In [8]: a.get_count()
Out[8]: 2
In [9]:
In [9]: b = A()
In [10]: b.get_count()
Out[10]: 2
</pre>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id74">8.9&nbsp;&nbsp;&nbsp;Properties</a></h2>
<p>The <tt class="docutils literal">property</tt> built-in decorator (and function) enables us to
write classes in a way that does not require a user of the class to
use getters and setters.  Example:</p>
<pre class="literal-block">
class TestProperty(object):
    def __init__(self, description):
        self._description = description

    def _set_description(self, description):
        print 'setting description'
        self._description = description

    def _get_description(self):
        print 'getting description'
        return self._description

    description = property(_get_description, _set_description)
</pre>
<p>The <tt class="docutils literal">property</tt> built-in function is also a decorator.  So, the
following is equivalent to the above example:</p>
<pre class="literal-block">
class TestProperty(object):
    def __init__(self, description):
        self._description = description

    &#64;property
    def description(self):
        print 'getting description'
        return self._description

    &#64;description.setter
    def description(self, description):
        print 'setting description'
        self._description = description
</pre>
<p>Notes:</p>
<ul class="simple">
<li>We mark the instance variable as private by prefixing it with and
underscore.</li>
<li>The name of the instance variable and the name of the property
must be different.  If they are not, we get recursion and an
error.</li>
</ul>
<p>For more information on properties, see
<a class="reference external" href="http://docs.python.org/2/library/functions.html#property">Built-in Functions -- properties --
http://docs.python.org/2/library/functions.html#property</a></p>
</div>
<div class="section" id="interfaces">
<h2><a class="toc-backref" href="#id75">8.10&nbsp;&nbsp;&nbsp;Interfaces</a></h2>
<p>In Python, to implement an interface is to implement a method with a
specific name and a specific arguments.</p>
<p>&quot;Duck typing&quot; -- If it walks like a duck and quacks like a duck ...</p>
<p>One way to define an &quot;interface&quot; is to define a class containing
methods that have a header and a docstring but no implementation.
Example:</p>
<pre class="literal-block">
class Sample(object):
    &quot;&quot;&quot;Demonstrate and interface definition.&quot;&quot;&quot;

    def display(self):
        &quot;&quot;&quot;Display the instance.&quot;&quot;&quot;
        pass

    def validate(self, severity=1):
        &quot;&quot;&quot;Validate the instance.&quot;&quot;&quot;
        pass
</pre>
<p>Additional notes on interfaces:</p>
<ul class="simple">
<li>Interfaces are not enforced.</li>
<li>A class does not have to implement <em>all</em> of an interface.</li>
</ul>
</div>
<div class="section" id="new-style-classes">
<h2><a class="toc-backref" href="#id76">8.11&nbsp;&nbsp;&nbsp;New-style classes</a></h2>
<p>A new-style class is one that subclasses <tt class="docutils literal">object</tt> or a class that
subclasses <tt class="docutils literal">object</tt> (that is, another new-style class).</p>
<p>You can subclass Python's built-in data-types.</p>
<ul>
<li><p class="first">A simple example -- the following class extends the list data-type:</p>
<pre class="literal-block">
class C(list):
  def get_len(self):
    return len(self)

c = C((11,22,33))
c.get_len()

c = C((11,22,33,44,55,66,77,88))
print c.get_len()
# Prints &quot;8&quot;.
</pre>
</li>
<li><p class="first">A slightly more complex example -- the following class extends the
dictionary data-type:</p>
<pre class="literal-block">
class D(dict):
    def __init__(self, data=None, name='no_name'):
        if data is None:
            data = {}
        dict.__init__(self, data)
        self.name = name
    def get_len(self):
        return len(self)
    def get_keys(self):
        content = []
        for key in self:
            content.append(key)
        contentstr = ', '.join(content)
        return contentstr
    def get_name(self):
        return self.name

def test():
    d = D({'aa': 111, 'bb':222, 'cc':333})
    # Prints &quot;3&quot;
    print d.get_len()
    # Prints &quot;'aa, cc, bb'&quot;
    print d.get_keys()
    # Prints &quot;no_name&quot;
    print d.get_name()
</pre>
</li>
</ul>
<p>Some things to remember about new-style classes:</p>
<ul class="simple">
<li>In order to be new-style, a class must inherit (directly or
indirectly) from <tt class="docutils literal">object</tt>.  Note that if you inherit from a
built-in type, you get this automatically.</li>
<li>New-style classes unify types and classes.</li>
<li>You can subclass (built-in) types such as dict, str, list,
file, etc.</li>
<li>The built-in types now provide factory functions: <tt class="docutils literal">dict()</tt>,
<tt class="docutils literal">str()</tt>, <tt class="docutils literal">int()</tt>, <tt class="docutils literal">file()</tt>, etc.</li>
<li>The built-in types are introspect-able -- Use <tt class="docutils literal">x.__class__</tt>,
<tt class="docutils literal">dir(x.__class__)</tt>, <tt class="docutils literal">isinstance(x, list)</tt>, etc.</li>
<li>New-style classes give you properties and descriptors.</li>
<li>New-style classes enable you to define static methods.
Actually, all classes enable you to do this.</li>
<li>A new-style class is a user-defined type. For an instance of a
new-style class x, <tt class="docutils literal">type(x)</tt> is the same as <tt class="docutils literal">x.__class__</tt>.</li>
</ul>
<p>For more on new-style classes, see:
<a class="reference external" href="http://www.python.org/doc/newstyle/">http://www.python.org/doc/newstyle/</a></p>
<p>Exercises:</p>
<ul>
<li><p class="first">Write a class and a subclass of this class.</p>
<ul class="simple">
<li>Give the superclass one member variable, a name, which can be
entered when an instance is constructed.</li>
<li>Give the subclass one member variable, a description; the
subclass constructor should allow entry of both name and
description.</li>
<li>Put a <tt class="docutils literal">show()</tt> method in the superclass and override the
<tt class="docutils literal">show()</tt> method in the subclass.</li>
</ul>
<p>Solution:</p>
<pre class="literal-block">
class A(object):
    def __init__(self, name):
        self.name = name
    def show(self):
        print 'name: %s' % (self.name, )

class B(A):
    def __init__(self, name, desc):
        A.__init__(self, name)
        self.desc = desc
    def show(self):
        A.show(self)
        print 'desc: %s' % (self.desc, )
</pre>
</li>
</ul>
</div>
<div class="section" id="docstrings-for-classes">
<h2><a class="toc-backref" href="#id77">8.12&nbsp;&nbsp;&nbsp;Docstrings for classes</a></h2>
<p>Add docstrings as a (triple-quoted) string beginning with the first
line of a class.</p>
<ul class="simple">
<li>See the &quot;Documentation Strings&quot; section of PEP 8, &quot;Style Guide for
Python Code&quot; for notes on docstrings:
<a class="reference external" href="http://www.python.org/dev/peps/pep-0008/#documentation-strings">http://www.python.org/dev/peps/pep-0008/#documentation-strings</a></li>
<li>And, PEP 257, &quot;Docstring Conventions&quot; has more information on
docstrings: <a class="reference external" href="http://www.python.org/dev/peps/pep-0257/">http://www.python.org/dev/peps/pep-0257/</a></li>
<li>See <tt class="docutils literal">epydoc</tt> for a suggested format: <a class="reference external" href="http://epydoc.sourceforge.net/">http://epydoc.sourceforge.net/</a></li>
<li>Also see &quot;Sphinx: Python Documentation Generator&quot;:
<a class="reference external" href="http://sphinx-doc.org/">http://sphinx-doc.org/</a></li>
</ul>
</div>
<div class="section" id="private-members">
<h2><a class="toc-backref" href="#id78">8.13&nbsp;&nbsp;&nbsp;Private members</a></h2>
<p>Add an leading underscore to a member name (method or data variable)
to &quot;suggest&quot; that the member is private.</p>
</div>
</div>
<div class="section" id="special-tasks">
<h1><a class="toc-backref" href="#id79">9&nbsp;&nbsp;&nbsp;Special Tasks</a></h1>
<div class="section" id="debugging-tools">
<h2><a class="toc-backref" href="#id80">9.1&nbsp;&nbsp;&nbsp;Debugging tools</a></h2>
<p><tt class="docutils literal">pdb</tt> -- The Python debugger:</p>
<ul>
<li><p class="first">Start the debugger by running an expression:</p>
<pre class="literal-block">
pdb.run('expression')
</pre>
<p>Example:</p>
<pre class="literal-block">
if __name__ == '__main__':
    import pdb
    pdb.run('main()')
</pre>
</li>
<li><p class="first">Start up the debugger at a specific location with the following:</p>
<pre class="literal-block">
import pdb; pdb.set_trace()
</pre>
<p>Example:</p>
<pre class="literal-block">
if __name__ == '__main__':
    import pdb
    pdb.set_trace()
    main()
</pre>
</li>
<li><p class="first">Get help from within the debugger.  For example:</p>
<pre class="literal-block">
(Pdb) help
(Pdb) help next
</pre>
</li>
</ul>
<p>Can also embed IPython into your code.  See
<a class="reference external" href="http://ipython.scipy.org/doc/manual/manual.html">http://ipython.scipy.org/doc/manual/manual.html</a>.</p>
<p><tt class="docutils literal">ipdb</tt> -- Also consider using <tt class="docutils literal">ipdb</tt> (and <tt class="docutils literal">IPython</tt>).  The
<tt class="docutils literal">ipdb</tt> debugger interactive prompt has some additional features,
for example, it does tab name completion.</p>
<p>Inspecting:</p>
<ul class="simple">
<li><tt class="docutils literal">import inspect</tt></li>
<li>See <a class="reference external" href="http://docs.python.org/lib/module-inspect.html">http://docs.python.org/lib/module-inspect.html</a>.</li>
<li>Don't forget to try <tt class="docutils literal">dir(obj)</tt> and <tt class="docutils literal">type(obj)</tt> and
<tt class="docutils literal">help(obj)</tt>, first.</li>
</ul>
<p>Miscellaneous tools:</p>
<ul class="simple">
<li><tt class="docutils literal">id(obj)</tt></li>
<li><tt class="docutils literal">globals()</tt> and <tt class="docutils literal">locals()</tt>.</li>
<li><tt class="docutils literal">dir(obj)</tt> -- Returns interesting names, but list is not
necessarily complete.</li>
<li><tt class="docutils literal">obj.__class__</tt></li>
<li><tt class="docutils literal">cls.__bases__</tt></li>
<li><tt class="docutils literal">obj.__class__.__bases__</tt></li>
<li><tt class="docutils literal">obj.__doc__</tt>.  But usually, <tt class="docutils literal">help(obj)</tt> is better.  It
produces the docstring.</li>
<li>Customize the representation of your class.  Define the
following methods in your class:<ul>
<li><tt class="docutils literal">__repr__()</tt> -- Called by (1) <tt class="docutils literal">repr()</tt>, (2) interactive
interpreter when representation is needed.</li>
<li><tt class="docutils literal">__str__()</tt> -- Called by (1) <tt class="docutils literal">str()</tt>, (2) string
formatting.</li>
</ul>
</li>
</ul>
<p><tt class="docutils literal">pdb</tt> is implemented with the <tt class="docutils literal">cmd</tt> module in the Python
standard library.  You can implement similar command line interfaces
by using <tt class="docutils literal">cmd</tt>.  See:
<a class="reference external" href="http://docs.python.org/lib/module-cmd.html">cmd -- Support for line-oriented command interpreters --
http://docs.python.org/lib/module-cmd.html</a>.</p>
</div>
<div class="section" id="code-checkers-for-python">
<h2><a class="toc-backref" href="#id81">9.2&nbsp;&nbsp;&nbsp;Code checkers for Python</a></h2>
<p>There are several good code, style, and syntax checkers for Python.
I can recommend <tt class="docutils literal">flake8</tt>, and you may also want to look at
<tt class="docutils literal">pylint</tt>:</p>
<ul class="simple">
<li><tt class="docutils literal">flake8</tt> -- <a class="reference external" href="https://pypi.python.org/pypi/flake8/">https://pypi.python.org/pypi/flake8/</a></li>
<li><tt class="docutils literal">pylint</tt> -- <a class="reference external" href="https://pypi.python.org/pypi/pylint/">https://pypi.python.org/pypi/pylint/</a></li>
</ul>
</div>
<div class="section" id="file-input-and-output">
<h2><a class="toc-backref" href="#id82">9.3&nbsp;&nbsp;&nbsp;File input and output</a></h2>
<p>Create a file object.  Use <tt class="docutils literal">open()</tt>.</p>
<p>This example reads and prints each line of a file:</p>
<pre class="literal-block">
def test():
    f = file('tmp.py', 'r')
    for line in f:
        print 'line:', line.rstrip()
    f.close()

test()
</pre>
<p>Notes:</p>
<ul>
<li><p class="first">A text file is an iterable.  It iterates over the lines in a
file.  The following is a common idiom:</p>
<pre class="literal-block">
infile = file(filename, 'r')
for line in infile:
    process_a_line(line)
infile.close()
</pre>
</li>
<li><p class="first"><tt class="docutils literal">string.rstrip()</tt> strips new-line and other whitespace from
the right side of each line.  To strip new-lines only, but not
other whitespace, try <tt class="docutils literal"><span class="pre">rstrip('\n')</span></tt>.</p>
</li>
<li><p class="first">Other ways of reading from a file/stream object:
<tt class="docutils literal">my_file.read()</tt>, <tt class="docutils literal">my_file.readline()</tt>, <tt class="docutils literal">my_file.readlines()</tt>,</p>
</li>
</ul>
<p>This example writes lines of text to a file:</p>
<pre class="literal-block">
def test():
    f = file('tmp.txt', 'w')
    for ch in 'abcdefg':
        f.write(ch * 10)
        f.write('\n')
    f.close()

test()
</pre>
<p>Notes:</p>
<ul class="simple">
<li>The <tt class="docutils literal">write</tt> method, unlike the <tt class="docutils literal">print</tt> statement, does not
automatically add new-line characters.</li>
<li>Must close file in order to flush output.  Or, use
<tt class="docutils literal">my_file.flush()</tt>.</li>
</ul>
<p>And, don't forget the <tt class="docutils literal">with:</tt> statement.  It makes closing files
automatic.  The following example converts all the vowels in an
input file to upper case and writes the converted lines to an output
file:</p>
<pre class="literal-block">
import string

def show_file(infilename, outfilename):
    tran_table = string.maketrans('aeiou', 'AEIOU')
    with open(infilename, 'r') as infile, open(outfilename, 'w') as outfile:
        for line in infile:
            line = line.rstrip()
            outfile.write('%s\n' % line.translate(tran_table))
</pre>
</div>
<div class="section" id="unit-tests">
<h2><a class="toc-backref" href="#id83">9.4&nbsp;&nbsp;&nbsp;Unit tests</a></h2>
<p>For more documentation on the unit test framework, see
<a class="reference external" href="http://docs.python.org/2/library/unittest.html#module-unittest">unittest -- Unit testing framework --
http://docs.python.org/2/library/unittest.html#module-unittest</a></p>
<p>For help and more information do the following at the Python
interactive prompt:</p>
<pre class="literal-block">
&gt;&gt;&gt; import unittest
&gt;&gt;&gt; help(unittest)
</pre>
<p>And, you can read the source: <tt class="docutils literal">Lib/unittest.py</tt> in the Python
standard library.</p>
<div class="section" id="a-simple-example">
<h3><a class="toc-backref" href="#id84">9.4.1&nbsp;&nbsp;&nbsp;A simple example</a></h3>
<p>Here is a very simple example.  You can find more information about
this primitive way of structuring unit tests in the library
documentation for the <tt class="docutils literal">unittest</tt> module
<a class="reference external" href="http://docs.python.org/lib/minimal-example.html">Basic example --
http://docs.python.org/lib/minimal-example.html</a></p>
<pre class="literal-block">
import unittest

class UnitTests02(unittest.TestCase):

    def testFoo(self):
        self.failUnless(False)

class UnitTests01(unittest.TestCase):

    def testBar01(self):
        self.failUnless(False)

    def testBar02(self):
        self.failUnless(False)

def main():
    unittest.main()

if __name__ == '__main__':
    main()
</pre>
<p>Notes:</p>
<ul>
<li><p class="first">The call to <tt class="docutils literal">unittest.main()</tt> runs all tests in all test
fixtures in the module.  It actually creates an instance of class
<tt class="docutils literal">TestProgram</tt> in module <tt class="docutils literal">Lib/unittest.py</tt>, which
automatically runs tests.</p>
</li>
<li><p class="first">Test fixtures are classes that inherit from
<tt class="docutils literal">unittest.TestCase</tt>.</p>
</li>
<li><p class="first">Within a test fixture (a class), the tests are any methods whose
names begin with the prefix &quot;test&quot;.</p>
</li>
<li><p class="first">In any test, we check for success or failure with inherited
methods such as <tt class="docutils literal">failIf()</tt>, <tt class="docutils literal">failUnless()</tt>,
<tt class="docutils literal">assertNotEqual()</tt>, etc.  For more on these methods, see the
library documentation for the
<tt class="docutils literal">unittest</tt> module <a class="reference external" href="http://docs.python.org/lib/testcase-objects.html">TestCase Objects --
http://docs.python.org/lib/testcase-objects.html</a>.</p>
</li>
<li><p class="first">If you want to change (1) the test method prefix or (2) the
function used to sort (the order of) execution of tests within a
test fixture, then you can create your own instance of class
<tt class="docutils literal">unittest.TestLoader</tt> and customize it.  For example:</p>
<pre class="literal-block">
def main():
    my_test_loader = unittest.TestLoader()
    my_test_loader.testMethodPrefix = 'check'
    my_test_loader.sortTestMethodsUsing = my_cmp_func
    unittest.main(testLoader=my_test_loader)

if __name__ == '__main__':
    main()
</pre>
<p><strong>But</strong>, see the notes in section <a class="reference internal" href="#additional-unittest-features">Additional unittest features</a>
for instructions on a (possibly) better way to do this.</p>
</li>
</ul>
</div>
<div class="section" id="unit-test-suites">
<h3><a class="toc-backref" href="#id85">9.4.2&nbsp;&nbsp;&nbsp;Unit test suites</a></h3>
<p>Here is another, not quite so simple, example:</p>
<pre class="literal-block">
#!/usr/bin/env python

import sys, popen2
import getopt
import unittest


class GenTest(unittest.TestCase):

    def test_1_generate(self):
        cmd = 'python ../generateDS.py -f -o out2sup.py -s out2sub.py people.xsd'
        outfile, infile = popen2.popen2(cmd)
        result = outfile.read()
        outfile.close()
        infile.close()
        self.failUnless(len(result) == 0)

    def test_2_compare_superclasses(self):
        cmd = 'diff out1sup.py out2sup.py'
        outfile, infile = popen2.popen2(cmd)
        outfile, infile = popen2.popen2(cmd)
        result = outfile.read()
        outfile.close()
        infile.close()
        #print 'len(result):', len(result)
        # Ignore the differing lines containing the date/time.
        #self.failUnless(len(result) &lt; 130 and result.find('Generated') &gt; -1)
        self.failUnless(check_result(result))

    def test_3_compare_subclasses(self):
        cmd = 'diff out1sub.py out2sub.py'
        outfile, infile = popen2.popen2(cmd)
        outfile, infile = popen2.popen2(cmd)
        result = outfile.read()
        outfile.close()
        infile.close()
        # Ignore the differing lines containing the date/time.
        #self.failUnless(len(result) &lt; 130 and result.find('Generated') &gt; -1)
        self.failUnless(check_result(result))


def check_result(result):
    flag1 = 0
    flag2 = 0
    lines = result.split('\n')
    len1 = len(lines)
    if len1 &lt;= 5:
        flag1 = 1
    s1 = '\n'.join(lines[:4])
    if s1.find('Generated') &gt; -1:
        flag2 = 1
    return flag1 and flag2


# Make the test suite.
def suite():
    # The following is obsolete.  See Lib/unittest.py.
    #return unittest.makeSuite(GenTest)
    loader = unittest.TestLoader()
    # or alternatively
    # loader = unittest.defaultTestLoader
    testsuite = loader.loadTestsFromTestCase(GenTest)
    return testsuite


# Make the test suite and run the tests.
def test():
    testsuite = suite()
    runner = unittest.TextTestRunner(sys.stdout, verbosity=2)
    runner.run(testsuite)


USAGE_TEXT = &quot;&quot;&quot;
Usage:
    python test.py [options]
Options:
    -h, --help      Display this help message.
Example:
    python test.py
&quot;&quot;&quot;

def usage():
    print USAGE_TEXT
    sys.exit(-1)


def main():
    args = sys.argv[1:]
    try:
        opts, args = getopt.getopt(args, 'h', ['help'])
    except:
        usage()
    relink = 1
    for opt, val in opts:
        if opt in ('-h', '--help'):
            usage()
    if len(args) != 0:
        usage()
    test()


if __name__ == '__main__':
    main()
    #import pdb
    #pdb.run('main()')
</pre>
<p>Notes:</p>
<ul class="simple">
<li><tt class="docutils literal">GenTest</tt> is our test suite class.  It inherits from
<tt class="docutils literal">unittest.TestCase</tt>.</li>
<li>Each method in <tt class="docutils literal">GenTest</tt> whose name begins with &quot;test&quot; will be
run as a test.</li>
<li>The tests are run in alphabetic order by method name.</li>
<li>Defaults in class <tt class="docutils literal">TestLoader</tt> for the test name prefix and
sort comparison function can be overridden. See
<a class="reference external" href="http://docs.python.org/lib/testloader-objects.html">5.3.8 TestLoader Objects</a> --
<a class="reference external" href="http://docs.python.org/lib/testloader-objects.html">http://docs.python.org/lib/testloader-objects.html</a>.</li>
<li>A test case class may also implement methods named <tt class="docutils literal">setUp()</tt>
and <tt class="docutils literal">tearDown()</tt> to be run before and after tests.  See
<a class="reference external" href="http://docs.python.org/lib/testcase-objects.html">5.3.5 TestCase Objects</a> --
<a class="reference external" href="http://docs.python.org/lib/testcase-objects.html">http://docs.python.org/lib/testcase-objects.html</a>.
Actually, the first test method in our example should, perhaps,
be a <tt class="docutils literal">setUp()</tt> method.</li>
<li>The tests use calls such as <tt class="docutils literal">self.failUnless()</tt> to report
errors.  These are inherited from class <tt class="docutils literal">TestCase</tt>.  See
<a class="reference external" href="http://docs.python.org/lib/testcase-objects.html">5.3.5 TestCase Objects</a> --
<a class="reference external" href="http://docs.python.org/lib/testcase-objects.html">http://docs.python.org/lib/testcase-objects.html</a>.</li>
<li>Function <tt class="docutils literal">suite()</tt> creates an instance of the test suite.</li>
<li>Function <tt class="docutils literal">test()</tt> runs the tests.</li>
</ul>
</div>
<div class="section" id="additional-unittest-features">
<h3><a class="toc-backref" href="#id86">9.4.3&nbsp;&nbsp;&nbsp;Additional unittest features</a></h3>
<p>And, the following example shows several additional features.  See
the notes that follow the code:</p>
<pre class="literal-block">
import unittest

class UnitTests02(unittest.TestCase):
    def testFoo(self):
        self.failUnless(False)
    def checkBar01(self):
        self.failUnless(False)


class UnitTests01(unittest.TestCase):
    # Note 1
    def setUp(self):
        print 'setting up UnitTests01'
    def tearDown(self):
        print 'tearing down UnitTests01'
    def testBar01(self):
        print 'testing testBar01'
        self.failUnless(False)
    def testBar02(self):
        print 'testing testBar02'
        self.failUnless(False)

def function_test_1():
    name = 'mona'
    assert not name.startswith('mo')

def compare_names(name1, name2):
    if name1 &lt; name2:
        return 1
    elif name1 &gt; name2:
        return -1
    else:
        return 0

def make_suite():
    suite = unittest.TestSuite()
    # Note 2
    suite.addTest(unittest.makeSuite(UnitTests01, sortUsing=compare_names))
    # Note 3
    suite.addTest(unittest.makeSuite(UnitTests02, prefix='check'))
    # Note 4
    suite.addTest(unittest.FunctionTestCase(function_test_1))
    return suite

def main():
    suite = make_suite()
    runner = unittest.TextTestRunner()
    runner.run(suite)

if __name__ == '__main__':
    main()
</pre>
<p>Notes:</p>
<ol class="arabic simple">
<li>If you run this code, you will notice that the <tt class="docutils literal">setUp</tt> and
<tt class="docutils literal">tearDown</tt> methods in class <tt class="docutils literal">UnitTests01</tt> are run before and
after each test in that class.</li>
<li>We can control the order in which tests are run by passing a
compare function to the <tt class="docutils literal">makeSuite</tt> function.  The default is
the <tt class="docutils literal">cmp</tt> built-in function.</li>
<li>We can control which methods in a test fixture are selected to be
run by passing the optional argument <tt class="docutils literal">prefix</tt> to the
<tt class="docutils literal">makeSuite</tt> function.</li>
<li>If we have an existing function that we want to &quot;wrap&quot; and run
as a unit test, we can create a test case from a function with
the <tt class="docutils literal">FunctionTestCase</tt> function.  If we do that, notice that
we use the <tt class="docutils literal">assert</tt> statement to test and possibly cause
failure.</li>
</ol>
</div>
<div class="section" id="guidance-on-unit-testing">
<h3><a class="toc-backref" href="#id87">9.4.4&nbsp;&nbsp;&nbsp;Guidance on Unit Testing</a></h3>
<p>Why should we use unit tests?  Many reasons, including:</p>
<ul class="simple">
<li>Without unit tests, corner cases may not be checked.  This is
especially important, since Python does relatively little
compile time error checking.</li>
<li>Unit tests facilitate a frequent and short design and implement
and release development cycle.  See
<a class="reference external" href="http://www.onlamp.com/pub/a/python/2001/03/28/pythonnews.html">ONLamp.com -- Extreme Python --
http://www.onlamp.com/pub/a/python/2001/03/28/pythonnews.html</a>
and
<a class="reference external" href="http://www.xprogramming.com/what_is_xp.htm">What is XP --
http://www.xprogramming.com/what_is_xp.htm</a>.</li>
<li>Designing the tests before writing the code is &quot;a good idea&quot;.</li>
</ul>
<p>Additional notes:</p>
<ul>
<li><p class="first">In a test class, instance methods <tt class="docutils literal">setUp</tt> and <tt class="docutils literal">tearDown</tt> are run
automatically before each and after each individual test.</p>
</li>
<li><p class="first">In a test class, class methods <tt class="docutils literal">setUpClass</tt> and <tt class="docutils literal">tearDownClass</tt> are run
automatically <em>once</em> before and after <em>all</em> the tests in a class.</p>
</li>
<li><p class="first">Module level functions <tt class="docutils literal">setUpModule</tt> and <tt class="docutils literal">tearDownModule</tt> are
run before and after any tests in a module.</p>
</li>
<li><p class="first">In some cases you can also run tests directly from the command
line.  Do the following for help:</p>
<pre class="literal-block">
$ python -m unittest --help
</pre>
</li>
</ul>
</div>
</div>
<div class="section" id="doctest">
<h2><a class="toc-backref" href="#id88">9.5&nbsp;&nbsp;&nbsp;doctest</a></h2>
<p>For simple test harnesses, consider using <tt class="docutils literal">doctest</tt>.  With
<tt class="docutils literal">doctest</tt> you can (1) run a test at the Python interactive
prompt, then (2) copy and paste that test into a docstring in
your module, and then (3) run the tests automatically from within
your module under <tt class="docutils literal">doctest</tt>.</p>
<p>There are examples and explanation in the standard Python
documentation:
<a class="reference external" href="http://docs.python.org/lib/module-doctest.html">5.2 doctest -- Test interactive Python examples</a> --
<a class="reference external" href="http://docs.python.org/lib/module-doctest.html">http://docs.python.org/lib/module-doctest.html</a>.</p>
<p>A simple way to use <tt class="docutils literal">doctest</tt> in your module:</p>
<ol class="arabic">
<li><p class="first">Run several tests in the Python interactive interpreter.  Note
that because <tt class="docutils literal">doctest</tt> looks for the interpreter's &quot;&gt;&gt;&gt;&quot;
prompt, you must use the standard interpreter, and not, for
example, IPython.  Also, make sure that you include a line with
the &quot;&gt;&gt;&gt;&quot; prompt after each set of results; this enables
<tt class="docutils literal">doctest</tt> to determine the extent of the test results.</p>
</li>
<li><p class="first">Use copy and paste, to insert the tests and their results from
your interactive session into the docstrings.</p>
</li>
<li><p class="first">Add the following code at the bottom of your module:</p>
<pre class="literal-block">
def _test():
    import doctest
    doctest.testmod()

if __name__ == &quot;__main__&quot;:
    _test()
</pre>
</li>
</ol>
<p>Here is an example:</p>
<pre class="literal-block">
def f(n):
    &quot;&quot;&quot;
    Print something funny.

    &gt;&gt;&gt; f(1)
    10
    &gt;&gt;&gt; f(2)
    -10
    &gt;&gt;&gt; f(3)
    0
    &quot;&quot;&quot;
    if n == 1:
        return 10
    elif n == 2:
        return -10
    else:
        return 0


def test():
    import doctest, test_doctest
    doctest.testmod(test_doctest)

if __name__ == '__main__':
    test()
</pre>
<p>And, here is the output from running the above test with the <tt class="docutils literal"><span class="pre">-v</span></tt>
flag:</p>
<pre class="literal-block">
$ python test_doctest.py -v
Running test_doctest.__doc__
0 of 0 examples failed in test_doctest.__doc__
Running test_doctest.f.__doc__
Trying: f(1)
Expecting: 10
ok
Trying: f(2)
Expecting: -10
ok
Trying: f(3)
Expecting: 0
ok
0 of 3 examples failed in test_doctest.f.__doc__
Running test_doctest.test.__doc__
0 of 0 examples failed in test_doctest.test.__doc__
2 items had no tests:
    test_doctest
    test_doctest.test
1 items passed all tests:
   3 tests in test_doctest.f
3 tests in 3 items.
3 passed and 0 failed.
Test passed.
</pre>
</div>
<div class="section" id="the-python-database-api">
<h2><a class="toc-backref" href="#id89">9.6&nbsp;&nbsp;&nbsp;The Python database API</a></h2>
<p>Python database API defines a standard interface for access to a
relational database.</p>
<p>In order to use this API you must install the database adapter
(interface module) for your particular database, e.g. PostgreSQL,
MySQL, Oracle, etc.</p>
<p>You can learn more about the Python DB-API here:
<a class="reference external" href="http://www.python.org/dev/peps/pep-0249/">http://www.python.org/dev/peps/pep-0249/</a></p>
<p>The following simple example uses <a class="reference external" href="http://docs.python.org/2/library/sqlite3.html#module-sqlite3">sqlite3 --
http://docs.python.org/2/library/sqlite3.html</a></p>
<pre class="literal-block">
#!/usr/bin/env python

&quot;&quot;&quot;
Create a relational database and a table in it.
Add some records.
Read and display the records.
&quot;&quot;&quot;

import sys
import sqlite3

def create_table(db_name):
    con = sqlite3.connect(db_name)
    cursor = con.cursor()
    cursor.execute('''CREATE TABLE plants
    (name text, desc text, cat int)''')
    cursor.execute(
        '''INSERT INTO plants VALUES ('tomato', 'red and juicy', 1)''')
    cursor.execute(
        '''INSERT INTO plants VALUES ('pepper', 'green and crunchy', 2)''')
    cursor.execute('''INSERT INTO plants VALUES ('pepper', 'purple', 2)''')
    con.commit()
    con.close()

def retrieve(db_name):
    con = sqlite3.connect(db_name)
    cursor = con.cursor()
    cursor.execute('''select * from plants''')
    rows = cursor.fetchall()
    print rows
    print '-' * 40
    cursor.execute('''select * from plants''')
    for row in cursor:
        print row
    con.close()

def test():
    args = sys.argv[1:]
    if len(args) != 1:
        sys.stderr.write('\nusage: test_db.py &lt;db_name&gt;\n\n')
        sys.exit(1)
    db_name = args[0]
    create_table(db_name)
    retrieve(db_name)

test()
</pre>
</div>
<div class="section" id="installing-python-packages">
<h2><a class="toc-backref" href="#id90">9.7&nbsp;&nbsp;&nbsp;Installing Python packages</a></h2>
<p>Simple:</p>
<pre class="literal-block">
$ python setup.py build
$ python setup.py install    # as root
</pre>
<p>More complex:</p>
<ul>
<li><p class="first">Look for a <tt class="docutils literal">README</tt> or <tt class="docutils literal">INSTALL</tt> file at the root of the
package.</p>
</li>
<li><p class="first">Type the following for help:</p>
<pre class="literal-block">
$ python setup.py cmd --help
$ python setup.py --help-commands
$ python setup.py --help [cmd1 cmd2 ...]
</pre>
</li>
<li><p class="first">And, for even more details, see
<a class="reference external" href="http://docs.python.org/inst/inst.html">Installing Python Modules --
http://docs.python.org/inst/inst.html</a></p>
</li>
</ul>
<p><tt class="docutils literal">pip</tt> is becoming popular for installing and managing Python
packages.  See: <a class="reference external" href="https://pypi.python.org/pypi/pip">https://pypi.python.org/pypi/pip</a></p>
<p>Also, consider using <tt class="docutils literal">virtualenv</tt>, especially if you suspect or
worry that installing some new package will alter the behavior of a
package currently installed on your machine.  See:
<a class="reference external" href="https://pypi.python.org/pypi/virtualenv">https://pypi.python.org/pypi/virtualenv</a>.  <tt class="docutils literal">virtualenv</tt> creates a
directory and sets up a Python environment into which you can
install and use Python packages without changing your usual Python
installation.</p>
</div>
</div>
<div class="section" id="more-python-features-and-exercises">
<h1><a class="toc-backref" href="#id91">10&nbsp;&nbsp;&nbsp;More Python Features and Exercises</a></h1>
<p>[As time permits, explain more features and do more exercises as
requested by class members.]</p>
<p>Thanks to David Goodger for the following list or references.  His
&quot;Code Like a Pythonista: Idiomatic Python&quot;
(<a class="reference external" href="http://python.net/~goodger/projects/pycon/2007/idiomatic/">http://python.net/~goodger/projects/pycon/2007/idiomatic/</a>) is worth
a careful reading:</p>
<ul class="simple">
<li>&quot;Python Objects&quot;, Fredrik Lundh,
<a class="reference external" href="http://www.effbot.org/zone/python-objects.htm">http://www.effbot.org/zone/python-objects.htm</a></li>
<li>&quot;How to think like a Pythonista&quot;, Mark Hammond,
<a class="reference external" href="http://python.net/crew/mwh/hacks/objectthink.html">http://python.net/crew/mwh/hacks/objectthink.html</a></li>
<li>&quot;Python main() functions&quot;, Guido van Rossum,
<a class="reference external" href="http://www.artima.com/weblogs/viewpost.jsp?thread=4829">http://www.artima.com/weblogs/viewpost.jsp?thread=4829</a></li>
<li>&quot;Python Idioms and Efficiency&quot;,
<a class="reference external" href="http://jaynes.colorado.edu/PythonIdioms.html">http://jaynes.colorado.edu/PythonIdioms.html</a></li>
<li>&quot;Python track: python idioms&quot;,
<a class="reference external" href="http://www.cs.caltech.edu/courses/cs11/material/python/misc/python_idioms.html">http://www.cs.caltech.edu/courses/cs11/material/python/misc/python_idioms.html</a></li>
<li>&quot;Be Pythonic&quot;, Shalabh Chaturvedi,
<a class="reference external" href="http://shalabh.infogami.com/Be_Pythonic2">http://shalabh.infogami.com/Be_Pythonic2</a></li>
<li>&quot;Python Is Not Java&quot;, Phillip J. Eby,
<a class="reference external" href="http://dirtsimple.org/2004/12/python-is-not-java.html">http://dirtsimple.org/2004/12/python-is-not-java.html</a></li>
<li>&quot;What is Pythonic?&quot;, Martijn Faassen,
<a class="reference external" href="http://faassen.n--tree.net/blog/view/weblog/2005/08/06/0">http://faassen.n--tree.net/blog/view/weblog/2005/08/06/0</a></li>
<li>&quot;Sorting Mini-HOWTO&quot;, Andrew Dalke,
<a class="reference external" href="http://wiki.python.org/moin/HowTo/Sorting">http://wiki.python.org/moin/HowTo/Sorting</a></li>
<li>&quot;Python Idioms&quot;, <a class="reference external" href="http://www.gungfu.de/facts/wiki/Main/PythonIdioms">http://www.gungfu.de/facts/wiki/Main/PythonIdioms</a></li>
<li>&quot;Python FAQs&quot;, <a class="reference external" href="http://www.python.org/doc/faq/">http://www.python.org/doc/faq/</a></li>
</ul>
<!-- Configuration for Emacs -->
<!-- Aternative mode: indented-text -->
<!-- Local Variables:
mode: rst
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 68
End: -->
</div>
</div>
<div class="footer">
<hr class="footer" />
<a class="reference external" href="Docs/python_course_03.txt">View document source</a>.
Generated by <a class="reference external" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>
</body>
</html>
